(this["webpackJsonpcioos-metadata-entry-form"]=this["webpackJsonpcioos-metadata-entry-form"]||[]).push([[0],{111:function(e,t,a){e.exports=a(127)},116:function(e,t,a){},127:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),o=(a(116),a(63)),i=a(13),s=a(29),u=a(37),m=a(20),d=a(75),p=a.n(d);a(117),a(120);p.a.initializeApp({apiKey:"AIzaSyAdlELZS5Lbea5NquotMT8amwO-Lc_7ogc",authDomain:"cioos-metadata-form.firebaseapp.com",databaseURL:"https://cioos-metadata-form.firebaseio.com",projectId:"cioos-metadata-form",storageBucket:"cioos-metadata-form.appspot.com",messagingSenderId:"646114203434",appId:"1:646114203434:web:bccceadc5144270f98f053"});var h=p.a,f=new h.auth.GoogleAuthProvider;f.setCustomParameters({promt:"select_account"});var E=h.auth(),b=a(3),v=a(156),g=a(24),O=a(164),y=a(171),C=a(172),j=a(176),w=a(177),k=a(178),S=a(179),I=a(180),x=a(181),N=a(159),L=a(161),W=a(162),D=a(163),U=a(54),R=a(189),A=a(168),B=a(169),P=a(194),q=a(129),T=a(173),M=a(195),z=a(174),J=a(175),F=a(167),H=a(41),Q=a(42),G=a(45),K=a(43),V=Object(n.createContext)({user:null}),Z=function(e){Object(G.a)(a,e);var t=Object(K.a)(a);function a(){var e;Object(H.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e.componentDidMount=function(){E.onAuthStateChanged((function(t){e.setState({user:t})}))},e}return Object(Q.a)(a,[{key:"render",value:function(){return r.a.createElement(V.Provider,{value:this.state.user},this.props.children)}}]),a}(n.Component),$=Object(v.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(m.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(u.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)}}}));function _(e){var t,a,l=Object(i.e)(),c=$(),o=Object(g.a)(),u=Object(n.useContext)(V),d=r.a.useState(!1),p=Object(s.a)(d,2),h=p[0],v=p[1];return r.a.createElement("div",{className:c.root},r.a.createElement(N.a,null),r.a.createElement(L.a,{position:"fixed",className:Object(b.a)(c.appBar,Object(m.a)({},c.appBarShift,h))},r.a.createElement(W.a,null,r.a.createElement(D.a,{color:"inherit","aria-label":"open drawer",onClick:function(){v(!0)},edge:"start",className:Object(b.a)(c.menuButton,Object(m.a)({},c.hide,h))},r.a.createElement(O.a,null)),r.a.createElement(U.a,{variant:"h6",noWrap:!0},"CIOOS Metadata Tool"),r.a.createElement(R.a,{value:"en"},r.a.createElement(A.a,{value:"en"},"EN"),r.a.createElement(A.a,{value:"fr"},"FR"))," ",r.a.createElement(B.a,{color:"inherit"},"Login"))),r.a.createElement(P.a,{variant:"permanent",className:Object(b.a)(c.drawer,(t={},Object(m.a)(t,c.drawerOpen,h),Object(m.a)(t,c.drawerClose,!h),t)),classes:{paper:Object(b.a)((a={},Object(m.a)(a,c.drawerOpen,h),Object(m.a)(a,c.drawerClose,!h),a))}},r.a.createElement("div",{className:c.toolbar},r.a.createElement(D.a,{onClick:function(){v(!1)}},"rtl"===o.direction?r.a.createElement(y.a,null):r.a.createElement(C.a,null))),u&&r.a.createElement(q.a,{button:!0,key:"New Record"},r.a.createElement(T.a,null,r.a.createElement(M.a,{src:u.photoURL})),r.a.createElement(z.a,{primary:u.displayName})),r.a.createElement(J.a,null),r.a.createElement(F.a,null,r.a.createElement(q.a,{button:!0,key:"Home",onClick:function(){return l.push("/")}},r.a.createElement(T.a,null,r.a.createElement(j.a,null)),r.a.createElement(z.a,{primary:"Home"})),!u&&r.a.createElement(q.a,{button:!0,key:"Sign in",onClick:function(){return E.signInWithPopup(f).then((function(){return l.push("/")}))}},r.a.createElement(T.a,null,r.a.createElement(w.a,null)),r.a.createElement(z.a,{primary:"Sign in"})),u&&r.a.createElement(n.Fragment,null,r.a.createElement(q.a,{button:!0,key:"New Record",onClick:function(){return l.push("/new")}},r.a.createElement(T.a,null,r.a.createElement(k.a,null)),r.a.createElement(z.a,{primary:"New Record"})),r.a.createElement(q.a,{button:!0,key:"Contacts",onClick:function(){return l.push("/contacts")}},r.a.createElement(T.a,{disabled:!0},r.a.createElement(S.a,null)),r.a.createElement(z.a,{primary:"Contacts"})),r.a.createElement(q.a,{button:!0,key:"Saved Records",onClick:function(){return l.push("/submissions")}},r.a.createElement(T.a,null,r.a.createElement(I.a,null)),r.a.createElement(z.a,{primary:"Saved Records"})),r.a.createElement(q.a,{button:!0,key:"Logout",onClick:function(){return E.signOut().then((function(){return l.push("")}))}},r.a.createElement(T.a,null,r.a.createElement(x.a,null)),r.a.createElement(z.a,{primary:"Logout"})))),r.a.createElement(J.a,null)),r.a.createElement("main",{className:c.content},r.a.createElement("div",{className:c.toolbar}),e.children))}var X=function(){return r.a.createElement(_,null,r.a.createElement("h1",null,"Home"),r.a.createElement(U.a,null,"Welcome home"))},Y=function(){return r.a.createElement(_,null,r.a.createElement("h1",null,"Submission received!"),r.a.createElement(U.a,null,"Thank you for your submission!"))},ee=a(38),te=a.n(ee),ae=a(93),ne=a(50),re=a(4),le=["oxygen","nutrients","nitrate","phosphate","silicate","inorganicCarbon","dissolvedOrganicCarbon","seaSurfaceHeight","seawaterDensity","potentialTemperature","potentialDensity","speedOfSound","seaIce","seaState","seaSurfaceSalinity","seaSurfaceTemperature","subSurfaceCurrents","subSurfaceSalinity","subSurfaceTemperature","surfaceCurrents"],ce=["resourceProvider","custodian","owner","user","distributor","originator","pointOfContact","principalInvestigator","processor","publisher","author","sponsor","coAuthor","collaborator","editor","mediator","rightsHolder","contributor","funder","stakeholder"],oe=["deprecated","proposed","withdrawn","notAccepted","accepted","valid","tentative","superseded","retired","pending","final","underDevelopment","required","planned","onGoing","obsolete","historicalArchive","completed"],ie=a(185),se=a(128),ue=a(196),me=a(183),de=r.a.memo((function(e){var t=e.onChange,a=e.value,l=e.name,c=e.label,o=e.multiline,i=Object(n.useState)({en:"",fr:""}),d=Object(s.a)(i,2),p=d[0],h=d[1];function f(e){var a=Object(u.a)(Object(u.a)({},p),{},Object(m.a)({},e.target.name,e.target.value));h(a),t({target:{name:l,value:a}})}return r.a.createElement("div",null,r.a.createElement("h5",null,c),r.a.createElement("div",null,r.a.createElement(ue.a,{name:"en",fullWidth:!0,value:a&&a.en,onChange:f,InputProps:{startAdornment:r.a.createElement(me.a,{position:"start"},"EN")},multiline:o})),r.a.createElement("div",null,r.a.createElement(ue.a,{fullWidth:!0,name:"fr",value:a&&a.fr,onChange:f,InputProps:{startAdornment:r.a.createElement(me.a,{position:"start"},"FR")},multiline:o})))}),(function(e,t){return e.value===t.value})),pe=a(182),he=a(197),fe=a(184),Ee=a(191),be=r.a.memo((function(e){var t=e.onChange,a=e.value,l=e.name,c=e.label,o=e.options,i=e.optionLabels,u=Object(n.useState)([]),m=Object(s.a)(u,2),d=m[0],p=m[1];return r.a.createElement(pe.a,{style:{minWidth:120}},r.a.createElement(he.a,{id:"demo-simple-select-label"},c),o.map((function(e,n){return r.a.createElement(fe.a,{key:e,control:r.a.createElement(Ee.a,{key:e,value:e,name:l,checked:a.includes(e),onChange:function(e){var a,n,r=e.target.value,c=(a=r,(n=d).includes(a)?n.filter((function(e){return e!==a})):n.concat(a));p(c),t({target:{name:l,value:c}})}}),label:i[n]})})))}),(function(e,t){return e.value===t.value})),ve=r.a.memo((function(e){var t=e.value,a=e.name,n=e.label,l=e.options,c=e.optionLabels,o=e.onChange;return r.a.createElement(pe.a,{style:{minWidth:120}},r.a.createElement(he.a,{id:"demo-simple-select-label"},n),r.a.createElement(R.a,{name:a,fullWidth:!0,value:t,onChange:o},l.map((function(e,t){return r.a.createElement(A.a,{key:e,value:e},c[t])}))))}),(function(e,t){return e.value===t.value})),ge=a(92),Oe=a(18),ye=a(188),Ce=function(e){var t=e.onChange,a=e.value,n=e.name;return r.a.createElement(Oe.a,{utils:ge.a},r.a.createElement(ye.a,{margin:"normal",id:"date-picker-dialog",label:"Date picker dialog",format:"MM/dd/yyyy",value:a,onChange:function(e){return t({target:{name:n,value:e}})},KeyboardButtonProps:{"aria-label":"change date"}}))},je=Object(n.createContext)({records:null});n.Component;function we(e){var t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}var ke=function(e){Object(G.a)(a,e);var t=Object(K.a)(a);function a(e){var n;return Object(H.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(m.a)({},a,r))}))},n.state={title:{en:"",fr:""},abstract:{en:"",fr:""},id:"",eov:[],role:"",progress:"",dateStart:new Date,recordID:""},n}return Object(Q.a)(a,[{key:"handleSubmitClick",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,a,n,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.database().ref("test/users").child(E.currentUser.uid),console.log("auth.currentUser.uid",E.currentUser.uid),a=this.state,n=a.recordID,r=Object(ae.a)(a,["recordID"]),!this.state.recordID){e.next=8;break}return e.next=6,t.child(n).update(r);case 6:e.next=11;break;case 8:return e.next=10,t.push(r);case 10:this.props.history.push("/success");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"firebaseToJSObject",value:function(e){Object.keys(e).forEach((function(t){"object"==typeof e[t]&&"0"==Object.keys(e[t])[0]&&(e[t]=Object.entries(e[t]).map((function(e){var t=Object(s.a)(e,2);t[0];return t[1]})))}))}},{key:"componentDidMount",value:function(){var e=this;if(E.currentUser){var t,a=this.props.location;if(a&&(t=a.pathname.slice(1).includes("/")&&a.pathname.split("/").pop())){console.log("trying to load",t);h.database().ref("test/users").child(E.currentUser.uid).on("value",(function(a){var n=a.toJSON();if(n[t]){console.log("found",t);var r=n[t];e.firebaseToJSObject(r),e.setState(Object(u.a)({recordID:t},r)),console.log("setState",r)}}))}}}},{key:"render",value:function(){var e=this,t=function(e){return r.a.createElement(n.Fragment,null,e.children)},a=function(e){return!1},l=function(e,t){return e};return r.a.createElement(ie.a,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch"},r.a.createElement(se.a,{className:this.props.classes.paper},r.a.createElement("h1",null,"CIOOS Metadata Profile Intake Form"),r.a.createElement(U.a,null,r.a.createElement(t,null,"Welcome to the CIOOS metadata profile generation form! Please fill out each field with as much detail as you can. Using this information we will create your metadata profile for the given dataset."),r.a.createElement(a,null,"Bienvenue sur le formulaire de g\xe9n\xe9ration de profils de m\xe9tadonn\xe9es CIOOS ! Veuillez remplir sur chaque champ avec autant de d\xe9tails que vous pouvez. Utilisation de cette informations que nous allons cr\xe9er votre profil de m\xe9tadonn\xe9es pour le jeu de donn\xe9es."))),r.a.createElement(se.a,{className:this.props.classes.paper},r.a.createElement(U.a,null,r.a.createElement(t,null,"What is the dataset title?"),r.a.createElement(a,null,"Quel est le titre du jeu de donn\xe9es?")),r.a.createElement(de,{name:"title",value:this.state.title,onChange:this.handleInputChange,required:!0,primaryLanguage:"en"})),r.a.createElement(se.a,{className:this.props.classes.paper},r.a.createElement(U.a,null,r.a.createElement(t,null,"What is their role?"),r.a.createElement(a,null,"Quel est leur r\xf4le ?")),r.a.createElement(ve,{label:l("Choose"),name:"role",value:this.state.role,onChange:function(t){return e.handleInputChange(t)},options:ce,optionLabels:ce.map(we)})),r.a.createElement(se.a,{className:this.props.classes.paper},r.a.createElement(U.a,null,r.a.createElement(t,null,"Please select all the essential ocean variables that are contained in this dataset"),r.a.createElement(a,null,"Veuillez s\xe9lectionner toutes les variables oc\xe9aniques essentielles contenues dans cet ensemble de donn\xe9es")),r.a.createElement(be,{name:"eov",value:this.state.eov,onChange:this.handleInputChange,options:le,optionLabels:le.map(we)})),r.a.createElement(se.a,{className:this.props.classes.paper},r.a.createElement(U.a,null,r.a.createElement(t,null,"What is the status of this dataset?"),r.a.createElement(a,null,"Quel est l'\xe9tat de ce jeu de donn\xe9es ?")),r.a.createElement(ve,{label:l("Choose"),name:"progress",value:this.state.progress,onChange:function(t){return e.handleInputChange(t)},options:oe,optionLabels:oe.map(we)})),r.a.createElement(se.a,{className:this.props.classes.paper},r.a.createElement(U.a,null,r.a.createElement(t,null,"What is the dataset abstract?"),r.a.createElement(a,null,"Qu'est-ce que le r\xe9sum\xe9 du jeu de donn\xe9es ?")),r.a.createElement(de,{name:"abstract",value:this.state.abstract,onChange:this.handleInputChange,multiline:!0,primaryLanguage:"en"})),r.a.createElement(se.a,{className:this.props.classes.paper},r.a.createElement(U.a,null,r.a.createElement(t,null,"What is the start date when data was first collected?"),r.a.createElement(a,null,"Quelle est la date de d\xe9but \xe0 laquelle les donn\xe9es ont \xe9t\xe9 collect\xe9es pour la premi\xe8re fois?")),r.a.createElement(Ce,{name:"dateStart",value:this.state.dateStart,onChange:this.handleInputChange})),r.a.createElement(B.a,{variant:"contained",color:"primary",onClick:function(){return e.handleSubmitClick()}},this.state.recordID?l("Update"):l("Submit")))}}]),a}(n.Component),Se=Object(i.f)(Object(re.a)({paper:{padding:"10px",margin:"20px"}})(ke));function Ie(){return r.a.createElement(_,null,r.a.createElement(Se,null))}var xe=a(186),Ne=a(187),Le=function(e){Object(G.a)(a,e);var t=Object(K.a)(a);function a(e){var n;return Object(H.a)(this,a),(n=t.call(this,e)).databaseCallback=function(e){return n.setState({records:e.toJSON()})},n.state={records:{}},n}return Object(Q.a)(a,[{key:"componentDidMount",value:function(){var e=Object(ne.a)(te.a.mark((function e(){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.currentUser&&h.database().ref("test/users").child(E.currentUser.uid).on("value",this.databaseCallback);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"editRecord",value:function(e){this.props.history.push("/new/".concat(e))}},{key:"deleteRecord",value:function(e){E.currentUser&&h.database().ref("test/users").child(E.currentUser.uid).child(e).remove()}},{key:"render",value:function(){var e=this;return r.a.createElement(_,null,r.a.createElement("h1",null,"Submission list"),this.state.records&&Object.keys(this.state.records).length>0?r.a.createElement("div",null,r.a.createElement(U.a,null,"These are the submissions we have received:"),r.a.createElement(F.a,null,Object.entries(this.state.records).map((function(t){var a=Object(s.a)(t,2),n=a[0],l=a[1];return r.a.createElement(q.a,{button:!0,key:n},r.a.createElement(z.a,{primary:l.title.en}),r.a.createElement(T.a,{onClick:function(){return e.editRecord(n)}},r.a.createElement(xe.a,null)),r.a.createElement(T.a,{onClick:function(){return e.deleteRecord(n)}},r.a.createElement(Ne.a,null)))})))):r.a.createElement(U.a,null,"No records submitted yet!"))}}]),a}(r.a.Component),We=function(){return r.a.createElement(_,null,r.a.createElement("h1",null,"Contacts"),r.a.createElement(U.a,null,"Just a stub for now"))},De=function(){return r.a.createElement(Z,null,r.a.createElement(o.a,{basename:"/"},r.a.createElement(i.a,{exact:!0,path:"/",component:X}),r.a.createElement(i.a,{path:"/new",component:Ie}),r.a.createElement(i.a,{path:"/contacts",component:We}),r.a.createElement(i.a,{path:"/success",component:Y}),r.a.createElement(i.a,{path:"/submissions",component:Le})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(De,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[111,1,2]]]);
//# sourceMappingURL=main.8175b6de.chunk.js.map
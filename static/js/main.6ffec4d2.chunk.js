(this["webpackJsonpcioos-metadata-entry-form"]=this["webpackJsonpcioos-metadata-entry-form"]||[]).push([[0],{186:function(e,t,a){e.exports=a(210)},191:function(e,t,a){},210:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),i=a.n(l),o=a(313),s=a(155),c=(a(191),a(33)),u=a(27),m=a(17),d=a.n(m),p=a(31),h=a(15),f=a(18),E=a(24),g=a(2),b=a(254),v=a(28),y=a(260),C=a(267),x=a(268),O=a(273),w=a(274),j=a(275),S=a(276),k=a(277),I=a(278),q=a(256),P=a(258),D=a(259),A=a(211),R=a(93),M=a(317),L=a(265),T=a(324),z=a(213),N=a(269),W=a(325),U=a(270),F=a(271),B=a(264),V=a(272),G={stlaurent:{title:{en:"CIOOS St. Lawrence",fr:"SIOOC Saint-Laurent"},catalogueTitle:{fr:"Catalogue de donn\xe9es de l'Observatoire global du Saint-Laurent (OGSL)",en:"St. Lawrence Global Observatory Data Catalogue (SLGO)"},colors:{primary:"#00adef",secondary:"#00aeef"},email:"info@ogsl.ca",catalogueURL:{fr:"https://catalogue.ogsl.ca",en:"https://catalogue.ogsl.ca/en/"}},atlantic:{title:{en:"CIOOS Atlantic",fr:"SIOOC Atlantique"},catalogueTitle:{fr:"Catalogue de donn\xe9es du SIOOC du Atlantic",en:"CIOOS Atlantic Data Catalogue"},colors:{primary:"#19222b",secondary:"#e55162"},email:"info@cioosatlantic.ca",catalogueURL:{fr:"https://cioosatlantic.ca/ckan/fr/",en:"https://cioosatlantic.ca/ckan/"}},pacific:{title:{en:"CIOOS Pacific",fr:"SIOOC Pacifique"},catalogueTitle:{fr:"Catalogue de donn\xe9es du SIOOC du Pacifique",en:"CIOOS Pacific Data Catalogue"},colors:{primary:"#006e90",secondary:"#ffc857"},email:"info@cioospacific.ca",catalogueURL:{fr:"https://catalogue.cioospacific.ca/fr/",en:"https://catalogue.cioospacific.ca/"}}},H=a(127),J=a.n(H);a(193),a(195),a(197),a(199);J.a.initializeApp({apiKey:"AIzaSyAdlELZS5Lbea5NquotMT8amwO-Lc_7ogc",authDomain:"cioos-metadata-form.firebaseapp.com",databaseURL:"https://cioos-metadata-form.firebaseio.com",projectId:"cioos-metadata-form",storageBucket:"cioos-metadata-form.appspot.com",messagingSenderId:"646114203434",appId:"1:646114203434:web:bccceadc5144270f98f053"});var Y=J.a,Q=new Y.auth.GoogleAuthProvider;Q.setCustomParameters({promt:"select_account"});var _=Y.auth(),K=function(e){var t=e.children;return"en"===Object(u.i)().language&&r.a.createElement(r.a.Fragment,null,t)},Z=function(e){var t=e.children;return"fr"===Object(u.i)().language&&r.a.createElement(r.a.Fragment,null,t)},$=function(e){var t=e.en,a=e.fr,n=Object(u.i)().language;return"en"===(void 0===n?"en":n)?t:a},X=a(44),ee=a(45),te=a(47),ae=a(46),ne=a(43),re=a(253),le=Object(n.createContext)({user:null,authIsLoading:!1}),ie=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(e){var n;return Object(X.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props.match.params.region;n.setState({authIsLoading:!0}),n.unsubscribe=_.onAuthStateChanged((function(t){if(t){var a=t.displayName,r=t.email,l=t.uid;ne.a({category:"auth",message:"Authenticated user ".concat(r),level:re.a.Info}),Y.database().ref(e).child("users").child(l).child("userinfo").update({displayName:a,email:r}),Y.database().ref(e).child("permissions").on("value",(function(e){var t=e.toJSON(),a=t&&Object.values(t.admins||{}),l=t&&Object.values(t.reviewers||{}),i=a&&a.includes(r),o=l&&l.includes(r);n.setState({admins:a,reviewers:l,isAdmin:i,isReviewer:o,loggedIn:!0})}))}else n.setState({loggedIn:!1,authIsLoading:!1});n.setState({user:t,authIsLoading:!1})}))},n.state={user:null,authIsLoading:!1,admins:[],reviewers:[],isReviewer:!1,loggedIn:!1},n}return Object(ee.a)(a,[{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"render",value:function(){var e=this.props.children,t=Y.functions().httpsCallable("translate");return r.a.createElement(le.Provider,{value:Object(f.a)(Object(f.a)({},this.state),{},{translate:t})},e)}}]),a}(n.Component),oe=Object(u.j)(ie),se=Object(b.a)((function(e){return{root:{display:"flex",flexGrow:1},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},languageSelector:{"&:before":{borderColor:"white"},"&:hover:not(.Mui-disabled):before":{borderColor:"white"},color:"white",borderColor:"white",marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(E.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(f.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)}}}));function ce(e){var t,a,l=e.children,i=Object(u.g)(),o=se(),s=Object(v.a)(),c=Object(n.useContext)(le),m=c.user,f=c.isReviewer,b=c.isAdmin,H=c.authIsLoading,J=Object(u.i)(),Y=J.language,X=void 0===Y?"en":Y,ee=J.region,te=void 0===ee?"region-select":ee;["en","fr"].includes(X)||(X="en"),["pacific","atlantic","stlaurent"].includes(te)||(te="");var ae=Object(u.h)().pathname,ne=ae.split("/").map((function(e){return e})).slice(2).join("/"),re="/".concat(X,"/").concat(te),ie=r.a.useState(Boolean(te)),oe=Object(h.a)(ie,2),ce=oe[0],ue=oe[1],me={home:r.a.createElement($,{en:"Home",fr:"Accueil"}),new:r.a.createElement($,{en:"Metadata Editor",fr:"\xc9diteur de m\xe9ta-donn\xe9es"}),contacts:r.a.createElement($,{en:"Contacts",fr:"Contacts"}),saved:r.a.createElement($,{en:"My Records",fr:"Enregistrements"}),review:r.a.createElement($,{en:"Review submissions",fr:"Examen des soumissions"}),admin:r.a.createElement($,{en:"Admin",fr:"Admin"}),signIn:r.a.createElement($,{en:"Sign in",fr:"Se Connecter"}),logout:r.a.createElement($,{en:"Logout",fr:"D\xe9connexion"})},de=te?G[te].colors.primary:"#52a79b";return r.a.createElement("div",{className:o.root},r.a.createElement(q.a,null),r.a.createElement(P.a,{position:"fixed",className:Object(g.a)(o.appBar,Object(E.a)({},o.appBarShift,ce))},r.a.createElement(D.a,{style:{backgroundColor:de,alignItems:"end"}},te&&r.a.createElement(A.a,{"aria-label":"open drawer",onClick:function(){ue(!0)},edge:"start",className:Object(g.a)(o.menuButton,Object(E.a)({},o.hide,ce))},r.a.createElement(y.a,null)),r.a.createElement(R.a,{variant:"h5",noWrap:!0,style:{marginLeft:"10px",marginBottom:"10px",flex:1,color:"white"}},r.a.createElement(K,null,"Metadata Entry Tool"),r.a.createElement(Z,null,"Outil de saisie de m\xe9tadonn\xe9es")),r.a.createElement("div",{style:{marginLeft:"auto"}},r.a.createElement("img",{src:"".concat("/metadata-entry-form","/cioos_website_top_banner_").concat(X,".png"),alt:"CIOOS/SIOOC",width:350,style:{verticalAlign:"bottom",paddingRight:"15px"}}),r.a.createElement(M.a,{color:"primary",className:o.languageSelector,value:X,onChange:function(e){return i.push("/".concat(e.target.value,"/").concat(ne))}},r.a.createElement(L.a,{value:"en"},"EN"),r.a.createElement(L.a,{value:"fr"},"FR"))))),te&&r.a.createElement(T.a,{variant:"permanent",className:Object(g.a)(o.drawer,(t={},Object(E.a)(t,o.drawerOpen,ce),Object(E.a)(t,o.drawerClose,!ce),t)),classes:{paper:Object(g.a)((a={},Object(E.a)(a,o.drawerOpen,ce),Object(E.a)(a,o.drawerClose,!ce),a))}},r.a.createElement("div",{className:o.toolbar},r.a.createElement(A.a,{onClick:function(){ue(!1)}},"rtl"===s.direction?r.a.createElement(C.a,null):r.a.createElement(x.a,null))),m&&r.a.createElement(z.a,{key:"userInfo"},r.a.createElement(N.a,null,r.a.createElement(W.a,{src:m.photoURL})),r.a.createElement(U.a,{primary:m.displayName})),r.a.createElement(F.a,null),r.a.createElement(B.a,null,!m&&te&&r.a.createElement(V.a,{placement:"right-start",title:ce?"":me.signIn},r.a.createElement(z.a,{disabled:H,button:!0,key:"Sign in",onClick:Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.signInWithPopup(Q);case 2:i.push(ae);case 3:case"end":return e.stop()}}),e)})))},r.a.createElement(N.a,null,r.a.createElement(O.a,null)),r.a.createElement(U.a,{primary:me.signIn}))),m&&te&&r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{placement:"right-start",title:ce?"":me.saved},r.a.createElement(z.a,{button:!0,key:"My Records",onClick:function(){return i.push("".concat(re,"/submissions"))}},r.a.createElement(N.a,null,r.a.createElement(w.a,null)),r.a.createElement(U.a,{primary:me.saved}))),te&&r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{placement:"right-start",title:ce?"":me.contacts},r.a.createElement(z.a,{button:!0,key:"Contacts",onClick:function(){return i.push("".concat(re,"/contacts"))}},r.a.createElement(N.a,{disabled:!0},r.a.createElement(j.a,null)),r.a.createElement(U.a,{primary:me.contacts}))),f&&r.a.createElement(V.a,{placement:"right-start",title:ce?"":me.review},r.a.createElement(z.a,{button:!0,key:"Review",onClick:function(){return i.push("".concat(re,"/reviewer"))}},r.a.createElement(N.a,null,r.a.createElement(S.a,null)),r.a.createElement(U.a,{primary:me.review}))),b&&r.a.createElement(V.a,{placement:"right-start",title:ce?"":me.admin},r.a.createElement(z.a,{button:!0,key:"Admin",onClick:function(){return i.push("".concat(re,"/admin"))}},r.a.createElement(N.a,null,r.a.createElement(k.a,null)),r.a.createElement(U.a,{primary:me.admin}))))),m&&r.a.createElement(V.a,{placement:"right-start",title:ce?"":me.logout},r.a.createElement(z.a,{button:!0,key:"Logout",onClick:function(){return _.signOut().then((function(){return i.push(re)}))}},r.a.createElement(N.a,null,r.a.createElement(I.a,null)),r.a.createElement(U.a,{primary:me.logout})))),r.a.createElement(F.a,null)),r.a.createElement("main",{className:o.content},r.a.createElement("div",{className:o.toolbar}),l))}var ue=a(291),me=a(279),de=a(156),pe=a(307),he=a(318),fe=a(280),Ee=a(282),ge=a(284),be=a(281),ve=a(283),ye=a(285),Ce=a(286),xe=a(287),Oe=a(288),we=a(289),je=a(290),Se=a(326),ke=function(e){var t=e.status,a="";return a="submitted"===t?r.a.createElement($,{en:"Submitted",fr:"Soumis"}):"published"===t?r.a.createElement($,{en:"Published",fr:"Publi\xe9"}):r.a.createElement($,{en:"Draft",fr:"Brouillon"}),r.a.createElement(Se.a,{label:a,color:{submitted:"primary",published:"secondary"}[t]||"default",variant:"outlined"})},Ie=function(e){return e>=-90&&e<=90},qe=function(e){return e>=-180&&e<=180},Pe=function(e){var t,a,n=e.split(" ").map((function(e){return e.split(",")}));return!(n.length<2)&&(t=n[0],a=n[n.length-1],!!JSON.parse(JSON.stringify(t)===JSON.stringify(a))&&n.filter((function(e){var t=Object(h.a)(e,2),a=t[0],n=t[1];return qe(parseFloat(n))&&Ie(parseFloat(a))})).length===n.length)},De=function(e){return Boolean(e.role&&e.role.length&&(e.orgName||e.indName))},Ae={title:{validation:function(e){return e&&e.en&&e.fr},tab:"data identification",error:{en:"Missing title in French or English",fr:"Titre manquant en fran\xe7ais ou en anglais"}},abstract:{validation:function(e){return e&&e.en&&e.fr},tab:"data identification",error:{en:"Missing abstract in French or English",fr:"Abr\xe9g\xe9 manquant en fran\xe7ais ou en anglais"}},keywords:{validation:function(e){return e&&(e.en.length||e.fr.length)},tab:"data identification",error:{en:"At least one keyword is required",fr:"Au moins un mot cl\xe9 est requis"}},eov:{validation:function(e){return e&&e.length},tab:"data identification",error:{en:"At least one EOV is required",fr:"Au moins un EOV est requis"}},map:{error:{en:"Spatial information is missing",fr:"L'information spatiale est manquante"},tab:"spatial",validation:function(e){if(!e)return!1;var t=parseFloat(e.north),a=parseFloat(e.south),n=parseFloat(e.east),r=parseFloat(e.west),l=e.polygon;return t&&a&&n&&r&&t>=a&&n>=r&&Ie(t)&&Ie(a)&&qe(n)&&qe(r)||l&&Pe(l)}},progress:{tab:"data identification",validation:function(e){return e},error:{en:"Please select a dataset status",fr:"L'information spatiale est manquante"}},distribution:{tab:"resources",validation:function(e){return Array.isArray(e)&&e.filter((function(e){return e.name&&e.url})).length},error:{en:"Must have at least one resource",fr:"Doit avoir au moins une ressource"}},verticalExtentMin:{tab:"spatial",validation:function(e){return e},error:{en:"Missing Vertical Extent Min",fr:"\xc9tendue verticale manquante Min"}},verticalExtentMax:{tab:"spatial",validation:function(e){return e},error:{en:"Missing Vertical Extent Max",fr:"\xc9tendue verticale manquante Max"}},verticalExtentDirection:{tab:"spatial",validation:function(e){return e},error:{en:"Missing Vertical Extent Direction",fr:"Direction de l'\xe9tendue verticale manquante"}},platformID:{tab:"platform",validation:function(e,t){return t.noPlatform||e},error:{en:"Missing platform ID",fr:"ID de plateforme manquant"}},platformDescription:{tab:"platform",validation:function(e,t){return t.noPlatform||e},error:{en:"Missing platform description",fr:"Description de la plateforme manquante"}},instruments:{tab:"platform - instruments",validation:function(e,t){return t.noPlatform||e&&e.filter((function(e){return e.id})).length},error:{en:"At least one instrument is required if there is a platform",fr:"Au moins un instrument est requis s'il y a une plateforme"}},language:{tab:"data identification",validation:function(e){return e},error:{en:"Language field is missing",fr:"Le champ de langue est manquant"}},license:{tab:"data identification",validation:function(e){return e},error:{en:"Please select a license for the dataset",fr:"Veuillez s\xe9lectionner une licence pour le jeu de donn\xe9es"}},contacts:{tab:"contacts",validation:function(e){return e&&e.every(De)&&e.filter(De).find((function(e){return e.role.includes("custodian")}))&&e.filter(De).find((function(e){return e.role.includes("owner")}))},error:{en:"Every contact must have at least one role checked, and  'Data contact' or 'Metadata contact' must be added to at least one contact",fr:"Chaque contact doit avoir au moins un r\xf4le v\xe9rifi\xe9, et \xab Personne-contact pour les m\xe9tadonn\xe9es \xbb ou \xab Personne-contact pour les donn\xe9es \xbb doit \xeatre ajout\xe9 \xe0 au moins un contact"}}},Re=function(e,t){var a=e[t],n=Ae[t]&&Ae[t].validation||function(){return!0};return n&&n(a,e)},Me=function(e){var t=Object.keys(Ae),a=t.length;return t.filter((function(t){return Re(e,t)})).length/a};function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return"";var t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}function Te(e){return JSON.parse(JSON.stringify(e))}function ze(e){if(!e)return null;var t=Te(e);return Object.keys(t).forEach((function(a){"object"===typeof t[a]&&"0"===Object.keys(t[a])[0]&&(t[a]=Object.entries(t[a]).map((function(e){return Object(h.a)(e,2)[1]}))),e.keywords&&(t.keywords={en:Object.values(e.keywords.en||{}),fr:Object.values(e.keywords.fr||{})})})),t.contacts&&Object.values(t.contacts).forEach((function(e){e.role&&(e.role=Object.values(e.role))})),t}var Ne=a(312),We=a(146),Ue=a(147),Fe=function(e){var t,a=e.dateStr;return a?("en"===Object(u.i)().language?(Ne.a.addLocale(We),t=new Ne.a("en-US")):(Ne.a.addLocale(Ue),t=new Ne.a("fr-FR")),r.a.createElement("span",null,r.a.createElement(K,null,"Last edited"),r.a.createElement(Z,null,"Derni\xe8re modification")," ",t.format(new Date(a)),". ")):null},Be=a(217);function Ve(){return Math.round(20*Math.random())-10}function Ge(){var e=50+Ve(),t=50+Ve();return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(-".concat(e,"%, -").concat(t,"%)")}}var He=Object(b.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function Je(e){var t=e.open,a=e.onClose,n=e.onAccept,l=He(),i=r.a.useState(Ge),o=Object(h.a)(i,1)[0];return r.a.createElement("div",null,r.a.createElement(Be.a,{open:t,onClose:a,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement("div",{style:o,className:l.paper},r.a.createElement("h2",{id:"simple-modal-title"},r.a.createElement(K,null,"Are you sure?"),r.a.createElement(Z,null,"Vous \xeates s\xfbr ?")),r.a.createElement("button",{type:"button",onClick:function(){a(),n()}},r.a.createElement(K,null,"Yes"),r.a.createElement(Z,null,"Oui")),r.a.createElement("button",{type:"button",onClick:a},r.a.createElement(K,null,"No"),r.a.createElement(Z,null,"Non")))))}var Ye=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(e){var n;return Object(X.a)(this,a),(n=t.call(this,e)).state={records:{},deleteModalOpen:!1,submitModalOpen:!1,withdrawModalOpen:!1,modalKey:"",modalRecord:null,loading:!1},n}return Object(ee.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0}),t=this.props.match,a=t.params.region,this.unsubscribe=_.onAuthStateChanged((function(e){e?Y.database().ref(a).child("users").child(e.uid).child("records").on("value",(function(e){return n.setState({records:e.toJSON(),loading:!1})})):n.setState({loading:!1})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"editRecord",value:function(e){var t=this.props,a=t.match,n=t.history,r=a.params,l=r.language,i=r.region,o=_.currentUser;n.push("/".concat(l,"/").concat(i,"/").concat(o.uid,"/").concat(e))}},{key:"submitRecord",value:function(e,t){var n=this.props.match.params.region;if(_.currentUser&&e){var r=Y.database().ref(n).child("users").child(_.currentUser.uid).child("records").child(e);if(r.child("status").set("submitted"),t&&!t.filename){var l=a.getRecordFilename(t);r.child("filename").set(l)}}}},{key:"withdrawRecord",value:function(e){var t=this.props.match.params.region;_.currentUser&&e&&Y.database().ref(t).child("users").child(_.currentUser.uid).child("records").child(e).child("status").set("")}},{key:"cloneRecord",value:function(e){var t=this.props.match.params.region;if(_.currentUser){var a=Y.database().ref(t).child("users").child(_.currentUser.uid).child("records");a.child(e).once("value",(function(e){var t=e.toJSON();t.recordID="",t.status="",t.lastEditedBy={},t.created=(new Date).toISOString(),t.filename="",t.timeFirstPublished="",t.title.en&&(t.title.en="".concat(t.title.en," (Copy)")),t.title.fr&&(t.title.fr="".concat(t.title.fr," (Copte)")),t.identifier=Object(he.a)(),t.created=(new Date).toISOString(),a.push(t)}))}}},{key:"deleteRecord",value:function(e){var t=this.props.match.params.region;_.currentUser&&Y.database().ref(t).child("users").child(_.currentUser.uid).child("records").child(e).remove()}},{key:"toggleModal",value:function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.setState((a={modalKey:n},Object(E.a)(a,e,t),Object(E.a)(a,"modalRecord",r),a))}},{key:"render",value:function(){var e=this,t=this.props,a=t.match,n=t.history,l=a.params,i=l.language,o=l.region,s=this.state,c=s.deleteModalOpen,u=s.withdrawModalOpen,m=s.modalKey,d=s.modalRecord,p=s.submitModalOpen,f=s.records,E=s.loading;return r.a.createElement("div",null,r.a.createElement(Je,{open:c,onClose:function(){return e.toggleModal("deleteModalOpen",!1)},onAccept:function(){return e.deleteRecord(m)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"}),r.a.createElement(Je,{open:p,onClose:function(){return e.toggleModal("submitModalOpen",!1)},onAccept:function(){return e.submitRecord(m,d)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"}),r.a.createElement(Je,{open:u,onClose:function(){return e.toggleModal("withdrawModalOpen",!1)},onAccept:function(){return e.withdrawRecord(m)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"}),r.a.createElement(R.a,{variant:"h5"},r.a.createElement(K,null,"My Records"),r.a.createElement(Z,null,"Mes dossiers")),E?r.a.createElement(me.a,null):r.a.createElement("span",null,r.a.createElement("div",null,r.a.createElement(R.a,null,r.a.createElement(K,null,'To start a new record, click on "New Record" and begin adding information. To continue working on a record, select it from the list below. Once your record is completed and information has been provided for all mandatory fields, you can submit your record for review by clicking the "Submit for review" icon to the right of your record title. The record will not be published until it is reviewed and approved by CIOOS staff.'),r.a.createElement(Z,null,"Afin de soumettre un nouvel enregistrement, cliquez sur \xab Nouvel enregistrement \xbb et ajoutez-y les informations demand\xe9es. Si vous d\xe9sirez reprendre la soumission d\u2019un enregistrement entam\xe9, s\xe9lectionnez-le dans la liste ci-dessous. Lorsque les informations sont saisies pour tous les champs obligatoires, vous pouvez soumettre votre enregistrement pour validation en cliquant sur l\u2019ic\xf4ne \xab soumettre pour validation \xbb. L\u2019enregistrement sera publi\xe9 lorsqu\u2019il aura \xe9t\xe9 valid\xe9 et approuv\xe9 par un membre du SIOOC.")),r.a.createElement("div",{style:{marginTop:"10px"}},r.a.createElement(fe.a,{startIcon:r.a.createElement(be.a,null),onClick:function(){return n.push("/".concat(i,"/").concat(o,"/new"))}},r.a.createElement($,{en:"New Record",fr:"Nouvel enregistrement"}))),r.a.createElement(B.a,null,Object.entries(f||{}).sort((function(e,t){return new Date(t[1].created)-new Date(e[1].created)})).map((function(t){var a=Object(h.a)(t,2),n=a[0],l=ze(a[1]),o=l.status,s=l.title,c=l.created;if(!s||!s.en&&!s.fr)return null;var u="submitted"===o,m="published"===o,d=Math.round(100*Me(l)),p=100===d,f={en:"Submit for review",fr:"Soumettre pour examen"},E="Return record to draft for editing",g="Retourner l'enregistrement au brouillon pour modification";return p?"submitted"!==o&&"published"!==o||(f={en:"Record has been submitted",fr:"L'enregistrement a \xe9t\xe9 soumis"}):f={en:"Can't submit incomplete record",fr:"Impossible de soumettre un enregistrement incomplet"},r.a.createElement(z.a,{key:n,button:!0,onClick:function(){return e.editRecord(n)}},r.a.createElement(Ee.a,null,r.a.createElement(W.a,null,r.a.createElement(ve.a,null))),r.a.createElement(U.a,{primary:r.a.createElement("div",{style:{width:"60%"}},s[i]," ",r.a.createElement(ke,{status:o})),secondary:c&&r.a.createElement("span",null,r.a.createElement(Fe,{dateStr:c}),r.a.createElement(K,null,d,"% complete"),r.a.createElement(Z,null,d,"% Achev\xe9e"))}),r.a.createElement(ge.a,null,r.a.createElement(V.a,{title:r.a.createElement($,{en:"Clone",fr:"Clone"})},r.a.createElement("span",null,r.a.createElement(A.a,{onClick:function(){return e.cloneRecord(n)},edge:"end","aria-label":"clone"},r.a.createElement(ye.a,null)))),m?r.a.createElement(V.a,{title:r.a.createElement($,{en:"View",fr:"Vue"})},r.a.createElement("span",null,r.a.createElement(A.a,{onClick:function(){return e.editRecord(n)},edge:"end"},r.a.createElement(Ce.a,null)))):r.a.createElement(V.a,{title:r.a.createElement($,{en:"Edit",fr:"\xc9diter"})},r.a.createElement("span",null,r.a.createElement(A.a,{onClick:function(){return e.editRecord(n)},edge:"end"},r.a.createElement(xe.a,null)))),r.a.createElement(V.a,{title:r.a.createElement($,{en:"Delete",fr:"Supprimer"})},r.a.createElement("span",null,r.a.createElement(A.a,{onClick:function(){return e.toggleModal("deleteModalOpen",!0,n)},edge:"end","aria-label":"delete"},r.a.createElement(Oe.a,null)))),r.a.createElement(V.a,{title:r.a.createElement($,{en:f.en,fr:f.fr})},r.a.createElement("span",null,r.a.createElement(A.a,{disabled:u||m||!p,onClick:function(){return e.toggleModal("submitModalOpen",!0,n,l)},edge:"end","aria-label":"delete"},r.a.createElement(we.a,null)))),r.a.createElement(V.a,{title:r.a.createElement($,{en:E,fr:g})},r.a.createElement("span",null,r.a.createElement(A.a,{disabled:!o,onClick:function(){return e.toggleModal("withdrawModalOpen",!0,n)},edge:"end","aria-label":"delete"},r.a.createElement(je.a,null))))))})))),!f&&r.a.createElement(R.a,null,r.a.createElement(K,null,"You don't have any records."),r.a.createElement(Z,null,"Vous n'avez pas d'enregistrements."))))}}],[{key:"getRecordFilename",value:function(e){return"".concat(e.title[e.language].slice(0,30),"_").concat(e.identifier.slice(0,5)).trim().toLowerCase().replace(/[^a-zA-Z0-9]/g,"_")}}]),a}(r.a.Component),Qe=a(292);var _e=function(e){return function(e){return[e.orgName,e.indName].filter((function(e){return e})).map((function(e){return e.trim()})).filter((function(e){return e})).join(" - ")}(e.contact)||r.a.createElement($,{en:"new contact",fr:"Nouveau contact"})},Ke=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(e){var n;return Object(X.a)(this,a),(n=t.call(this,e)).state={contacts:{},modalOpen:!1,modalKey:"",loading:!1},n}return Object(ee.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0}),t=this.props.match,a=t.params.region,this.unsubscribe=_.onAuthStateChanged((function(e){e&&Y.database().ref(a).child("users").child(e.uid).child("contacts").on("value",(function(e){return n.setState({contacts:e.toJSON(),loading:!1})}))}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"deleteRecord",value:function(e){var t=this.props.match.params.region;_.currentUser&&Y.database().ref(t).child("users").child(_.currentUser.uid).child("contacts").child(e).remove()}},{key:"addItem",value:function(){var e=this.props,t=e.history,a=e.match.params,n=a.language,r=a.region;t.push("/".concat(n,"/").concat(r,"/contacts/new"))}},{key:"editRecord",value:function(e){var t=this.props,a=t.history,n=t.match.params,r=n.language,l=n.region;a.push("/".concat(r,"/").concat(l,"/contacts/").concat(e))}},{key:"toggleModal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.setState({modalKey:t,modalOpen:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.modalOpen,n=t.modalKey,l=t.loading,i=t.contacts;return r.a.createElement(ue.a,{container:!0,direction:"column",spacing:3},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(Je,{open:a,onClose:function(){return e.toggleModal(!1)},onAccept:function(){return e.deleteRecord(n)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"}),r.a.createElement(R.a,{variant:"h5"},r.a.createElement(K,null,"Contacts"),r.a.createElement(Z,null,"Contacts"))),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,null,r.a.createElement(K,null,"Create contacts here that you can reuse in multiple metadata records."),r.a.createElement(Z,null,"Cr\xe9ez ici des contacts que vous pouvez r\xe9utiliser dans plusieurs enregistrements de m\xe9tadonn\xe9es"))),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(fe.a,{startIcon:r.a.createElement(be.a,null),onClick:function(){return e.addItem()}},r.a.createElement(K,null,"Add contact"),r.a.createElement(Z,null,"ajouter un contact"))),l?r.a.createElement(me.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{item:!0,xs:!0},i&&Object.keys(i).length?r.a.createElement("div",null,r.a.createElement(R.a,null,r.a.createElement(K,null,"These are your contacts"),r.a.createElement(Z,null,"Ce sont vos contacts")),r.a.createElement(B.a,null,Object.entries(i).map((function(t){var a=Object(h.a)(t,2),n=a[0],l=a[1];return r.a.createElement(z.a,{key:n,button:!0,onClick:function(){return e.editRecord(n)}},r.a.createElement(Ee.a,null,r.a.createElement(W.a,null,r.a.createElement(Qe.a,null))),r.a.createElement(U.a,{primary:r.a.createElement(_e,{contact:l})}),r.a.createElement(ge.a,null,r.a.createElement(V.a,{title:r.a.createElement($,{en:"Edit",fr:"\xc9diter"})},r.a.createElement("span",null,r.a.createElement(A.a,{onClick:function(){return e.editRecord(n)}},r.a.createElement(xe.a,null)))),r.a.createElement(V.a,{title:r.a.createElement($,{en:"Delete",fr:"Supprimer"})},r.a.createElement("span",null,r.a.createElement(A.a,{onClick:function(){return e.toggleModal(!0,n)}},r.a.createElement(Oe.a,null))))))})))):r.a.createElement(R.a,null,r.a.createElement(K,null,"No contacts submitted yet"),r.a.createElement(Z,null,"Aucun contacts n'a encore \xe9t\xe9 soumis")))))}}]),a}(r.a.Component),Ze=function(){return r.a.createElement("div",null,r.a.createElement(R.a,null,r.a.createElement(K,null,"Please sign in to access your metadata records. You will need a Google account to login."),r.a.createElement(Z,null,"Connectez-vous pour acc\xe9der \xe0 vos enregistrements de m\xe9tadonn\xe9es. Vous aurez besoin d'un compte Google pour vous connecter.")))},$e=a(157),Xe=a(315),et=a(304),tt=a(305),at=a(316),nt=a(306),rt=a(6),lt=a(293),it=function(){return r.a.createElement("div",null,r.a.createElement(R.a,{variant:"h5"},"Not Found / Non trouv\xe9"))},ot=a(134);var st=function(e){return e.passes?r.a.createElement("span",{style:{color:"green",fontSize:"x-large",position:"relative",bottom:"-4px"}}," ","\u2713"," "):r.a.createElement(V.a,{title:r.a.createElement($,{en:"Required",fr:"Obligatoire"})},r.a.createElement("span",{style:{color:"red",fontSize:"large"}}," ","\u2735"," "))},ct=function(e){var t=e.children;return r.a.createElement(R.a,{variant:"body2",component:"div"},t)},ut=function(e){var t=e.children;return r.a.createElement(R.a,{variant:"body1",component:"div",style:{marginBottom:"10px"}},t)},mt={padding:"10px",margin:"20px",width:"90%"},dt=function(e){var t=e.disabled,a=e.record,n=Object(u.i)().region,l=G[n];return r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(ot.a,{style:mt},t&&r.a.createElement(R.a,null,r.a.createElement(K,null,r.a.createElement("b",null,"This form is locked because it has already been ",a.status,".")),r.a.createElement(Z,null,r.a.createElement("b",null,"Ce formulaire est verrouill\xe9 car il a d\xe9j\xe0 \xe9t\xe9"," ","submitted"===a.status?"soumis":"publi\xe9"," ."))),r.a.createElement(R.a,{variant:"body1"},r.a.createElement(K,null,"Welcome to the ",l.title.en," Metadata Entry Tool, the first step in making your data discoverable and accessible through CIOOS. This information will be used to create a metadata profile for your dataset that will allow it to be searchable through the"," ",l.catalogueTitle.en," Data Catalogue. Please fill out each field with as much detail as possible. The metadata profile will help describe this dataset for others to determine if it is relevant for their work and ensure it is interoperable with other databases and systems.",r.a.createElement("br",null),r.a.createElement("br",null)," Questions regarding the form can be directed to"," "),r.a.createElement(Z,null,"Bienvenue dans l\u2019outil de saisie de m\xe9tadonn\xe9es du"," ",l.title.fr,", la premi\xe8re \xe9tape pour rendre vos donn\xe9es accessibles et d\xe9couvrables via notre plateforme. Ces renseignements serviront \xe0 cr\xe9er un profil de m\xe9tadonn\xe9es pour votre jeu de donn\xe9es, facilitant ainsi sa d\xe9couverte dans le"," ",l.catalogueTitle.fr," et le rendant interop\xe9rable avec d\u2019autres syst\xe8mes de diffusion. Veuillez remplir les champs requis de la fa\xe7on la plus exhaustive possible.",r.a.createElement("br",null),r.a.createElement("br",null)," Les questions concernant le formulaire peuvent \xeatre adress\xe9es \xe0"," "),r.a.createElement("a",{href:"mailto:".concat(l.email)},l.email),"."),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(K,null,"You can save the form once you have filled out a title."),r.a.createElement(Z,null,"Vous pouvez enregistrer le formulaire une fois que vous avez rempli un titre.")),r.a.createElement("li",null,r.a.createElement(K,null,"All fields marked with a ",r.a.createElement(st,null)," are mandatory."),r.a.createElement(Z,null,"Tous les champs marqu\xe9s d'un ",r.a.createElement(st,null)," sont obligatoires.")),r.a.createElement("li",null,r.a.createElement(K,null,"The form can be saved and completed over time by clicking the"," ",r.a.createElement(lt.a,null),' icon in the bottom right corner. This icon will be greyed out until you have filled in the dataset title in the "Identification" section.'),r.a.createElement(Z,null,"Le formulaire peut \xeatre sauvegard\xe9 et compl\xe9t\xe9 au fil du temps en cliquant sur le bouton ",r.a.createElement(lt.a,null)," dans le coin inf\xe9rieur droit. Cette ic\xf4ne sera gris\xe9e jusqu'\xe0 ce que vous ayez renseign\xe9 le titre du jeu de donn\xe9es dans la Section \xab Identification des donn\xe9es \xbb.")),r.a.createElement("li",null,r.a.createElement(K,null,"Some fields can have text in both French and English, though this is only required for the title and the abstract. There is a 'Translate' button that will automatically generate text in the other language. This translation is more accurate when there is more text to translate."),r.a.createElement(Z,null,"Certains champs peuvent avoir du texte \xe0 la fois en fran\xe7ais et en anglais, bien que cette n'est requis que pour le titre et l'abr\xe9g\xe9. Il y a un Bouton \xab Traduire \xbb qui g\xe9n\xe9rera automatiquement du texte dans l'autre langue. Cette traduction est plus pr\xe9cise quand il y a plus de texte \xe0 traduire.")))))},pt=a(50),ht=a(321),ft=a(295),Et=a(297),gt=a(327),bt=a(296),vt=a(294),yt=a(319),Ct=function(e){var t=e.onChange,a=e.value,n=void 0===a?[]:a,l=e.name,i=e.options,o=e.optionLabels,s=e.optionTooltips,c=void 0===s?[]:s,u=e.disabled;return r.a.createElement(ue.a,{container:!0,direction:"row"},i.map((function(e,a){return r.a.createElement(ue.a,{item:!0,xs:3,key:e},r.a.createElement(V.a,{title:c[a]||""},r.a.createElement(vt.a,{disabled:u,control:r.a.createElement(yt.a,{value:e||[],name:l,checked:n.includes(e),onChange:function(e){var a,r,i=e.target.value,o=(a=i,(r=n).includes(a)?r.filter((function(e){return e!==a})):r.concat(a));t({target:{name:l,value:o}})}}),label:o[a]})))})))},xt=["dissolvedOrganicCarbon","inorganicCarbon","nitrate","nutrients","oxygen","phosphate","potentialDensity","potentialTemperature","pressure","seaIce","seaState","seaSurfaceHeight","seaSurfaceSalinity","seaSurfaceTemperature","seawaterDensity","silicate","speedOfSound","subSurfaceCurrents","subSurfaceSalinity","subSurfaceTemperature","surfaceCurrents","other"],Ot={custodian:{title:{en:"Metadata Contact",fr:"Personne-contact pour les m\xe9tadonn\xe9es"},text:{en:"Party that accepts accountability and responsibility for the resource and ensures appropriate care and maintenance of the resource ",fr:"Partie qui accepte la reddition de comptes et la responsabilit\xe9 de la ressource et assure le soin et l'entretien appropri\xe9s de la ressource "}},owner:{title:{en:"Data Contact",fr:"Personne-contact pour les donn\xe9es"},text:{en:"Party that owns the resource",fr:"Partie propri\xe9taire de la ressource"}},distributor:{title:{en:"Distributor",fr:"Distributeur"},text:{en:"Party who distributes the resource",fr:"Partie qui distribue la ressource"}},author:{title:{en:"Author",fr:"Auteur"},text:{en:"Party who authored the resource"}},coAuthor:{title:{en:"Coauthor",fr:"Co-auteur"},text:{en:"Parti qui est l'auteur de la ressource"}},collaborator:{title:{en:"Collaborator",fr:"Collaborateur"},text:{en:"Party who assists with the generation of the resource other than the principal investigator",fr:"Partie qui aide \xe0 la production de la ressource autre que le chercheur principal"}},contributor:{title:{en:"Contributor",fr:"Contributeur"},text:{en:"Party contributing to the resource",fr:"Partie contribuant \xe0 la ressource"}},editor:{title:{en:"Editor",fr:"\xc9diteur"},text:{en:"Party who reviewed or modified the resource to improve the content",fr:"Partie qui a examin\xe9 ou modifi\xe9 la ressource pour am\xe9liorer le contenu"}},funder:{title:{en:"Funder",fr:"Fondateur"},text:{en:"Party providing monetary support for the resource",fr:"Partie fournissant un soutien mon\xe9taire pour la ressource"}},mediator:{title:{en:"Mediator",fr:"M\xe9diateur"},text:{en:"A class of entity that mediates access to the resource and for whom the resource is intended or useful ",fr:"Classe d'entit\xe9 qui sert de m\xe9diateur \xe0 l'acc\xe8s \xe0 la ressource et pour laquelle la ressource est destin\xe9e ou utile"}},originator:{title:{en:"Originator",fr:"Initiateur"},text:{en:"Party who created the resource",fr:"Partie qui a cr\xe9\xe9 la ressource"}},pointOfContact:{title:{en:"Point Of Contact",fr:"Point de contact"},text:{en:"Party who can be contacted for acquiring knowledge about or acquisition of the resource",fr:"Partie qui peut \xeatre contact\xe9e pour acqu\xe9rir des connaissances sur la ressource ou l'acquisition de la ressource"}},principalInvestigator:{title:{en:"Principal Investigator",fr:"Responsable de recherche"},text:{en:"Key party responsible for gathering information and conducting research",fr:"Partie cl\xe9 responsable de la collecte de l'information et de la r\xe9alisation de la recherche"}},processor:{title:{en:"Processor",fr:"Transformateur"},text:{en:"Party who has processed the data in a manner such that the resource has been modified",fr:"Partie qui a trait\xe9 les donn\xe9es d'une mani\xe8re telle que la ressource a \xe9t\xe9 modifi\xe9e"}},publisher:{title:{en:"Publisher",fr:"Editeur"},text:{en:"Party who published the resource",fr:"Partie qui a publi\xe9 la ressource"}},resourceProvider:{title:{en:"Resource Provider",fr:"Fournisseur de ressources"},text:{en:"Party that supplies the resource",fr:"Partie qui fournit la ressource "}},rightsHolder:{title:{en:"Rights Holder",fr:"Ayant droit"},text:{en:"Party owning or managing rights over the resource ",fr:"Partie d\xe9tenant ou g\xe9rant des droits sur la ressource"}},sponsor:{title:{en:"Sponsor",fr:"Commanditaire"},text:{en:"Party who speaks for the resource ",fr:"Parti qui parle pour la ressource"}},stakeholder:{title:{en:"Stakeholder",fr:"Actionnaire"},text:{en:"Party who has an interest in the resource or the use of the resource ",fr:"Partie qui a un int\xe9r\xeat dans la ressource ou l'utilisation de la ressource"}},user:{title:{en:"User",fr:"Utilisateur"},text:{en:"Party who uses the resource",fr:"Partie qui utilise la ressource"}}},wt={onGoing:{title:{en:"Ongoing",fr:"En cours"},text:{en:"Data is continually being updated. e.g satellite dataset that continues to be augmented",fr:"Les donn\xe9es sont continuellement mises \xe0 jour, par exemple un ensemble de donn\xe9es satellite qui continue d'\xeatre augment\xe9"}},historicalArchive:{title:{en:"Historical Archive",fr:"Archives historiques"},text:{en:"Data has been stored in an offline storage facility. use to indicate data are archived",fr:"Les donn\xe9es ont \xe9t\xe9 stock\xe9es dans une installation de stockage hors connexion. Utilisez pour indiquer que les donn\xe9es sont archiv\xe9es"}},completed:{title:{en:"Completed",fr:"Termin\xe9"},text:{en:"Production of the data has been completed \te.g. raw data that is not ongoing, completed model",fr:"La production des donn\xe9es a \xe9t\xe9 termin\xe9e, p. ex. donn\xe9es brutes qui ne sont pas en cours, mod\xe8le termin\xe9"}}},jt=["depthPositive","heightPositive"],St=function(e){var t=e.onChange,a=e.value,n=e.showRolePicker,l=e.disabled,i=Object(u.i)().language,o=Object.keys(Ot),s=Object.values(Ot).map((function(e){return e.title[i]})),c=r.a.useState(!1),m=Object(h.a)(c,2),d=m[0],p=m[1],f=(a.role||[]).filter((function(e){return o.indexOf(e)>2})).length>0;return r.a.createElement(ue.a,{container:!0,direction:"column",spacing:2},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,{variant:"h6"},r.a.createElement(_e,{contact:a}))),r.a.createElement(ue.a,{item:!0,xs:!0},n&&r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(ut,null,r.a.createElement(K,null,"What is the role of this contact? ",f),r.a.createElement(Z,null,"Quel est leur r\xf4le?"),r.a.createElement(ct,null,r.a.createElement(K,null,"At least one Metadata Contact and one Data Contact are required. Multiple roles can be selected for each contact. Expand the list below for additional role."),r.a.createElement(Z,null,"Au moins une personne-contact pour les m\xe9tadonn\xe9es et une personne-contact pour les donn\xe9es sont requises. Plusieurs r\xf4les peuvent \xeatre s\xe9lectionn\xe9s pour chaque contact. Si vous avez besoin de r\xf4les plus sp\xe9cifiques, vous pouvez \xe9tendre la liste."))),r.a.createElement(Ct,{name:"role",value:a.role||[],onChange:t,options:o.slice(0,3),optionLabels:s.slice(0,3),disabled:l,optionTooltips:Object.values(Ot).map((function(e){return e.text[i]})).slice(0,3)}),r.a.createElement(ht.a,{onChange:function(){return p(!d)},expanded:d||f},r.a.createElement(ft.a,{expandIcon:r.a.createElement(V.a,{title:"Show/Hide more options"},r.a.createElement(bt.a,null)),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement("span",null,r.a.createElement(K,null,"Show/Hide more role options"),r.a.createElement(Z,null,"Afficher/masquer les r\xf4les"))),r.a.createElement(Et.a,null,r.a.createElement(Ct,{name:"role",value:a.role||[],onChange:t,options:o.slice(3),optionLabels:s.slice(3),disabled:l,optionTooltips:Object.values(Ot).map((function(e){return e.text[i]})).slice(3)})))),r.a.createElement(ue.a,{container:!0,direction:"column",spacing:1,style:{marginTop:"10px"}},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(ut,null,r.a.createElement(K,null,"Provide any information about the organization"),r.a.createElement(Z,null,"Identification de l'organisation"))),r.a.createElement(ue.a,{item:!0,xs:!0,style:{marginleft:"10px"}},r.a.createElement(gt.a,{label:r.a.createElement($,{en:"Organization name",fr:"Nom de l'organisation"}),name:"orgName",value:a.orgName,onChange:t,onBlur:t,disabled:l,fullWidth:!0})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(gt.a,{label:r.a.createElement($,{en:"URL",fr:"URL"}),name:"orgURL",value:a.orgURL,onChange:t,disabled:l,fullWidth:!0})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(gt.a,{label:r.a.createElement($,{en:"Address",fr:"Adresse"}),name:"orgAdress",value:a.orgAdress,onChange:t,disabled:l,fullWidth:!0})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(gt.a,{label:r.a.createElement($,{en:"City",fr:"Ville"}),name:"orgCity",value:a.orgCity,onChange:t,disabled:l,fullWidth:!0})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(gt.a,{label:r.a.createElement($,{en:"Country",fr:"Pays"}),name:"orgCountry",value:a.orgCountry,onChange:t,disabled:l,fullWidth:!0})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(gt.a,{label:r.a.createElement($,{en:"Email",fr:"Courriel"}),name:"orgEmail",value:a.orgEmail,onChange:t,fullWidth:!0,disabled:l})," "))),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,null,r.a.createElement(K,null,"Provide any information about the individual"),r.a.createElement(Z,null,"Identification de l'individu")),r.a.createElement(ue.a,{container:!0,direction:"column",spacing:1,style:{marginTop:"10px"}},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(gt.a,{label:r.a.createElement($,{en:"Individual Name",fr:"Nom de l'individu"}),name:"indName",value:a.indName,onChange:t,disabled:l,fullWidth:!0})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(gt.a,{label:r.a.createElement($,{en:"Position",fr:"Position"}),name:"indPosition",value:a.indPosition,onChange:t,disabled:l,fullWidth:!0})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(gt.a,{label:r.a.createElement($,{en:"Email",fr:"Courriel"}),name:"indEmail",value:a.indEmail,onChange:t,disabled:l,fullWidth:!0})))))},kt=a(298),It=a(328),qt=Object(b.a)((function(){return{formControl:{minWidth:200},selectEmpty:{}}})),Pt=function(e){var t=e.value,a=void 0===t?"":t,n=e.name,l=e.options,i=e.optionLabels,o=e.optionTooltips,s=void 0===o?[]:o,c=e.onChange,u=e.disabled,m=e.label,d=e.fullWidth,p=void 0===d||d,h=qt();return r.a.createElement(kt.a,{fullWidth:p,className:h.formControl,disabled:u},r.a.createElement(M.a,{className:h.selectEmpty,name:n,fullWidth:p,value:a,disabled:u,displayEmpty:!0,onChange:c},r.a.createElement(L.a,{value:""},r.a.createElement(It.a,{id:"demo-simple-select-label"},r.a.createElement(R.a,null,m||r.a.createElement($,{en:"Choose",fr:"Choisir"})))),l.map((function(e,t){return r.a.createElement(L.a,{key:e,value:e},r.a.createElement(V.a,{enterDelay:1,title:s[t]?s[t]:""},r.a.createElement("div",{style:{width:"100%"}},i[t])))}))))},Dt=function(e){var t=e.disabled,a=e.record,l=e.handleInputChange,i=e.userContacts,o="contacts",s=a.contacts||[],c={role:[],orgName:"",orgEmail:"",orgURL:"",orgAdress:"",orgCity:"",orgCountry:"",indName:"",indPosition:"",indEmail:""},u=Object(n.useState)(0),m=Object(h.a)(u,2),d=m[0],p=m[1],f=Object.values(i||{});var E=s[d];return r.a.createElement(ue.a,{container:!0,spacing:3},r.a.createElement(ot.a,{style:mt},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(ut,null,r.a.createElement(K,null,"Please enter at least one Metadata Contact AND one Data Contact for this dataset that can work with CIOOS Staff to finalize this Metadata Record. It is important to include all individuals from the chain of attribution to ensure all involved parties are credited appropriately for their role in creating this dataset Saved contacts can be selected from the list below"),r.a.createElement(Z,null,"Veuillez saisir au moins un contact pour les m\xe9tadonn\xe9es ET un contact de donn\xe9es pour ce jeu de donn\xe9es. Ces personnes pourraient \xeatre appel\xe9es \xe0 collaborer avec le personnel de la DSIO pour finaliser cet enregistrement. Il est important d'inclure toutes les personnes ayant travaill\xe9 sur le jeu de donn\xe9es afin de s'assurer que toutes les parties concern\xe9es soient cr\xe9dit\xe9es de fa\xe7on appropri\xe9e pour leur r\xf4le dans la cr\xe9ation de ce jeu de donn\xe9es. Les contacts sauvegard\xe9s peuvent \xeatre s\xe9lectionn\xe9s dans la liste ci-dessous."),r.a.createElement(st,{passes:Re(a,"contacts")}),r.a.createElement(ct,null,r.a.createElement(K,null,"If you have any saved contacts you can select them from the list."),r.a.createElement(Z,null,"Si vous avez des contacts enregistr\xe9s, vous pouvez les s\xe9lectionner dans la liste."))))),r.a.createElement(ue.a,{container:!0,direction:"row",style:{marginLeft:"5px"}},r.a.createElement(ue.a,{item:!0,xs:3},r.a.createElement(ue.a,{container:!0,direction:"column",spacing:2},r.a.createElement(ue.a,{item:!0,xs:!0},"Contact(s):",r.a.createElement(B.a,null,s.map((function(e,t){return r.a.createElement(z.a,{key:t,button:!0,onClick:function(){return p(t)}},r.a.createElement(U.a,{primary:r.a.createElement(R.a,{style:{fontWeight:d===t?"bold":""}},t+1,". ",r.a.createElement(_e,{contact:e}))}))})))),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(fe.a,{disabled:t,startIcon:r.a.createElement(be.a,null),onClick:function(){var e={target:{name:o,value:s.concat(Te(c))}};l(e),p(s.length)},style:{height:"56px",marginLeft:"10px"}},r.a.createElement(K,null,"Add new contact"),r.a.createElement(Z,null,"Ajouter un contact"))),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(Pt,{style:{},value:"",labelId:"add-existing",onChange:function(e){return t=e.target.value,l({target:{name:"contacts",value:s.concat(f[t])}}),void p(s.length);var t},optionLabels:f.map((function(e){return r.a.createElement(_e,{contact:e})})),options:f.map((function(e,t){return t})),disabled:!f.length||t,label:r.a.createElement($,{en:"Add saved contact",fr:"Ajouter un contact"})})))),E&&r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(ue.a,{container:!0,direction:"column"},r.a.createElement(ot.a,{style:mt},r.a.createElement(ue.a,{container:!0,direction:"column",spacing:3},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(St,{showRolePicker:!0,value:E,onChange:function(e){var t=Object(pt.a)(s),a=e.target.name;t[d][a]=e.target.value,l({target:{name:o,value:t}})},disabled:t})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(ue.a,{container:!0,direction:"row",spacing:3},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(fe.a,{startIcon:r.a.createElement(Oe.a,null),disabled:t,onClick:function(){l({target:{name:o,value:s.filter((function(e,t){return t!==d}))}}),s.length&&p(s.length-2)}},r.a.createElement(K,null,"Remove contact"),r.a.createElement(Z,null,"Supprimer le contact")))))))))))},At=a(299),Rt=a(148),Mt=a.n(Rt),Lt=a(149),Tt=a.n(Lt),zt=function(e){var t=e.onChange,a=e.value,l=e.name,i=e.multiline,o=e.disabled,s=e.error,c=e.translationButonDisabled,m=void 0!==c&&c,d=Object(n.useContext)(le).translate,p=Object(n.useState)(!1),g=Object(h.a)(p,2),b=g[0],v=g[1];function y(e){var n=Object(f.a)(Object(f.a)({},a),{},Object(E.a)({},e.target.name,e.target.value));t({target:{name:l,value:n}})}var C,x=Object(u.i)().language;return C="en"===x?["en","fr"]:["fr","en"],r.a.createElement("div",null,C.map((function(e,t){return r.a.createElement("div",{key:e},r.a.createElement(gt.a,{name:e,fullWidth:!0,value:a&&a[e],onChange:function(e){return y(e)},InputProps:{startAdornment:r.a.createElement(At.a,{position:"start"},e.toUpperCase())},multiline:i,disabled:o,error:s}),0===t&&!m&&r.a.createElement(fe.a,{style:{margin:"10px"},startIcon:b?r.a.createElement(me.a,{size:20}):r.a.createElement(Mt.a,null),endIcon:b?null:r.a.createElement(Tt.a,null),disabled:o||b||!(a&&a[e]),onClick:function(){var t=C[1];v(!0),d({text:a[e],fromLang:e}).then((function(e){v(!1);var a=e.data;y({target:{name:t,value:a}})}))}},r.a.createElement(K,null,"Translate"),r.a.createElement(Z,null,"Traduire")))})))},Nt=function(e){var t=e.onChange,a=e.value,n=e.name,l=e.disabled,i={url:"",name:"",description:{en:"",fr:""}};function o(e,r){var l=Object(pt.a)(a),i=e.target.name;l[r][i]=e.target.value,t({target:{name:n,value:l}})}function s(e){t({target:{name:n,value:a.filter((function(t,a){return a!==e}))}})}var c=r.a.createElement($,{en:"Name",fr:"Titre"}),u=r.a.createElement($,{en:"Description",fr:"Description"});return r.a.createElement("div",null,a.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te(i),t=arguments.length>1?arguments[1]:void 0,a=function(e){return o(e,t)};return r.a.createElement(ot.a,{key:t,style:mt},r.a.createElement(ue.a,{container:!0,direction:"column",spacing:3},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(ut,null,r.a.createElement(K,null,"Enter a name for the resource"),r.a.createElement(Z,null,"Entrez un titre pour la ressource"),r.a.createElement(st,{passes:e.name})),r.a.createElement(gt.a,{label:c,name:"name",value:e.name,onChange:a,fullWidth:!0,disabled:l})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(ut,null,r.a.createElement(K,null,"Enter the URL for the resource"),r.a.createElement(Z,null,"Entrez l'URL de la ressource"),r.a.createElement(st,{passes:e.url})),r.a.createElement(gt.a,{label:"URL",name:"url",value:e.url,onChange:a,fullWidth:!0,disabled:l})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(ut,null,r.a.createElement(K,null,"Enter a description of the resource"),r.a.createElement(Z,null,"Entrez une description de la ressource"))," ",r.a.createElement(zt,{name:"description",label:u,value:e.description,onChange:a,disabled:l})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(fe.a,{startIcon:r.a.createElement(Oe.a,null),disabled:l,onClick:function(){return s(t)}},r.a.createElement(K,null,"Remove item"),r.a.createElement(Z,null,"Supprimer la ressource")))))})),r.a.createElement(ot.a,{style:mt},r.a.createElement(fe.a,{startIcon:r.a.createElement(be.a,null),disabled:l,onClick:function(){t({target:{name:n,value:a.concat(Te(i))}})}},r.a.createElement(K,null,"Add item"),r.a.createElement(Z,null,"Ajouter une ressource"))))},Wt=function(e){var t=e.disabled,a=e.record,n=e.handleInputChange;return r.a.createElement("div",null,r.a.createElement(ot.a,{style:mt},r.a.createElement(ut,null,r.a.createElement(K,null,"Enter any links to information associated with this dataset."),r.a.createElement(Z,null,"Entrez les liens vers les informations associ\xe9es \xe0 ce jeu de donn\xe9es."),r.a.createElement(st,{passes:Re(a,"distribution")}),r.a.createElement(ct,null,r.a.createElement(K,null,"Some examples of resources are:",r.a.createElement("ul",null,r.a.createElement("li",null,"supporting documentation (eg text or pdf files)"),r.a.createElement("li",null,"CSV files"),r.a.createElement("li",null,"ERDDAP datasets"),r.a.createElement("li",null,"images")),"At least one item is required."),r.a.createElement(Z,null,"Voici quelques exemples de ressources :",r.a.createElement("ul",null,r.a.createElement("li",null,"Documentation \xe0 l'appui (par exemple, fichiers texte ou pdf)"),r.a.createElement("li",null,"Fichiers CSV"),r.a.createElement("li",null,"Jeux de donn\xe9es ERDDAP"),r.a.createElement("li",null,"Images")),"Au moins une ressource est requise.")))),r.a.createElement(Nt,{name:"distribution",paperClass:mt,value:a.distribution||[],onChange:n,disabled:t}))},Ut=a(38),Ft=a(314),Bt=a(154);function Vt(e){try{var t=e.getDate(),a=e.getMonth(),n=e.getFullYear();return new Date(n,a,t,12,0,0,0)}catch(r){return null}}var Gt=function(e){var t=e.onChange,a=e.value,n=e.name,l=e.disabled;return r.a.createElement(Ut.a,{utils:Bt.a},r.a.createElement(Ft.a,{disabled:l,margin:"normal",id:"date-picker-dialog",label:r.a.createElement($,{en:"Select date",fr:"S\xe9lectionner une date"}),format:"yyyy-MM-dd",value:a,onChange:function(e){return t({target:{name:n,value:Vt(e)}})},KeyboardButtonProps:{"aria-label":"change date"}}))},Ht=a(320),Jt=a(300),Yt=["abundance and biomass","sea access","decision making","protected areas","maritime resources","knowledge improvement","land-use planning","water purification","striped bass","watershed","habitat characterization","coastal characterization","climate change","chlorophyll a","resource conservation","water consumption","sea currents","crustacean","fresh water flow","water density","sustainable development","ocean-atmosphere exchange","sampling","crayfish","mariculture","coastal erosion","endangered species","invasive species","coastal flora","fluorescence","spawning","community management","resource management","integrated management","sea ice","sensitive habitat","important habitat","hydrocarbon","incidents","general information","wildlife inventory","fish inventory","macroalgae","benthic macrofauna","marine mammal","marsh","meteorology","wetlands","natural environments of interest","enhancement","oceanographic missions","mollusc","sea level","seabirds","migrator birds","commercial fisheries","experimental fisheries","physical-chemical","phytoplankton","sea grass","fish","coastal pollution","atmospheric pressure","coast protection","habitat protection","water quality","radiation","maritime resources","ecological rehabilitation","shore restoration","experimental restoration","habitat restoration","coastal risks","citizen data","salinity","sediment","fishing sites","annual follow-up","species tracking","habitat tracking","taxonomy","remote sensing","water temperature","sea turtles","land-use","sustainabilty","waves","wind","coastal zone"],Qt={oxygen:"Oxyg\xe8ne",nutrients:"Nutriments",nitrate:"Nitrate",phosphate:"Phosphate",silicate:"Silicate",inorganicCarbon:"Carbone inoganique",dissolvedOrganicCarbon:"carbone inorganique dissous",seaSurfaceHeight:"Hauteur de la surface de la mer",seawaterDensity:"Densit\xe9 d'eau de mer",potentialTemperature:"Temp\xe9rature potentielle",potentialDensity:"Densit\xe9 potentielle",speedOfSound:"Vitesse du son",seaIce:"Glace de mer",seaState:"\xc9tat de la mer",seaSurfaceSalinity:"Salinit\xe9 de surface",seaSurfaceTemperature:"Temp\xe9rature de surface",subSurfaceCurrents:"Courants sous-marins",subSurfaceSalinity:"Salinit\xe9 sous la surface",subSurfaceTemperature:"Temp\xe9rature sous la surface",surfaceCurrents:"Courants de surface",pressure:"Pression",other:"Autre",resourceProvider:"Fournisseur de donn\xe9es",custodian:"D\xe9positaire",owner:"Propri\xe9taire",user:"Utilisateur",distributor:"Distributeur",originator:"Initiateur",pointOfContact:"Point de contact",principalInvestigator:"Responsable de recherche",processor:"Transformateur",publisher:"Editeur",author:"Auteur",sponsor:"Sponsor",coAuthor:"Co-auteur",collaborator:"Collaborateur",editor:"\xc9diteur",mediator:"M\xe9diateur",rightsHolder:"Ayant droit",contributor:"Contributeur",funder:"Fondateur",stakeholder:"Actionnaire",deprecated:"Obsol\xe8te",proposed:"Propos\xe9",withdrawn:"Retir\xe9",notAccepted:"Non accept\xe9",accepted:"Accept\xe9",valid:"Valide",tentative:"Tentative",superseded:"Remplac\xe9",retired:"retir\xe9",pending:"En attente",final:"final",underDevelopment:"En d\xe9veloppement",required:"Requis",planned:"Planifi\xe9",onGoing:"En cours",obsolete:"Obsol\xe8te",historicalArchive:"Archive historique",completed:"Termin\xe9",farming:"Agriculture",biota:"Biote",boundaries:"D\xe9limitations",climatologyMeteorologyAtmosphere:"Climatologie / M\xe9t\xe9orology / Atmosph\xe8re",economy:"\xc9conomie",elevation:"\xc9l\xe9vation",environment:"Environement",geoscientificInformation:"Information G\xe9oscientifique",health:"Sant\xe9",imageryBaseMapsEarthCover:"Imagerie Couverture terrestre",intelligenceMilitary:"Renseignements / Militaire",inlandWaters:"Eaux int\xe9rieures",location:"Emplacement",oceans:"Oc\xe9ans",planningCadastre:"Am\xe9nagement du territoire",society:"Soci\xe9t\xe9",structure:"Structure",transportation:"Transports",utilitiesCommunication:"Services / Communication",extraTerrestrial:"Extra terrestre",disaster:"D\xe9sastre","abundance and biomass":"abondance et biomasse","sea access":"acc\xe8s \xe0 la mer","decision making":"aide \xe0 la d\xe9cision","protected areas":"aires prot\xe9g\xe9es","knowledge improvement":"am\xe9lioration des connaissances","land-use planning":"am\xe9nagement du territoire","water purification":"assainissement des eaux","striped bass":"bar ray\xe9",watershed:"bassin versant","habitat characterization":"caract\xe9risation des habitats","coastal characterization":"caract\xe9risation des rives","climate change":"changement climatique","chlorophyll a":"chlorophylle a","resource conservation":"conservation des ressources","water consumption":"consommation d'eau","sea currents":"courant marin",crustacean:"crustac\xe9","fresh water flow":"d\xe9bits eau douce","water density":"densit\xe9 eau","sustainable development":"d\xe9veloppement durable","ocean-atmosphere exchange":"\xe9change oc\xe9an-atmosph\xe8re",sampling:"\xe9chantillonnage",crayfish:"\xe9crevisses",mariculture:"entreprises de maricultures","coastal erosion":"\xe9rosion des c\xf4tes","endangered species":"esp\xe8ces en p\xe9ril","invasive species":"esp\xe8ces envahissante","coastal flora":"flore c\xf4ti\xe8re",fluorescence:"fluorescence",spawning:"fraie","community management":"gestion communautaire","resource management":"gestion des ressources","integrated management":"gestion int\xe9gr\xe9e","sea ice":"glace de mer","sensitive habitat":"habitat sensible","important habitat":"habitats important",hydrocarbon:"hydrocarbure",incidents:"incidents","general information":"informations g\xe9n\xe9rales","wildlife inventory":"inventaire faunique","fish inventory":"inventaire poisson",macroalgae:"macroalgue","benthic macrofauna":"macrofaune benthique","marine mammal":"mammif\xe8res marins",marsh:"marais",meteorology:"m\xe9t\xe9orologie",wetlands:"milieux humides","natural environments of interest":"milieux naturels d'int\xe9r\xeat",enhancement:"mise en valeur","oceanographic missions":"missions oc\xe9anographique",mollusc:"mollusque","sea level":"niveau eau",seabirds:"oiseaux marins","migrator birds":"oiseaux migrateurs","commercial fisheries":"p\xeaches commerciales","experimental fisheries":"p\xeaches exp\xe9rimentales","physical-chemical":"physico-chimie",phytoplankton:"phytoplancton","sea grass":"plantes aquatique",fish:"poisson","coastal pollution":"pollution c\xf4ti\xe8re","atmospheric pressure":"pression atmosph\xe9rique","coast protection":"protection des c\xf4tes","habitat protection":"protection des habitats","water quality":"qualit\xe9 eau",radiation:"radiation","maritime resources":"ressources maritimes","ecological rehabilitation":"r\xe9habilitation \xe9cologique","shore restoration":"restauration des rives","experimental restoration":"restauration exp\xe9rimentale","habitat restoration":"restauration habitat","coastal risks":"risques c\xf4tiers","citizen data":"saisie citoyenne",salinity:"salinit\xe9",sediment:"s\xe9diment","fishing sites":"sites de p\xeaches","annual follow-up":"suivi annuel","species tracking":"suivi des esp\xe8ces","habitat tracking":"suivi habitat",taxonomy:"taxonomie","remote sensing":"t\xe9l\xe9d\xe9tection","water temperature":"temp\xe9rature de l'eau","sea turtles":"tortue de mer","land-use":"utilisation du territoire",sustainabilty:"utilisation durable",waves:"vagues",wind:"vents","coastal zone":"zone c\xf4ti\xe8re",depthPositive:"Profondeur positive",heightPositive:"Hauteur positive","data identification":"Identification des donn\xe9es",resources:"Ressources",spatial:"Spatial",platform:"Platforme","platform - instruments":"Platforme - instruments",contacts:"Contacts"},_t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return"en"===t?e:Qt[e]||null},Kt=function(e){var t=e.onChange,a=e.value,l=void 0===a?{en:[],fr:[]}:a,i=e.name,o=e.disabled,s=Object(u.i)().language,c=Object(n.useState)(""),m=Object(h.a)(c,2),d=m[0],p=m[1],f=Object(n.useState)(""),g=Object(h.a)(f,2),b=g[0],v=g[1],y=Object(n.useState)(""),C=Object(h.a)(y,2),x=C[0],O=C[1],w=["en","fr"];"fr"===s&&w.reverse();var j=w[1];function S(e){return e.map((function(e){return(e||"").trim()})).filter((function(e,t,a){return e&&a.indexOf(e)===t}))}return r.a.createElement(ue.a,{container:!0,spacing:3,direction:"column"},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(Ht.a,{inputValue:b,onInputChange:function(e,t){v(t)},disabled:o,onChange:function(e,t){return O(_t(t,j))},value:d||"",freeSolo:!0,renderOption:function(e){return _t(e,s)||e},options:Yt,getOptionLabel:function(e){return _t(e,s)||e},fullWidth:!0,renderInput:function(e){return r.a.createElement(gt.a,Object.assign({},e,{label:s.toUpperCase()}))}})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(gt.a,{value:x||"",onChange:function(e){return O(e.target.value)},fullWidth:!0,InputProps:{startAdornment:r.a.createElement(At.a,{position:"start"},j.toUpperCase())}})),r.a.createElement(ue.a,{item:!0,xs:3},r.a.createElement(fe.a,{disabled:o||!d&&!x&&!b,startIcon:r.a.createElement(Jt.a,null),onClick:function(){var e=d||b;if(e||x){var a={en:l.en,fr:l.fr},n=[].concat(Object(pt.a)(l[s]),[e]),r=[].concat(Object(pt.a)(l[j]),[x]);e&&(a[s]=S(n)),x&&(a[j]=S(r)),t({target:{name:i,value:a}})}p(""),O(""),v("")}},r.a.createElement(K,null,"Add"),r.a.createElement(Z,null,"Ajouter"))),r.a.createElement(ue.a,{item:!0,xs:!0},w.filter((function(e){return l[e]&&l[e].length})).map((function(e){return r.a.createElement("div",{style:{margin:"15px"},key:e},r.a.createElement(At.a,{style:{margin:"10px"}},e.toUpperCase()),r.a.createElement(ue.a,{container:!0,direction:"row"},r.a.createElement(ue.a,{item:!0,xs:!0},(l[e]||[]).map((function(a){return r.a.createElement(Se.a,{key:a,disabled:o,label:a,onDelete:(n=a,s=e,function(){var e=Object(E.a)({en:l.en,fr:l.fr},s,l[s].filter((function(e){return e!==n})));t({target:{name:i,value:e}})}),color:"primary",style:{margin:"5px"}});var n,s})))))}))))},Zt={"CC-BY-4.0":"Creative Commons Attribution 4.0",CC0:"Creative Commons 0","government-open-license-canada":"Open Government Licence - Canada","government-open-license-nova-scotia":"Open Government Licence - Nova Scotia","government-open-license-newfoundland":"Open Government Licence - Newfoundland and Labrador","Apache-2.0":"Apache License, Version 2.0"},$t=function(e){var t=e.disabled,a=e.record,n=e.handleInputChange,l=Object(u.i)(),i=l.language,o=l.region,s=G[o],c=function(e){return r.a.createElement("a",{href:s.catalogueURL[e],target:"_blank",rel:"noopener noreferrer"},s.catalogueURL[e])};return r.a.createElement("div",null,r.a.createElement(ot.a,{style:mt},r.a.createElement(ut,null,r.a.createElement(K,null,"What is the dataset title? Required in English and French."),r.a.createElement(Z,null,"Quel est le titre du jeu de donn\xe9es? Obligatoire dans les deux langues."),r.a.createElement(st,{passes:Re(a,"title")}),r.a.createElement(ct,null,r.a.createElement(K,null,"Please refrain from using special characters in the dataset title. This will appear as the title that is shown for this dataset in the ",s.catalogueTitle.en,"."),r.a.createElement(Z,null,"Veuillez ne pas utiliser de caract\xe8res sp\xe9ciaux dans le titre du jeu de donn\xe9es. Cela appara\xeetra sous la forme du titre affich\xe9 pour ce jeu de donn\xe9es dans le ",s.catalogueTitle.fr,"."))),r.a.createElement(zt,{name:"title",value:a.title,onChange:n,disabled:t})),r.a.createElement(ot.a,{style:mt},r.a.createElement(ut,null,r.a.createElement(K,null,"What is the primary language of the dataset?"),r.a.createElement(Z,null,"Quelle est la langue principale du jeu de donn\xe9es?"),r.a.createElement(st,{passes:Re(a,"language")})),r.a.createElement(Pt,{name:"language",value:a.language,onChange:function(e){return n(e)},options:["en","fr"],optionLabels:["English","Fran\xe7ais"],disabled:t})),r.a.createElement(ot.a,{style:mt},r.a.createElement(ut,null,r.a.createElement(K,null,"Enter an abstract or summary for the dataset. Required in both languages."),r.a.createElement(Z,null,"Entrez un description pour le jeu de donn\xe9es."),r.a.createElement(st,{passes:Re(a,"abstract")}),r.a.createElement(ct,null,r.a.createElement(K,null,"This information will appear as the summary text that is shown for this dataset in the ",s.catalogueTitle.en,". Browsing datasets at ",r.a.createElement(c,{lang:"en"})," can help provide a sense of the type of descriptions that are typically used for this section of the profile. As a general rule, this section should be worded with as little jargon as possible to give potential users an understanding of your dataset.",r.a.createElement("br",null),r.a.createElement("br",null),"Suggested abstract points -",r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"What"),"- variables that were measured"),r.a.createElement("li",null,r.a.createElement("b",null,"When"),"- temporal coverage of the data, frequency of the measurements/observations"),r.a.createElement("li",null,r.a.createElement("b",null,"Where"),"- spatial coverage of the data, sampling sites, sensor tracks, laboratory spaces"),r.a.createElement("li",null,r.a.createElement("b",null,"How"),"- equipment, procedures, protocols, calibrations, QA/QC"),r.a.createElement("li",null,r.a.createElement("b",null,"Who"),"- participants, staff"),r.a.createElement("li",null,r.a.createElement("b",null,"Why"),"- a high level statement on the outcome this data is meant to inform")))),r.a.createElement(Z,null," ","Cette description constituera le texte r\xe9capitulatif du jeu de donn\xe9es lorsqu\u2019il sera publi\xe9 dans le"," ",s.catalogueTitle.fr,". Veuillez consulter d\u2019autres jeux de donn\xe9es d\xe9j\xe0 publi\xe9s si vous d\xe9sirez consulter un exemple :"," ",r.a.createElement(c,{lang:"fr"}),". Si possible, veuillez remplir ce champ en utilisant un langage accessible pouvant \xeatre bien compris par d\u2019autres utilisateurs."))),r.a.createElement(zt,{name:"abstract",value:a.abstract,onChange:n,disabled:t,multiline:!0})),r.a.createElement(ot.a,{style:mt},r.a.createElement(ut,null,r.a.createElement(K,null,"Please select all the essential ocean variables that are contained in this dataset."),r.a.createElement(Z,null,"Veuillez s\xe9lectionner toutes les variables oc\xe9aniques essentielles contenues dans ce jeu de donn\xe9es."),r.a.createElement(st,{passes:Re(a,"eov")}),r.a.createElement(ct,null,r.a.createElement(K,null,"If none of these apply you can select Other."),r.a.createElement(Z,null,"Si aucun de ces \xe9l\xe9ments ne s'applique, vous pouvez s\xe9lectionner \xab Autre \xbb."))),r.a.createElement(Ct,{name:"eov",value:a.eov||[],onChange:n,options:xt,optionLabels:xt.map((function(e){return Le(_t(e,i))})),disabled:t})),r.a.createElement(ot.a,{style:mt},r.a.createElement(ue.a,{container:!0,spacing:3,direction:"column"},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(ut,null,r.a.createElement(K,null,"Keywords are an important way to categorize your data that allow people and other systems to search for datasets that share some important characteristics. Choose the most specific keywords that apply to your data, or create your own."),r.a.createElement(Z,null,"Les mots-cl\xe9s permettent de cat\xe9goriser vos donn\xe9es et facilitent leur d\xe9couvrabilit\xe9 par d\u2019autres utilisateurs. Choisissez des mots-cl\xe9s sp\xe9cifiques qui s\u2019appliquent \xe0 vos donn\xe9es ou cr\xe9ez-en des nouveaux."),r.a.createElement(st,{passes:Re(a,"keywords")}),r.a.createElement(ct,null,r.a.createElement(K,null," Enter one at a time, clicking 'Add' after each."),r.a.createElement(Z,null,"Entrez un mot-cl\xe9 \xe0 la fois. Cliquez sur \xab Ajouter \xbb apr\xe8s chaque entr\xe9e.")))),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(Kt,{name:"keywords",value:a.keywords,onChange:n,disabled:t})))),r.a.createElement(ot.a,{style:mt},r.a.createElement(ut,null,r.a.createElement(K,null,"What is the status of this dataset?"),r.a.createElement(Z,null,"Quel est l'\xe9tat de ce jeu de donn\xe9es?"),r.a.createElement(st,{passes:Re(a,"progress")})),r.a.createElement(Pt,{name:"progress",value:a.progress||"",onChange:function(e){return n(e)},options:Object.keys(wt),optionLabels:Object.values(wt).map((function(e){return e.title[i]})),optionTooltips:Object.values(wt).map((function(e){return e.text[i]})),disabled:t,fullWidth:!1,style:{width:"200px"}})),r.a.createElement(ot.a,{style:mt},r.a.createElement(ut,null,r.a.createElement(K,null,"What is the start date when data was first collected?"),r.a.createElement(Z,null,"Inscrivez la date de d\xe9but de votre collecte de donn\xe9es.")),r.a.createElement(Gt,{name:"dateStart",value:a.dateStart||null,onChange:n,disabled:t}),r.a.createElement(ut,null,r.a.createElement(K,null,"What is the end date when data was last collected? Leave blank if data collection is ongoing."),r.a.createElement(Z,null,"Inscrivez la date de fin de votre collecte de donn\xe9es. L aissez vide si la collecte des donn\xe9es est en cours.")),r.a.createElement(Gt,{name:"dateEnd",value:a.dateEnd||null,onChange:n,disabled:t})),r.a.createElement(ot.a,{style:mt},r.a.createElement(ut,null,r.a.createElement(K,null,"What is the date when the data was published? Leave blank if dataset hasn't been published."),r.a.createElement(Z,null,"Quelle est la date de d\xe9but \xe0 laquelle les donn\xe9es ont \xe9t\xe9 publi\xe9es ? Laissez vide si les donn\xe9es n'ont pas \xe9t\xe9 publi\xe9es.")),r.a.createElement(Gt,{name:"datePublished",value:a.datePublished||null,onChange:n,disabled:t})),r.a.createElement(ot.a,{style:mt},r.a.createElement(ut,null,r.a.createElement(K,null,"What is the date when data was revised? Leave blank if dataset hasn't been revised."),r.a.createElement(Z,null,"Quelle est la date \xe0 laquelle les donn\xe9es ont \xe9t\xe9 r\xe9vis\xe9es ? Laissez vide si le jeu de donn\xe9es n'a pas a \xe9t\xe9 r\xe9vis\xe9.")),r.a.createElement(Gt,{name:"dateRevised",value:a.dateRevised||null,onChange:n,disabled:t})),r.a.createElement(ot.a,{style:mt},r.a.createElement(ut,null,r.a.createElement(K,null,"What is the DOI for this dataset?"),r.a.createElement(Z,null,"Quel est le DOI de ce jeu de donn\xe9es ?")),r.a.createElement(gt.a,{style:{marginTop:"10px"},name:"datasetIdentifier",value:a.datasetIdentifier,onChange:function(e){return n(e)},fullWidth:!0})),r.a.createElement(ot.a,{style:mt},r.a.createElement(ut,null,r.a.createElement(K,null,"How is the dataset licensed?"),r.a.createElement(Z,null,"Comment le jeu de donn\xe9es est-il sous licence"),r.a.createElement(st,{passes:Re(a,"license")}),r.a.createElement(ct,null,r.a.createElement(K,null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"Creative Commons Attribution 4.0 International licence (CC-BY 4.0)")," ","- CIOOS recommended. Allows for open sharing and adaptation of the data provided that the original creator is attributed."),r.a.createElement("li",null,r.a.createElement("b",null,"Creative Commons 0")," - imposes no restrictions of any kind."),r.a.createElement("li",null,r.a.createElement("b",null,"Open Government Licence - Canada")," - For datasets made available by Government of Canada departments and agencies, it is very similar to CC-BY as it allows for open sharing and adaptation of the data, provided that the original creator of the data is properly attributed."))),r.a.createElement(Z,null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"Licence internationale Creative Commons Attribution 4.0 (CC-BY 4.0)"," "),"- Licence recommand\xe9e par le SIOOC. Les donn\xe9es sont ouvertes, mais la licence exige que le jeu de donn\xe9es soit cit\xe9 lorsqu\u2019il est utilis\xe9 par un autre utilisateur."),r.a.createElement("li",null,r.a.createElement("b",null,"Creative Commons 0")," - N\u2019impose aucune restriction particuli\xe8re : le jeu de donn\xe9es peut \xeatre utilis\xe9 sans \xeatre cit\xe9."),r.a.createElement("li",null,r.a.createElement("b",null,"Licence pour gouvernement ouvert - Canada")," - Pour les jeux de donn\xe9es rendus disponibles par les organisation et minist\xe8res f\xe9d\xe9raux. Cette licence est similaire \xe0 CC-BY 4.0 : les donn\xe9es sont ouvertes mais le jeu de donn\xe9es doit \xeatre cit\xe9 lorsque utilis\xe9 par un autre utilisateur. correctement attribu\xe9es."))))),r.a.createElement(Pt,{name:"license",value:a.license,onChange:function(e){return n(e)},optionLabels:Object.values(Zt),options:Object.keys(Zt),disabled:t})),r.a.createElement(ot.a,{style:mt},r.a.createElement(ut,null,r.a.createElement(K,null,"What are the limitations affecting the dataset?"),r.a.createElement(Z,null,"Quelles sont les limitations affectant le jeu de donn\xe9es?"),r.a.createElement(ct,null,r.a.createElement(K,null,"For example:",r.a.createElement("i",null,r.a.createElement("ul",null,r.a.createElement("li",null,"Not to be used for navigational purposes."),r.a.createElement("li",null,"Instrument was not calibrated on day."),r.a.createElement("li",null,"Haven\u2019t applied appropriate QC on the data yet.")))),r.a.createElement(Z,null,"Par exemple :",r.a.createElement("i",null,r.a.createElement("ul",null,r.a.createElement("li",null,"Ne pas utiliser \xe0 des fins de navigation."),r.a.createElement("li",null,"L' instrument n'a pas \xe9t\xe9 \xe9talonn\xe9."),r.a.createElement("li",null,"Un contr\xf4le de qualit\xe9 n\u2019a pas \xe9t\xe9 effectu\xe9 sur les donn\xe9es.")))))),r.a.createElement(zt,{name:"limitations",value:a.limitations,onChange:n,multiline:!0,disabled:t})))},Xt={id:"",manufacturer:"",version:"",type:{en:"",fr:""},description:{en:"",fr:""}},ea=function(e){var t=e.onChange,a=e.value,l=void 0===a?[]:a,i=e.name,o=e.disabled,s=e.paperClass,c=Object(n.useState)(0),u=Object(h.a)(c,2),m=u[0],d=u[1];function p(e){var a=Object(pt.a)(l),n=e.target.name;a[m][n]=e.target.value,t({target:{name:i,value:a}})}var f=r.a.createElement($,{en:"Manufacturer",fr:"Fabricant"}),E=r.a.createElement($,{en:"Version",fr:"Version"}),g=r.a.createElement($,{en:"Type",fr:"Type"}),b=r.a.createElement($,{en:"Description",fr:"Description"}),v=l.length>0&&l[m];return r.a.createElement(ue.a,{container:!0,direction:"row",spacing:3},r.a.createElement(ue.a,{item:!0,xs:3},r.a.createElement(ue.a,{container:!0,direction:"column",spacing:2},r.a.createElement(ue.a,{item:!0,xs:!0},"Instruments:",r.a.createElement(B.a,null,l.map((function(e,t){return r.a.createElement(z.a,{key:t,button:!0,onClick:function(){return d(t)}},r.a.createElement(U.a,{primary:r.a.createElement(R.a,{style:{fontWeight:m===t?"bold":""}},t+1,". ",e.id)}))})))),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(fe.a,{disabled:o,startIcon:r.a.createElement(be.a,null),onClick:function(){t({target:{name:i,value:l.concat(Te(Xt))}}),d(l.length)},style:{height:"56px",marginLeft:"10px"}},r.a.createElement(K,null,"Add instrument"),r.a.createElement(Z,null,"Ajouter un instrument"))))),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(ue.a,{container:!0,direction:"column"},v&&r.a.createElement(ot.a,{style:s},r.a.createElement(ue.a,{container:!0,direction:"column",spacing:2},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(K,null,"Instrument ID is required"),r.a.createElement(Z,null,"L'ID de l'instrument est requis"),r.a.createElement(gt.a,{label:"ID",name:"id",value:v.id,onChange:p,fullWidth:!0,disabled:o})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(gt.a,{label:f,name:"manufacturer",value:v.manufacturer,onChange:p,fullWidth:!0,disabled:o})," "),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(gt.a,{label:E,value:v.version,name:"version",onChange:p,fullWidth:!0,disabled:o})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,null,r.a.createElement(K,null,"Instrument Type"),r.a.createElement(Z,null,"Type d'instrument")),r.a.createElement(zt,{name:"type",label:g,value:v.type,onChange:p,disabled:o}))," ",r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,null,"Description"),r.a.createElement(zt,{name:"description",label:b,value:v.description,onChange:p,disabled:o})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(fe.a,{startIcon:r.a.createElement(Oe.a,null),disabled:o,onClick:function(){t({target:{name:i,value:l.filter((function(e,t){return t!==m}))}}),l.length&&d(l.length-2)}},r.a.createElement(K,null,"Remove item"),r.a.createElement(Z,null,"Supprimer l'instrument"))))))))},ta=function(e){var t=e.record,a=e.handleInputChange,n=e.disabled;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{item:!0,xs:!0,style:Object(f.a)(Object(f.a)({},mt),{},{marginTop:"-40px"})},r.a.createElement(ut,null,r.a.createElement(K,null,"Describe the platform"),r.a.createElement(Z,null,"D\xe9crire la plateforme"),r.a.createElement(ct,null,r.a.createElement(K,null,"Eg, the name or type of platform"),r.a.createElement(Z,null,"Par exemple, le nom ou le type de plateforme."),r.a.createElement(st,{passes:Re(t,"platformDescription")}))),r.a.createElement(zt,{name:"platformDescription",value:t.platformDescription,onChange:a,multiline:!0,disabled:n})),r.a.createElement(ue.a,{item:!0,xs:!0,style:mt},r.a.createElement(ut,null,r.a.createElement(K,null,"What is the platform ID or code?"),r.a.createElement(Z,null,"Quel est l'ID de la plateforme ?"),r.a.createElement(ct,null,r.a.createElement(K,null,"This is a unique identification of the platform. If the platform is registered with ICES, use that identifier"),r.a.createElement(Z,null,"Il s'agit d'une identification unique de la plateforme. Si la plateforme est enregistr\xe9e aupr\xe8s du"," ",r.a.createElement("a",{href:"https://www.ices.dk/",target:"_blank",rel:"noopener noreferrer"},"CIEM"),", utilisez cet identificateur"),r.a.createElement(st,{passes:Re(t,"platformID")}))),r.a.createElement(gt.a,{label:r.a.createElement($,{en:"Platform ID",fr:"ID de plateforme"}),name:"platformID",value:t.platformID,onChange:a,fullWidth:!0,disabled:n})))},aa=function(e){var t=e.disabled,a=e.record,n=e.handleInputChange,l=a.noPlatform,i=void 0!==l&&l;return r.a.createElement("div",null,r.a.createElement(ot.a,{style:mt},r.a.createElement(ue.a,{container:!0,direction:"column",spacing:0},r.a.createElement(ue.a,{item:!0,xs:!0,style:mt},r.a.createElement(ut,null,r.a.createElement(K,null,"A platform is anything used in data collection that has instrument(s) attached to it. Eg:",r.a.createElement("ul",null,r.a.createElement("li",null,"Glider"),r.a.createElement("li",null,"Ship"),r.a.createElement("li",null,"Buoy"),r.a.createElement("li",null,"Satellite"),r.a.createElement("li",null,"Rossette"),r.a.createElement("li",null,"ROV"),r.a.createElement("li",null,"Mooring")),"It is strongly encouraged to fill out platform information. If there is no platform, you can enter instruments at the bottom of the page."),r.a.createElement(Z,null,"Une plateforme est tout ce qui est utilis\xe9 dans la collecte de donn\xe9es auquel un ou plusieurs instruments sont attach\xe9s. Par exemple :",r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("i",null,"Glider")),r.a.createElement("li",null,"Navire"),r.a.createElement("li",null,"Bou\xe9e"),r.a.createElement("li",null,"Satellite"),r.a.createElement("li",null,"Rosette"),r.a.createElement("li",null,"ROV"),r.a.createElement("li",null,"Amarrage")),"Il est fortement encourag\xe9 d'ajouter des informations sur une plateforme. S'il n'y a pas de plateformes, vous pouvez entrer des informations sur des instruments au bas de la page.")),r.a.createElement(vt.a,{disabled:t,control:r.a.createElement(yt.a,{name:"noPlatform",checked:i,onChange:function(e){var t=e.target.checked;n({target:{name:"noPlatform",value:t}})}}),label:r.a.createElement(r.a.Fragment,null,r.a.createElement(K,null,"This dataset doesn't have a platform"),r.a.createElement(Z,null,"Ce jeu de donn\xe9es n'a pas de plateforme"))})),r.a.createElement(ue.a,{item:!0,xs:!0,style:mt},i?r.a.createElement(ut,null,r.a.createElement(K,null,"You can still enter an instrument without a platform"),r.a.createElement(Z,null,"Vous pouvez toujours entrer dans un instrument sans plateforme")):r.a.createElement(r.a.Fragment,null,r.a.createElement(ta,{record:a,handleInputChange:n,disabled:t}),r.a.createElement(ut,null,r.a.createElement(K,null,"At least one instrument is required if there is a platform."),r.a.createElement(Z,null,"Au moins un instrument est requis s'il y a une plateforme."),r.a.createElement(st,{passes:Re(a,"instruments")}))),r.a.createElement(ea,{value:a.instruments,onChange:n,name:"instruments",disabled:t,paperClass:mt,noPlatform:i})))))},na=a(25),ra=a.n(na),la=a(322),ia=a(331),oa=a(301),sa=a(302),ca=a(303),ua=a(54),ma=a(153),da=(a(208),a(209),Object(ua.b)((function(e){var t=e.onChange,a=e.value,l=void 0===a?{}:a,i=e.name,o=e.disabled,s=e.record;function c(){t({target:{name:i,value:{north:"",south:"",east:"",west:"",polygon:""}}})}var u=Object(n.useState)(null),m=Object(h.a)(u,2),d=m[0],p=m[1],g=Object(n.useState)(null),b=Object(h.a)(g,2)[1],v=/-?\d+\.?\d+/,y=/-?\d+\.?\d+,\s*-?\d+\.?\d+\s*?/g;function C(e){Object.keys(e).length>1&&Object.keys(e).forEach((function(t){if(1!==Object.keys(d.leafletElement._layers).length){var a=e[t];d.leafletElement.removeLayer(a)}}))}function x(e){C(d.leafletElement._layers);var a=Object(f.a)(Object(f.a)({},l),{},Object(E.a)({},e.target.name,e.target.value));t({target:{name:i,value:a}})}function O(e){return Number.parseFloat(e).toPrecision(4)}ra.a.EditToolbar.Delete.include({enable:function(){this.options.featureGroup.clearLayers(),c()}});var w=Boolean(l.north||l.south||l.east||l.west),j=!w&&!l.polygon;return r.a.createElement("div",null,r.a.createElement(la.a,{style:{width:"100%",height:"55vh"},center:[50,-100],zoom:3},r.a.createElement(ia.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.a.createElement(oa.a,{ref:function(e){p(e)}},!1===o&&r.a.createElement(ma.a,{position:"topleft",onEdited:function(){},onCreated:function(e){var a=e.layer,n=e.layerType;switch(C(d.leafletElement._layers),n){case"polygon":var r=a.getLatLngs()[0].map((function(e){var t=e.lat,a=e.lng;return"".concat(O(t),",").concat(O(a))})),l=r.concat(r[0]).join(" ");t({target:{name:i,value:{polygon:l}}});break;default:case"rectangle":var o=a.getBounds(),s=o.getNorthEast().wrap(),c=s.lat,u=s.lng,m=o.getSouthWest().wrap(),p=m.lat,h=m.lng;c=O(c),p=O(p),u=O(u),h=O(h),t({target:{name:i,value:{north:c,south:p,east:u,west:h}}})}},onDeleted:c,draw:{marker:!1,circle:!1,polyline:!1,circlemarker:!1,polygon:!0},edit:{edit:!1}}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.polygon;return y.test(e)}()&&r.a.createElement(sa.a,{positions:function(e){var t=Object(pt.a)(e.matchAll(y)).map((function(e){return e[0]}));try{t=t.map((function(e){return e.split(",").map(Number)}))}catch(a){b({error:a})}return t}(l.polygon)}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.north,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.south,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.east,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.west,r=v.test(e)&&v.test(t)&&v.test(a)&&v.test(n);return r}()&&r.a.createElement(ca.a,{bounds:[[l.north,l.east],[l.south,l.west]]}))),r.a.createElement("br",null),r.a.createElement(ut,null,r.a.createElement(K,null,"Bounding Box Coordinates"),r.a.createElement(Z,null,"Coordonn\xe9es de la zone de d\xe9limitation minimale"),(w||j)&&r.a.createElement(st,{passes:Re(s,"map")}),r.a.createElement(ct,null,r.a.createElement(K,null,"If you are providing a bounding box, please provide the coordinates in decimal degrees (eg 58.66) and not in decimal minutes seconds."),r.a.createElement(Z,null,"Si vous fournissez une zone de d\xe9limitation minimale, veuillez fournir les coordonn\xe9es en ",r.a.createElement("b",null,"degr\xe9s d\xe9cimaux"),"."))),r.a.createElement(ue.a,{container:!0,direction:"row",spacing:3},r.a.createElement(ue.a,{item:!0,xs:2},r.a.createElement(gt.a,{name:"north",label:r.a.createElement($,{en:"North",fr:"Nord"}),value:l.north||"",inputProps:{inputMode:"numeric",pattern:"[0-9]*"},onChange:x,type:"number",disabled:o||Boolean(l.polygon)})),r.a.createElement(ue.a,{item:!0,xs:2},r.a.createElement(gt.a,{name:"south",label:r.a.createElement($,{en:"South",fr:"Sud"}),value:l.south||"",onChange:x,type:"number",disabled:o||Boolean(l.polygon)})),r.a.createElement(ue.a,{item:!0,xs:2},r.a.createElement(gt.a,{name:"east",label:r.a.createElement($,{en:"East",fr:"Est"}),value:l.east||"",onChange:x,type:"number",disabled:o||Boolean(l.polygon)})),r.a.createElement(ue.a,{item:!0,xs:2},r.a.createElement(gt.a,{name:"west",value:l.west||"",label:r.a.createElement($,{en:"West",fr:"Ouest"}),onChange:x,type:"number",disabled:o||Boolean(l.polygon)}))),r.a.createElement(R.a,{variant:"h6",style:{margin:"20px",marginLeft:"20%"}},r.a.createElement(K,null,"OR"),r.a.createElement(Z,null,"Ou")),r.a.createElement(ut,null,r.a.createElement(K,null,"Polygon coordinates"),r.a.createElement(Z,null,"Coordonn\xe9es du/des polygone(s)"),(!w||j)&&r.a.createElement(st,{passes:Re(s,"map")}),r.a.createElement(ct,null,r.a.createElement(K,null,"If you are providing polygon coordinates, they must start and end with the same point. Eg,"),r.a.createElement(Z,null,"Doivent commencer et se terminer par le m\xeame point. Par exemple,")," ","48,-128 56,-133 56,-147 48,-128")),r.a.createElement(gt.a,{name:"polygon",value:l.polygon||"",onChange:function(e){C(d.leafletElement._layers);var a=Object(f.a)(Object(f.a)({},l),{},Object(E.a)({},e.target.name,e.target.value));t({target:{name:i,value:a}})},type:"text",fullWidth:!0,disabled:o||w}))}))),pa=function(e){var t=e.disabled,a=e.record,n=e.handleInputChange,l=Object(u.i)().language;return r.a.createElement(ue.a,null,r.a.createElement(ot.a,{style:mt},r.a.createElement(ut,{style:{paddingBottom:"15px"}},r.a.createElement(K,null,"What is the spatial extent of the dataset?"),r.a.createElement(Z,null,"Quelle est l'\xe9tendue spatiale du jeu de donn\xe9es?")," ",r.a.createElement(ct,null,r.a.createElement(K,null,"You can draw a bounding box or polygon for the dataset using the Polygon or Box buttons at the left side of them form. Alternatively you can enter them using the fields below. Either a bounding box or a Polygon is required."),r.a.createElement(Z,null,"Vous pouvez tracer un cadre ou un polygone pour situer g\xe9ographiquement votre jeu de donn\xe9es. Vous pouvez aussi localiser l\u2019aire g\xe9ographique couverte par votre jeu de donn\xe9es en inscrivant les coordonn\xe9es g\xe9ographiques (degr\xe9s d\xe9cimaux) dans les champs sous la carte. Cette section doit obligatoirement \xeatre compl\xe9t\xe9e."))),r.a.createElement(da,{value:a.map,name:"map",onChange:n,disabled:t,record:a})),r.a.createElement(ot.a,{style:mt},r.a.createElement(ut,null,r.a.createElement(K,null,"What is the vertical extent of the dataset in meters?"),r.a.createElement(Z,null,"Quelle est l'\xe9tendue verticale du jeu de donn\xe9es en m\xe8tres?"),r.a.createElement(st,{passes:Re(a,"verticalExtentDirection")&&Re(a,"verticalExtentMin")&&Re(a,"verticalExtentMax")}),r.a.createElement(ct,null,r.a.createElement(K,null,r.a.createElement("p",null,"This captures the minimum and maximum depths (or height from sea floor) where the instrument recorded data."),r.a.createElement("p",null,"Depth positive: Depth is recorded with positive values (i.e. a maximum value of 150m implies 150m below the surface).",r.a.createElement("br",null),"Heigth positive: Depth is the elevation from the sea floor (i.e. a maximum value of 150m implies 150m above the sea floor).")),r.a.createElement(Z,null,r.a.createElement("p",null,"Profondeur positive: La profondeur est enregistr\xe9e avec des valeurs positives (c'est-\xe0-dire une valeur maximale de 150 m implique 150 m au-dessous de la surface)."),r.a.createElement("p",null,"Hauteur positive: La profondeur est l'\xe9l\xe9vation depuis le fond marin (c'est-\xe0-dire une valeur maximale de 150 m implique 150 m au-dessus du fond marin)")))),r.a.createElement(ue.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4},r.a.createElement(ue.a,{item:!0,xs:5},r.a.createElement(Pt,{name:"verticalExtentDirection",value:a.verticalExtentDirection||"",onChange:function(e){return n(e)},options:jt,optionLabels:jt.map((function(e){return Le(_t(e,l))})),disabled:t})),r.a.createElement(ue.a,{item:!0,xs:2},r.a.createElement(gt.a,{name:"verticalExtentMin",value:a.verticalExtentMin,onChange:n,label:"Min",fullWidth:!0,type:"number",disabled:t})),r.a.createElement(ue.a,{item:!0,xs:2},r.a.createElement(gt.a,{name:"verticalExtentMax",value:a.verticalExtentMax,onChange:n,label:"Max",fullWidth:!0,type:"number",disabled:t})))))};var ha=function(){var e=Object(u.i)().region;return G[e]},fa=function(e){var t=e.record,a=e.submitRecord,l=Object(n.useState)(!1),i=Object(h.a)(l,2),o=i[0],s=i[1],c=Object(u.i)().language;var m=100===Math.round(100*Me(t)),d=function(e){return Object.keys(Ae).filter((function(t){return!Re(e,t)})).map((function(e){var t=Ae[e];return{error:t.error,tab:t.tab}})).reduce((function(e,t){var a=t.error,n=t.tab;return e[n]||(e[n]=[]),e[n].push(a),e}),{})}(t),p="submitted"===t.status,f=ha();return r.a.createElement(ot.a,{style:mt},r.a.createElement(ue.a,{container:!0,direction:"column",spacing:3},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,null,r.a.createElement(K,null,"Thank-you for completing this form. The information will be reviewed and a ",f.title.en," staff member will contact you to request more information or provide an update on when your dataset will be available through the"," ",f.catalogueTitle.en,". Your information will not be published before you are contacted. If you have any questions or would like to follow up on the status of your record, please contact"),r.a.createElement(Z,null,"Merci d'avoir rempli ce formulaire. L'information sera valid\xe9e par un membre du personnel du ",f.title.fr,". Cette personne pourrait vous contacter pour obtenir plus d'informations ou pour vous indiquer quand votre jeu de donn\xe9es sera disponible dans le"," ",f.catalogueTitle.fr,". Vos informations ne seront pas publi\xe9es avant d'obtenir votre approbation. Si vous avez des questions ou si vous d\xe9sirez effectuer un suivi concernant l'\xe9tat de votre soumission, veuillez contacter")," ",r.a.createElement("a",{href:"mailto:".concat(f.email)},f.email),".")),p?r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,null,r.a.createElement(K,null,"Thank you for your submission. A reviewer has been notified. You will receive an email when the record is published. You are still able to edit this record by saving it, until it is published."),r.a.createElement(Z,null,"Merci pour votre soumission. Un examinateur a \xe9t\xe9 avis\xe9. Vous recevrez un e-mail lors de la publication de l'enregistrement. Vous pouvez toujours modifier cet enregistrement en l'enregistrant, jusqu'\xe0 ce qu'il soit publi\xe9."))):r.a.createElement(r.a.Fragment,null,m?r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,null,r.a.createElement(K,null,"You have completed all of the required fields, your record can be submitted now."),r.a.createElement(Z,null,"Vous avez rempli tous les champs obligatoires, votre dossier peut \xeatre soumis maintenant."))),r.a.createElement(ue.a,{item:!0,xs:!0},o?r.a.createElement(me.a,null):r.a.createElement(fe.a,{onClick:function(){s(!0),a().then((function(){return s(!1)}))},disabled:p},r.a.createElement(K,null,"Submit"),r.a.createElement(Z,null,"Soumettre")))):r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,null,r.a.createElement(K,null,"You haven't completed all of the required fields. You will need to address the list below before submitting."),r.a.createElement(Z,null,"Vous n'avez pas rempli tous les champs obligatoires. Veuillez renseigner les champs identifi\xe9s ci-dessous avant de soumettre votre demande."))),r.a.createElement(ue.a,{item:!0,xs:!0},Object.keys(d).map((function(e){return r.a.createElement("div",{key:e},r.a.createElement(R.a,{variant:"h6"},Le(_t(e,c))),r.a.createElement(B.a,null,d[e].map((function(e,t){var a=e[c];return r.a.createElement(z.a,{key:t},r.a.createElement(U.a,{primary:a}))}))))})))))))},Ea=function(e){var t=e.value;return r.a.createElement(V.a,{title:r.a.createElement($,{en:"Percentage of required fields filled in",fr:"Pourcentage de champs obligatoires remplis"})},r.a.createElement(Xe.a,{display:"flex",width:"90%",style:{margin:"auto"}},r.a.createElement(Xe.a,{width:"100%",mr:1},r.a.createElement(et.a,{variant:"determinate",value:t,style:{marginLeft:"-30px"}})),r.a.createElement(Xe.a,{minWidth:35},r.a.createElement(R.a,{variant:"body2",color:"textSecondary"},"".concat(Math.round(t),"%")))))};function ga(e){var t=e.children,a=e.value,n=e.index,l=Object($e.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},l),a===n&&r.a.createElement(Xe.a,null,t))}var ba=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(e){var n;return Object(X.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value,l=Object(E.a)({},a,r);n.setState((function(e){var t=e.record;return{record:Object(f.a)(Object(f.a)({},t),l),saveDisabled:!1}}))},n.state={record:{title:{en:"",fr:""},abstract:{en:"",fr:""},identifier:Object(he.a)(),keywords:{en:[],fr:[]},eov:[],progress:"",distribution:[],dateStart:null,map:{north:"",south:"",east:"",west:"",polygon:""},verticalExtentMin:"",verticalExtentMax:"",datePublished:null,dateRevised:null,recordID:"",instruments:[],platformID:"",platformDescription:"",language:"",license:"",contacts:[],status:"",comment:"",limitations:"",created:(new Date).toISOString(),lastEditedBy:{},category:"",verticalExtentDirection:"",datasetIdentifier:"",noPlatform:!1,filename:"",organization:"",timeFirstPublished:""},userContacts:{},loading:!1,tabIndex:"start",saveDisabled:!0,highlightMissingRequireFields:!1,editorInfo:{email:"",displayName:""},loggedInUserCanEditRecord:!1},n}return Object(ee.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match;this.setState({loading:!0}),this.unsubscribe=_.onAuthStateChanged(function(){var a=Object(p.a)(d.a.mark((function a(n){var r,l,i,o,s,c,u,m,p;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n&&(r=t.params,l=r.region,i=r.recordID,o=t.url.endsWith("new"),s=n.uid,c=o?s:t.params.userID,u=s===c,m=e.context.isReviewer,Y.database().ref(l).child("users").child(s).child("userinfo").on("value",(function(t){e.setState({editorInfo:t.toJSON()})})),(p=Y.database().ref(l).child("users").child(c)).child("contacts").on("value",(function(t){e.setState({userContacts:t.toJSON()})})),o?e.setState({loading:!1,loggedInUserCanEditRecord:!0}):p.child("records").child(i).on("value",(function(t){var a=t.toJSON();if(a){var n=ze(a),r=(m||u)&&"published"!==n.status;e.setState({record:Object(f.a)(Object(f.a)({},n),{},{recordID:i}),loggedInUserCanEditRecord:r}),e.setState({loading:!1})}else e.setState({loading:!1,record:null})})));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"submitRecord",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.match,a=t.params.region,n=this.state.record,r=n.recordID,!_.currentUser||!r){e.next=7;break}return e.next=7,Y.database().ref(a).child("users").child(_.currentUser.uid).child("records").child(r).child("status").set("submitted");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSaveClick",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n,r,l,i,o,s,c,u,m,p,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.match,n=t.history,r=a.params,l=r.language,i=r.region,o=a.params.userID||_.currentUser.uid,s=Y.database().ref(i).child("users").child(o).child("records"),c=this.state,u=c.record,m=c.editorInfo,u.created=(new Date).toISOString(),u.lastEditedBy=m,!u.recordID){e.next=12;break}return e.next=10,s.child(u.recordID).update(u);case 10:e.next=20;break;case 12:return e.next=14,s.push(u);case 14:return p=e.sent,e.next=17,p.update(u);case 17:h=p.key,this.setState({record:Object(f.a)(Object(f.a)({},u),{},{recordID:h})}),n.push("/".concat(l,"/").concat(i,"/").concat(o,"/").concat(h));case 20:this.setState({saveDisabled:!0});case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.match.params.language,a=this.context.isReviewer,n=this.state,l=n.userContacts,i=n.tabIndex,o=n.record,s=n.saveDisabled,c=n.loading,u=n.highlightMissingRequireFields,m=n.loggedInUserCanEditRecord;if(!o)return r.a.createElement(it,null);var d=this.props.classes,p=!m,h={highlightMissingRequireFields:u,disabled:p,record:o,handleInputChange:this.handleInputChange},f=Math.round(100*Me(o));return c?r.a.createElement(me.a,null):r.a.createElement(ue.a,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch",spacing:3},r.a.createElement(V.a,{placement:"left-start",title:s?"Dataset needs a title before it can be saved":"Save record."},r.a.createElement("span",null,r.a.createElement(tt.a,{color:"primary","aria-label":"add",style:{right:20,bottom:20,position:"fixed"},disabled:s||!(o.title.en||o.title.fr)||p,onClick:function(){return e.handleSaveClick()}},r.a.createElement(lt.a,null)))),r.a.createElement(ue.a,{container:!0,spacing:2,direction:"row",alignItems:"center"},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(at.a,{scrollButtons:"auto",variant:"fullWidth",value:i,onChange:function(t,a){return e.setState({tabIndex:a})},"aria-label":"simple tabs example"},r.a.createElement(nt.a,{fullWidth:!0,classes:{root:d.tabRoot},label:r.a.createElement($,{en:"Start",fr:"Accueil"}),value:"start"}),r.a.createElement(nt.a,{fullWidth:!0,classes:{root:d.tabRoot},label:r.a.createElement($,{en:"Data Identification",fr:"Identification des donn\xe9es"}),value:"identification"}),r.a.createElement(nt.a,{fullWidth:!0,classes:{root:d.tabRoot},label:"Spatial",value:"spatial"}),r.a.createElement(nt.a,{fullWidth:!0,classes:{root:d.tabRoot},label:"Contact",value:"contact"}),r.a.createElement(nt.a,{fullWidth:!0,classes:{root:d.tabRoot},label:r.a.createElement($,{en:"Resources",fr:"Ressources"}),value:"distribution"}),r.a.createElement(nt.a,{fullWidth:!0,classes:{root:d.tabRoot},label:r.a.createElement($,{en:"Platform",fr:"Plateforme"}),value:"platform"}),m&&r.a.createElement(nt.a,{fullWidth:!0,classes:{root:d.tabRoot},label:r.a.createElement($,{en:"Submit",fr:"Soumettre"}),value:"submit",disabled:"submitted"===o.status||"published"===o.status})),r.a.createElement("div",{style:{marginTop:"10px",textAlign:"center"}},r.a.createElement(R.a,{variant:"h5"},t&&o.title&&o.title[t]||r.a.createElement($,{en:"New Record",fr:"Nouvel enregistrement"})," ",r.a.createElement(ke,{status:o.status})),r.a.createElement(R.a,{component:"div"},r.a.createElement("i",null,r.a.createElement(Fe,{dateStr:o.created}),o.lastEditedBy&&o.lastEditedBy.displayName&&r.a.createElement(r.a.Fragment,null,r.a.createElement(K,null,"by "),r.a.createElement(Z,null,"Par "),o.lastEditedBy.displayName," ",a&&o.lastEditedBy.email)),r.a.createElement(Ea,{value:f}))))),r.a.createElement(ga,{value:i,index:"start"},r.a.createElement(dt,h)),r.a.createElement(ga,{value:i,index:"identification"},r.a.createElement($t,h)),r.a.createElement(ga,{value:i,index:"spatial"},r.a.createElement(pa,h)),r.a.createElement(ga,{value:i,index:"platform"},r.a.createElement(aa,h)),r.a.createElement(ga,{value:i,index:"distribution"},r.a.createElement(Wt,h)),r.a.createElement(ga,{value:i,index:"submit"},r.a.createElement(fa,Object.assign({},h,{submitRecord:function(){return e.submitRecord()}}))),r.a.createElement(ga,{value:i,index:"contact"},r.a.createElement(Dt,Object.assign({userContacts:l},h))))}}]),a}(n.Component);ba.contextType=le;var va=Object(rt.a)((function(){return{tabRoot:{minWidth:"115px"}}}))(Object(u.j)(ba)),ya=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(e){var n;return Object(X.a)(this,a),(n=t.call(this,e)).state={orgName:"",orgEmail:"",orgURL:"",orgAdress:"",orgCity:"",orgCountry:"",indName:"",indPosition:"",indEmail:""},n}return Object(ee.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n,r,l=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.match,a=t.params,n=a.contactID,r=a.region,_.currentUser&&n&&(this.dbRef=Y.database().ref(r).child("users").child(_.currentUser.uid).child("contacts").child(n),this.setState({contactID:n}),_.currentUser&&this.dbRef.on("value",(function(e){return l.setState(Object(f.a)({},e.toJSON()))})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.dbRef&&this.dbRef.off("value")}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(E.a)({},a,n))}},{key:"handleCancelClick",value:function(){var e=this.props,t=e.match,a=e.history,n=t.params,r=n.language,l=n.region;a.push("/".concat(r,"/").concat(l,"/contacts"))}},{key:"handleSubmitClick",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n,r,l,i,o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.history,n=t.match,r=n.params,l=r.region,i=r.language,this.dbRef&&this.dbRef.off("value"),o="/".concat(i,"/").concat(l),s=Y.database().ref(l).child("users").child(_.currentUser.uid).child("contacts"),e.next=7,s.push(this.state);case 7:a.push("".concat(o,"/contacts"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.orgName,n=t.indName,l=a||n;return r.a.createElement(ue.a,{container:!0,direction:"column",spacing:2},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(St,{value:this.state,onChange:function(t){return e.handleChange(t)}})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(fe.a,{startIcon:r.a.createElement(lt.a,null),variant:"contained",color:"primary",onClick:function(){return e.handleSubmitClick()},disabled:!l},r.a.createElement(K,null,"Save"),r.a.createElement(Z,null,"Enregistrer")),r.a.createElement(fe.a,{style:{marginLeft:"10px"},variant:"contained",color:"secondary",onClick:function(){return e.handleCancelClick()}},r.a.createElement(K,null,"Cancel"),r.a.createElement(Z,null,"Annuler"))))}}]),a}(r.a.Component),Ca=Object(u.j)(ya),xa=function(e){var t=e.record,a=e.language,n=e.onViewClick,l=e.onDeleteClick,i=e.onSubmitClick,o=e.showPublishAction,s=e.showUnPublishAction,c=e.onUnPublishClick;return r.a.createElement(z.a,{key:t.key},r.a.createElement(Ee.a,null,r.a.createElement(W.a,null,r.a.createElement(ve.a,null))),r.a.createElement(U.a,{onClick:n,primary:r.a.createElement("div",{style:{width:"80%"}},t.title[a]),secondary:r.a.createElement("span",null,"Author: ",t.userinfo.displayName," ",t.userinfo.email," ",r.a.createElement("br",null),r.a.createElement(Fe,{dateStr:t.created}),r.a.createElement("br",null),"UUID: ",t.identifier,r.a.createElement("br",null))}),r.a.createElement(ge.a,null,r.a.createElement(V.a,{title:r.a.createElement($,{en:"View",fr:"Vue"})},r.a.createElement("span",null,r.a.createElement(A.a,{onClick:n,edge:"end","aria-label":"delete"},s?r.a.createElement(Ce.a,null):r.a.createElement(xe.a,null)))),r.a.createElement(V.a,{title:r.a.createElement($,{en:"Delete",fr:"Supprimer"})},r.a.createElement("span",null,r.a.createElement(A.a,{onClick:l,edge:"end","aria-label":"delete"},r.a.createElement(Oe.a,null)))),o&&r.a.createElement(V.a,{title:r.a.createElement($,{en:"Publish",fr:"Publier"})},r.a.createElement("span",null,r.a.createElement(A.a,{onClick:i,edge:"end","aria-label":"delete"},r.a.createElement(we.a,null)))),s&&r.a.createElement(V.a,{title:r.a.createElement($,{en:"Un-publish",fr:"De-Publier"})},r.a.createElement("span",null,r.a.createElement(A.a,{onClick:c,edge:"end","aria-label":"delete"},r.a.createElement(je.a,null))))))},Oa=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(e){var n;return Object(X.a)(this,a),(n=t.call(this,e)).state={users:{},deleteModalOpen:!1,publishModalOpen:!1,unPublishModalOpen:!1,modalKey:"",modalUserID:"",loading:!1},n}return Object(ee.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0}),t=this.props.match,a=t.params.region,this.unsubscribe=_.onAuthStateChanged((function(e){e&&Y.database().ref(a).child("users").on("value",(function(e){return n.setState({users:e.toJSON(),loading:!1})}))}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"editRecord",value:function(e,t){var a=this.props,n=a.match,r=a.history,l=n.params,i=l.language,o=l.region;r.push("/".concat(i,"/").concat(o,"/").concat(t,"/").concat(e))}},{key:"submitRecord",value:function(){var e=Object(p.a)(d.a.mark((function e(t,a,n){var r,l,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.match,l=r.params.region,!t||!a){e.next=10;break}return this.setState({loading:!0}),i=Y.database().ref(l).child("users").child(a).child("records").child(t),e.next=7,i.child("status").set(n);case 7:return e.next=9,i.child("timeFirstPublished").set((new Date).toISOString());case 9:this.setState({loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"deleteRecord",value:function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.match,r=n.params.region,!t||!a){e.next=7;break}return this.setState({loading:!0}),e.next=6,Y.database().ref(r).child("users").child(a).child("records").child(t).remove();case 6:this.setState({loading:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"toggleModal",value:function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0;this.setState((a={modalKey:n},Object(E.a)(a,e,t),Object(E.a)(a,"modalUserID",r),a))}},{key:"render",value:function(){var e=this,t=this.state.users,a=this.props.match.params.language,n=[];Object.entries(t).forEach((function(e){var t=Object(h.a)(e,2),a=t[0],r=t[1];r.records&&Object.entries(r.records).forEach((function(e){var t=Object(h.a)(e,2),l=t[0],i=t[1];n.push(Object(f.a)(Object(f.a)({},i),{},{userinfo:Object(f.a)(Object(f.a)({},r.userinfo),{},{userID:a}),key:l}))}))}));var l=n.filter((function(e){return"submitted"===e.status})),i=n.filter((function(e){return"published"===e.status})),o=this.state,s=o.deleteModalOpen,c=o.modalKey,u=o.modalUserID,m=o.unPublishModalOpen,d=o.publishModalOpen,p=o.loading;return r.a.createElement(ue.a,{container:!0,direction:"column",spacing:3},r.a.createElement(Je,{open:s,onClose:function(){return e.toggleModal("deleteModalOpen",!1)},onAccept:function(){return e.deleteRecord(c,u)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"}),r.a.createElement(Je,{open:d,onClose:function(){return e.toggleModal("publishModalOpen",!1)},onAccept:function(){return e.submitRecord(c,u,"published")},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"}),r.a.createElement(Je,{open:m,onClose:function(){return e.toggleModal("unPublishModalOpen",!1)},onAccept:function(){return e.submitRecord(c,u,"submitted")},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"}),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,{variant:"h5"},r.a.createElement(K,null,"Review submissions"),r.a.createElement(Z,null,"Examen des soumissions"))),p?r.a.createElement(me.a,null):r.a.createElement(r.a.Fragment,null,l.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,null,r.a.createElement(K,null,"These are the submissions we have received from all users that have not yet been reviewed. To accept a record, click the 'Publish' button. Once a record is published, you can download the xml or yaml"),r.a.createElement(Z,null,"Ce sont les soumissions que nous avons re\xe7ues de tous les utilisateurs qui n'ont pas encore \xe9t\xe9 examin\xe9es. Pour accepter un enregistrement, cliquez sur le bouton \xab Publier \xbb. Une fois qu'un enregistrement est publi\xe9, vous pouvez t\xe9l\xe9charger le xml ou yaml")," ",".")),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(B.a,null,l.map((function(t){return r.a.createElement(xa,{record:t,key:t.key,language:a,onViewClick:function(){return e.editRecord(t.key,t.userinfo.userID)},onDeleteClick:function(){return e.toggleModal("deleteModalOpen",!0,t.key,t.userinfo.userID)},onSubmitClick:function(){return e.toggleModal("publishModalOpen",!0,t.key,t.userinfo.userID)},showPublishAction:!0})}))))):r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,null,r.a.createElement(K,null,"There are no records waiting to be reviewed."),r.a.createElement(Z,null,"Aucun dossier n'attend d'\xeatre examin\xe9."))),i.length?r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,null,r.a.createElement(K,null,"Published records:"),r.a.createElement(Z,null,"Documents publi\xe9s:")),r.a.createElement(B.a,null,i.map((function(t,n){return r.a.createElement(xa,{record:t,key:n,language:a,onViewClick:function(){return e.editRecord(t.key,t.userinfo.userID)},onDeleteClick:function(){return e.toggleModal("deleteModalOpen",!0,t.key,t.userinfo.userID)},onUnPublishClick:function(){return e.toggleModal("unPublishModalOpen",!0,t.key,t.userinfo.userID)},showUnPublishAction:!0})})))):r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,null,r.a.createElement(K,null,"There are no published records."),r.a.createElement(Z,null,"Il n'y a pas d'enregistrements publi\xe9s")))))}}]),a}(r.a.Component),wa=function(e){return Object(pt.a)(new Set(e))},ja=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(e){var n;return Object(X.a)(this,a),(n=t.call(this,e)).state={admins:[],reviewers:[],loading:!1},n}return Object(ee.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.match,a=t.params.region,this.setState({loading:!0}),this.unsubscribe=_.onAuthStateChanged((function(e){e&&Y.database().ref(a).child("permissions").on("value",(function(e){var t=e.toJSON(),a=Object.values(t.admins||{}),r=Object.values(t.reviewers||{});n.setState({admins:a,reviewers:r,loading:!1})}))}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"updatePermissions",value:function(){var e=this.props.match.params.region,t=this.state,a=t.reviewers,n=t.admins;if(_.currentUser){var r=Y.database().ref(e).child("permissions");r.child("admins").set(wa(n)),r.child("reviewers").set(wa(a))}}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.reviewers,l=t.admins;return r.a.createElement(ue.a,{container:!0,direction:"column",spacing:3},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,{variant:"h5"},r.a.createElement(K,null,"Admin"),r.a.createElement(Z,null,"Administrateurs")),r.a.createElement(R.a,null,r.a.createElement(K,null,"Add each admin or reviewer's email address on it's own line"),r.a.createElement(Z,null,"Ajouter l'adresse e-mail de chaque administrateur ou r\xe9viseur sur sa propre ligne"))),a?r.a.createElement(me.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,null,r.a.createElement(K,null,"Admins"),r.a.createElement(Z,null,"Administrateurs"))),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(gt.a,{multiline:!0,fullWidth:!0,value:l.join("\n"),onChange:function(t){return e.setState({admins:t.target.value.split("\n")})}})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,null,r.a.createElement(K,null,"Reviewers"),r.a.createElement(Z,null,"R\xe9viseurs"))),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(gt.a,{multiline:!0,fullWidth:!0,value:n.join("\n"),onChange:function(t){return e.setState({reviewers:t.target.value.split("\n")})}})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(fe.a,{startIcon:r.a.createElement(lt.a,null),variant:"contained",color:"secondary",onClick:function(){return e.updatePermissions()}},r.a.createElement(K,null,"Save"),r.a.createElement(Z,null,"Enregistrer")))))}}]),a}(r.a.Component),Sa=function(){return ne.b(new Error("Testing sentry")),r.a.createElement("h1",null,"Error notification sent")},ka=function(e){var t=e.children,a=Object(u.i)(),n=a.language,l=a.region,i="/cioos-".concat(l,"-").concat(n,".png");return r.a.createElement(ue.a,{container:!0,direction:"column",spacing:2},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement("img",{src:"/metadata-entry-form"+i,alt:l})),r.a.createElement(ue.a,{item:!0,xs:!0,style:{paddingLeft:"50px"}},t))},Ia=function(e){var t=e.match,a=Object(n.useContext)(le),l=a.loggedIn,i=a.authIsLoading;return r.a.createElement(r.a.Fragment,null,i?r.a.createElement(me.a,null):r.a.createElement(ka,null,l?r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"".concat(t.path,"/"),exact:!0,component:Ye}),r.a.createElement(u.b,{path:"".concat(t.path,"/new"),component:va}),r.a.createElement(u.b,{path:"".concat(t.path,"/contacts/:contactID"),component:Ca}),r.a.createElement(u.b,{path:"".concat(t.path,"/contacts/new"),component:Ca}),r.a.createElement(u.b,{path:"".concat(t.path,"/contacts"),component:Ke}),r.a.createElement(u.b,{path:"".concat(t.path,"/:userID/:recordID"),component:va}),r.a.createElement(u.b,{path:"".concat(t.path,"/submissions"),component:Ye}),r.a.createElement(u.b,{path:"".concat(t.path,"/reviewer"),component:Oa}),r.a.createElement(u.b,{path:"".concat(t.path,"/admin"),component:ja}),r.a.createElement(u.b,{path:"".concat(t.path,"/sentry-test"),component:Sa}),r.a.createElement(u.b,{path:"*",component:it})):r.a.createElement(Ze,null)))},qa=function(e){var t=e.match,a=Object(u.i)().region,n=Object(de.a)({palette:{primary:{main:G[a].colors.primary},secondary:{main:G[a].colors.secondary}},props:{MuiTextField:{variant:"outlined"},MuiSelect:{variant:"outlined"},MuiButton:{variant:"outlined"}}});return r.a.createElement(oe,null,r.a.createElement(pe.a,{theme:n},r.a.createElement(ce,null,r.a.createElement(Ia,{match:t}))))},Pa=a(308),Da=a(309),Aa=a(311),Ra=a(310),Ma=Object(b.a)({root:{maxWidth:345},media:{height:400,"&:hover":{filter:"brightness( 100% ) contrast( 100% ) saturate( 200% ) blur( 0px ) hue-rotate( 197deg )"}}});function La(e){var t=e.region,a=e.regionSummary,n=Object(u.g)(),l=Object(u.i)().language,i=Ma(),o=G[t],s="/cioos-".concat(t,"-").concat(l,".png");return r.a.createElement(Pa.a,{className:i.root,onClick:function(){return n.push("/".concat(l,"/").concat(t))},style:{minHeight:"500px",minWidth:"400px"}},r.a.createElement(Da.a,null,r.a.createElement(Ra.a,{className:i.media,image:"".concat("/metadata-entry-form","/map-").concat(t,".jpg"),title:o.title[l]}),r.a.createElement(Aa.a,null,r.a.createElement("div",null,r.a.createElement("img",{src:"/metadata-entry-form"+s,alt:t,style:{margin:"10px",maxWidth:"300px",maxHeight:"80px"}})),r.a.createElement(R.a,{variant:"body2",color:"textSecondary",component:"p"},a))))}var Ta=r.a.createElement(r.a.Fragment,null,r.a.createElement(K,null,"CIOOS Atlantic is focused on the integration of oceanographic data from the Atlantic seaboard, a region spanning from Labrador to the USA."),r.a.createElement(Z,null,"CIOOS Atlantique se concentre sur l'int\xe9gration des donn\xe9es oc\xe9anographiques depuis la c\xf4te atlantique, une r\xe9gion qui s'\xe9tend du Labrador au \xc9TATS-UNIS.")),za=r.a.createElement(r.a.Fragment,null,r.a.createElement(K,null,"The St. Lawrence Global Observatory integrates multidisciplinary data and information about the St. Lawrence\u2019s global system, from the Great Lakes to the Gulf."),r.a.createElement(Z,null,"L'Observatoire global du Saint-Laurent int\xe9gre des donn\xe9es et de l'information multidisciplinaires sur l'\xe9cosyst\xe8me global du Saint-Laurent, des Grands Lacs au Golfe")),Na=r.a.createElement(r.a.Fragment,null,r.a.createElement(K,null,"CIOOS Pacific is focused on ocean data from Canada\u2019s West Coast"),r.a.createElement(Z,null,"Le CIOOS Pacifique se concentre sur les donn\xe9es oc\xe9aniques de la c\xf4te ouest du Canada"));function Wa(){return r.a.createElement(ue.a,{container:!0,direction:"column",spacing:2},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(R.a,{variant:"h6"},r.a.createElement(K,null,"Welcome to the CIOOS Metadata Entry Tool. To get started, please select the region where your data was collected."),r.a.createElement(Z,null,"Bienvenue dans l'outil de saisie de m\xe9tadonn\xe9es CIOOS. Pour commencer, veuillez s\xe9lectionner la r\xe9gion dans laquelle vos donn\xe9es ont \xe9t\xe9 collect\xe9es."))),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(ue.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"stretch"},r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(La,{region:"pacific",regionSummary:Na})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(La,{region:"stlaurent",regionSummary:za})),r.a.createElement(ue.a,{item:!0,xs:!0},r.a.createElement(La,{region:"atlantic",regionSummary:Ta})))))}var Ua=function(){return r.a.createElement(c.a,{basename:"/"},r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/"},r.a.createElement(u.a,{to:"/en/region-select"})),r.a.createElement(u.b,{path:"/".concat(":language(en|fr)","/region-select"),exact:!0,component:function(){return r.a.createElement(ce,null,r.a.createElement(Wa,null))}}),r.a.createElement(u.b,{path:"/".concat(":language(en|fr)","/").concat(":region(pacific|atlantic|stlaurent)"),component:qa}),r.a.createElement(u.b,{path:"*"},r.a.createElement(u.a,{to:"/en/region-select"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a({dsn:"https://8fd4b6885cc447c0b11aa0cb3009b0e3@o56764.ingest.sentry.io/5493983",integrations:[new s.a.BrowserTracing],tracesSampleRate:1}),i.a.render(r.a.createElement(Ua,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[186,1,2]]]);
//# sourceMappingURL=main.6ffec4d2.chunk.js.map
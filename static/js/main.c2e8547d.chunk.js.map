{"version":3,"sources":["utils/emlTemplate.j2","regions.js","firebase.js","auth.js","components/I18n.jsx","components/Pages/FormClassTemplate.jsx","providers/UserProvider.jsx","components/NavDrawer.jsx","utils/misc.js","components/FormComponents/SimpleModal.jsx","utils/blankRecord.js","utils/firebaseRecordFunctions.js","utils/recordToEML.js","utils/validate.js","components/FormComponents/LastEdited.jsx","components/FormComponents/RecordStatusIcon.jsx","components/FormComponents/MetadataRecordListItem.jsx","components/Pages/Submissions.jsx","components/Pages/Published.jsx","utils/firebaseContactFunctions.js","components/FormComponents/ContactTitle.jsx","components/Pages/ContactsSaved.jsx","components/Pages/Login.jsx","components/FormComponents/StatusChip.jsx","components/Pages/NotFound.jsx","components/FormComponents/RequiredMark.jsx","components/FormComponents/QuestionStyles.jsx","components/Tabs/StartTab.jsx","components/FormComponents/CheckBoxList.jsx","isoCodeLists.js","components/FormComponents/RolePicker.jsx","components/FormComponents/ContactEditor.jsx","components/FormComponents/SelectInput.jsx","components/FormComponents/ContactLeftList.jsx","components/FormComponents/ApaPreview.jsx","components/Tabs/ContactTab.jsx","components/FormComponents/BilingualTextInput.jsx","components/FormComponents/Resources.jsx","components/Tabs/ResourcesTab.jsx","components/FormComponents/DateInput.jsx","utils/keywords.js","components/FormComponents/KeywordsInput.jsx","utils/licenses.js","components/Tabs/IdentificationTab.jsx","components/FormComponents/Instruments.jsx","components/FormComponents/Platform.jsx","components/Tabs/PlatformTab.jsx","components/FormComponents/MapSelect.jsx","components/Tabs/SpatialTab.jsx","utils/tabs.js","components/FormComponents/Regions.jsx","components/Tabs/SubmitTab.jsx","components/Pages/MetadataForm.jsx","components/Pages/ErrorBoundary.jsx","components/FormComponents/EditSavedContact.jsx","components/FormComponents/TransferModal.jsx","components/Pages/Reviewer.jsx","components/Pages/Admin.jsx","components/Pages/SentryTest.jsx","components/BaseLayout.jsx","components/FormComponents/RegionCard.jsx","components/Pages/RegionSelect.jsx","components/App.jsx","serviceWorker.js","index.jsx"],"names":["module","exports","regions","pacific","title","en","fr","catalogueTitle","colors","primary","secondary","email","catalogueURL","introPageText","showInRegionSelector","stlaurent","atlantic","iys","hakai","test","config","apiKey","authDomain","databaseURL","process","REACT_APP_DEV_DEPLOYMENT","projectId","storageBucket","messagingSenderId","appId","firebase","initializeApp","provider","auth","GoogleAuthProvider","setCustomParameters","promt","spanInLanguage","lang","children","useParams","language","En","Fr","I18n","props","console","error","Array","isArray","length","FormClassTemplate","listenerRefs","prevProps","this","match","params","region","unsubscribeAndCloseListeners","componentDidMount","unsubscribe","forEach","ref","off","Component","UserContext","createContext","user","authIsLoading","UserProvider","setState","onAuthStateChanged","userAuth","displayName","uid","Sentry","scope","setUser","username","database","child","update","permissionsRef","on","permissionsFB","permissions","toJSON","admins","reviewers","isAdmin","includes","isReviewer","loggedIn","push","state","translate","functions","httpsCallable","regenerateXMLforRecord","downloadRecord","Provider","value","withRouter","useStyles","makeStyles","theme","root","display","flexGrow","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","width","enteringScreen","menuButton","marginRight","languageSelector","borderColor","color","spacing","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","breakpoints","up","toolbar","alignItems","justifyContent","padding","mixins","content","MiniDrawer","history","useHistory","classes","useTheme","useContext","userIsReviewer","userIsAdmin","Object","keys","pathname","useLocation","pathWithoutLang","split","map","e","slice","join","baseURL","React","useState","Boolean","open","setOpen","translations","home","new","contacts","saved","published","review","admin","signIn","logout","topBarBackgroundColor","usingDevDatabase","className","CssBaseline","AppBar","position","clsx","Toolbar","style","backgroundColor","IconButton","aria-label","onClick","edge","Menu","Typography","variant","noWrap","marginBottom","flex","src","alt","verticalAlign","paddingRight","Select","onChange","target","MenuItem","Drawer","paper","direction","ChevronRight","ChevronLeft","ListItem","key","ListItemIcon","Avatar","photoURL","ListItemText","Divider","List","Tooltip","placement","disabled","button","a","signInWithPopup","AccountCircle","ListAlt","AssignmentTurnedIn","RateReview","SupervisorAccount","signOut","then","ExitToApp","deepCopy","obj","JSON","parse","stringify","firebaseToJSObject","input","out","entries","keywords","values","contact","role","replacer","trim","trimStringsInObject","getRecordFilename","record","identifier","toLowerCase","replace","unique","arr","Set","rand","Math","round","random","getModalStyle","top","left","transform","palette","background","border","boxShadow","shadows","SimpleModal","onClose","onAccept","modalQuestion","modalStyle","Modal","aria-labelledby","aria-describedby","onKeyPress","id","type","blankRecord","abstract","eov","progress","distribution","dateStart","dateEnd","north","south","east","west","polygon","verticalExtentMin","verticalExtentMax","datePublished","dateRevised","recordID","instruments","platformID","platformDescription","license","status","comment","limitations","lastEditedBy","category","verticalExtentDirection","datasetIdentifier","noPlatform","filename","organization","timeFirstPublished","getBlankRecord","uuidv4","created","Date","toISOString","cloneRecord","sourceUserID","destinationUserID","sourceUserRecordsRef","once","val","loadRegionRecords","regionRecords","statusFilter","regionUsers","records","userID","userinfo","submitRecord","recordRef","set","deleteRecord","remove","transferRecord","transferEmail","regionUsersRef","userIDToEmailMapping","userData","userMatch","find","matchingUserID","newRecordRef","newRecordID","nunjucks","require","arrayOverlap","b","some","getFirstName","x","names","getLastName","translateRole","isoRoles","log","configure","autoescape","web","fetch","templatePath","t","text","templateXML","renderString","recordToEML","validateEmail","validator","isEmail","validateURL","url","isURL","doiRegexp","validateLatitude","num","validateLongitude","polygonIsValid","obj1","obj2","coordinates","c","filter","lat","lon","parseFloat","contactIsFilled","orgName","indName","validators","validation","tab","optional","every","indEmail","orgEmail","orgURL","dist","name","instrument","validateField","fieldName","valueToValidate","validationFunction","percentValid","fields","numTotalRequired","field","recordIsValid","optionalFieldsAreValid","LastEdited","timeAgo","dateStr","TimeAgo","addLocale","format","RecordStatusIcon","Description","Drafts","MetadataRecordListItem","onViewEditClick","onDeleteClick","onCloneClick","onSubmitClick","showAuthor","showDeleteAction","showSubmitAction","showPublishAction","showUnPublishAction","showUnSubmitAction","showViewAction","showEditAction","showPercentComplete","showCloneAction","onUnSubmitClick","onUnPublishClick","showDownloadButton","showTransferButton","onTransferClick","showCatalogueURL","downloadXML","isLoading","setIsLoading","anchorEl","setAnchorEl","handleClose","isValidRecord","percentValidInt","handleDownloadRecord","fileType","extensions","erddap","xml","yaml","eml","emlStr","data","res","message","blob","Blob","FileSaver","saveAs","ListItemAvatar","secondaryTypographyProps","ListItemSecondaryAction","Visibility","Edit","Delete","Publish","Eject","FileCopy","aria-controls","aria-expanded","undefined","aria-haspopup","event","currentTarget","CircularProgress","CloudDownload","MenuListProps","PaperProps","TransferWithinAStation","window","focus","OpenInNew","Submissions","deleteModalOpen","submitModalOpen","withdrawModalOpen","modalKey","modalRecord","loading","recordsRef","multiple","allUsersRecords","reduce","acc","k","v","loadRecords","currentUser","returnRecordToDraft","modalName","toggleModal","handleSubmitRecord","withdrawRecord","marginTop","Button","startIcon","Add","sort","editRecord","Published","usersRef","regionRecordsFB","handleCloneRecord","contactID","contactsRef","newNode","ContactTitle","getContactTitleFromNames","Contacts","modalOpen","deleteContact","cloneContact","newContact","Grid","container","item","xs","handleDeleteContact","addContact","editContact","PermContactCalendar","handleCloneContact","Login","StatusChip","chipText","Chip","label","NotFound","RequiredMark","passes","fontSize","bottom","SupplementalText","component","QuestionText","paperClass","margin","StartTab","regionInfo","Paper","href","Save","CheckBoxList","options","optionLabels","optionTooltips","labelSize","i","FormControlLabel","control","Checkbox","checked","ele","newCheckedValuesArray","concat","roleCodes","custodian","owner","includeInCitation","distributor","author","coAuthor","collaborator","contributor","editor","funder","mediator","originator","pointOfContact","principalInvestigator","processor","publisher","resourceProvider","rightsHolder","sponsor","stakeholder","progressCodes","onGoing","historicalArchive","completed","depthDirections","heightPositive","depthPositive","RolePicker","updateContact","expanded","setExpanded","roleCodeKeys","roleLabels","citationRoleText","tooltips","selectOptionIsInExpandedList","indexOf","numSpecialRoles","Accordion","AccordionSummary","expandIcon","ExpandMore","AccordionDetails","ContactEditor","showRolePicker","updateContactEvent","orgEmailValid","indEmailValid","orgURLValid","marginleft","TextField","fullWidth","helperText","orgAdress","orgCity","orgCountry","indPosition","formControl","minWidth","selectEmpty","SelectInput","FormControl","displayEmpty","InputLabel","enterDelay","emptyContact","ContactLeftList","updateContacts","activeContact","setActiveContact","userContacts","saveToContacts","currentContacts","setItems","contactList","justify","dragHandleSelector","lockAxis","onDrop","removedIndex","addedIndex","reorderedContacts","arrayMove","contactItem","fontWeight","contactIndex","duplicatedContact","duplicateContact","itemIndex","index","height","labelId","APAPreview","apaData","arrA","arrB","family","date","raw","html","Cite","template","dangerouslySetInnerHTML","__html","ContactTab","updateRecord","showApaBox","ApaPreview","newContacts","BilingualTextInput","multiline","translationButonDisabled","awaitingTranslation","setAwaitingTranslation","handleEvent","newData","languages","textTooBig","size","InputProps","startAdornment","InputAdornment","toUpperCase","endIcon","alternateLanguage","fromLang","translatedText","translation","Resources","updateResources","resources","emptyResource","description","removeResource","moveResource","newIndex","element","splice","nameLabel","descriptionLabel","urlIsValid","handleResourceChange","newValue","ArrowUpwardSharp","ArrowDownwardSharp","ResourcesTab","formatDate","d","getDate","m","getMonth","y","getFullYear","DateInput","utils","DateFnsUtils","minDate","maxDate","dateSelected","KeyboardButtonProps","KeywordsInput","selectedKeyword","setKeyword","inputValue","setInputValue","selectedKeywordAltLang","setSelectedKeywordAltLang","reverse","altLanguage","cleanList","list","Autocomplete","onInputChange","newInputValue","keyword","word","toLang","keywordList","freeSolo","localeCompare","renderInput","userKeywordList","userKeywordListAlt","onDelete","deletedChipLang","licenses","code","CC0","IdentificationTab","handleUpdateRecord","doiIsValid","languageUpperCase","CatalogueLink","rel","licensesSorted","eovCategories","categoryKey","categoryText","eovsFiltered","eovs","emerging","Update","l","emptyInstrument","manufacturer","version","Instruments","updateInstruments","activeInstrument","setActiveInstrument","updateInstrumentField","instrumentsCopy","manufacturerLabel","versionLabel","typeLabel","instrumentItem","Platform","PlatformTab","withLeaflet","updateMap","mapData","handleMapClear","editableFG","setEditableFG","setLayerError","coordTest","polyTest","clearExtraLayers","drawnItems","layerid","leafletElement","_layers","layer","removeLayer","handleChange","limitDecimals","Number","toPrecision","L","EditToolbar","include","enable","featureGroup","clearLayers","bboxIsDrawn","fieldsAreEmpty","Map","center","zoom","TileLayer","attribution","FeatureGroup","featureGroupRef","onCreated","layerType","polygonStrings","getLatLngs","lng","bounds","getBounds","getNorthEast","wrap","getSouthWest","onMapClear","draw","marker","circle","polyline","circlemarker","edit","test_string","hasPolygon","positions","polygonList","coordList","matchAll","point","parsePolyString","test_n","test_s","test_e","test_w","hasBoundingBox","inputProps","inputMode","pattern","OpenEPSGDefn","SpatialTab","paddingBottom","handleUpdateMap","paddingTop","tabs","start","dataID","spatial","platform","platformInstruments","GetRegionInfo","SubmitTab","isSubmitting","setSubmitting","validationErrors","getErrorsByTab","submitted","LinearProgressWithLabel","Box","mr","LinearProgress","TabPanel","other","hidden","MetadataForm","changes","saveDisabled","tabIndex","highlightMissingRequireFields","editorInfo","loggedInUserCanEditRecord","saveIncompleteRecordModalOpen","isNewRecord","endsWith","loggedInUserID","recordUserID","loggedInUserOwnsRecord","context","editorDataRef","userinfoRef","userDataRef","editorContactsRef","contactsFB","recordFireBase","recordFireBaseObj","getKey","handleSaveClick","userOKedRecordDemotion","recordIsComplete","path","tabProps","Fab","fab","Tabs","scrollButtons","Tab","tabRoot","textAlign","saveUpdateContact","contextType","withStyles","right","ErrorBoundary","hasError","errorInfo","EditContact","contactRef","isFilledEnoughToSave","handleSubmitClick","handleCancelClick","TransferModal","setEmail","transferResult","setTransferResult","isTransferring","setIsTransferring","emailIsValid","RecordItem","commonProps","DraftRecordItem","SubmittedRecordItem","PublishedRecordItem","Reviewer","users","publishModalOpen","unPublishModalOpen","unSubmitModalOpen","transferModalOpen","modalUserID","showRecordTypes","showUsers","recordsFilter","recordCountsByStatus","authUser","regionUsersRaw","transferUserNotFound","recordsToShow","draft","recordStatusTranslate","selectedText","handleTransferRecord","bind","cleanArr","Admin","permissionsFirebase","dbRef","updatePermissions","SentryTest","Error","RegionLogo","imgPath","paddingLeft","Pages","exact","BaseLayout","createMuiTheme","main","MuiTextField","MuiSelect","MuiButton","Helmet","sizes","ThemeProvider","maxWidth","media","MediaCard","regionSummary","Card","minHeight","CardActionArea","CardMedia","image","CardContent","maxHeight","RegionSelect","regionCode","regionPath","App","basename","to","location","hostname","dsn","integrations","Integrations","BrowserTracing","tracesSampleRate","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.c2e8547d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/emlTemplate.11e794be.j2\";","// Copying how RA's use colors in their wordpress sites\nconst regions = {\n  pacific: {\n    title: { en: \"CIOOS Pacific\", fr: \"SIOOC Pacifique\" },\n    catalogueTitle: {\n      fr: \"Catalogue de données du SIOOC du Pacifique\",\n      en: \"CIOOS Pacific Data Catalogue\",\n    },\n    colors: { primary: \"#006e90\", secondary: \"#ffc857\" },\n    email: \"info@cioospacific.ca\",\n    catalogueURL: {\n      fr: \"https://catalogue.cioospacific.ca/fr/\",\n      en: \"https://catalogue.cioospacific.ca/\",\n    },\n    introPageText: {\n      en:\n        \"CIOOS Pacific integrates data from Canada’s west coast, from Dixon Entrance to the Strait of Juan de Fuca.\",\n      fr:\n        \"Le CIOOS Pacifique intègre les données de la côte ouest du Canada, de l'entrée Dixon au détroit de Juan de Fuca.\",\n    },\n    showInRegionSelector: true,\n  },\n\n  stlaurent: {\n    title: { en: \"CIOOS St. Lawrence\", fr: \"SIOOC Saint-Laurent\" },\n    catalogueTitle: {\n      fr:\n        \"Catalogue de données de l'Observatoire global du Saint-Laurent (OGSL)\",\n      en: \"St. Lawrence Global Observatory Data Catalogue (SLGO)\",\n    },\n    colors: { primary: \"#00adef\", secondary: \"#00aeef\" },\n    email: \"info@ogsl.ca\",\n    catalogueURL: {\n      fr: \"https://catalogue.ogsl.ca/\",\n      en: \"https://catalogue.ogsl.ca/en/\",\n    },\n    introPageText: {\n      en:\n        \"SLGO integrates data from the St. Lawrence, from the Great Lakes to the Gulf.\",\n      fr:\n        \"L'Observatoire global du Saint-Laurent intègre les données du Saint-Laurent, des Grands Lacs jusqu'au Golfe\",\n    },\n    showInRegionSelector: true,\n  },\n  atlantic: {\n    title: { en: \"CIOOS Atlantic\", fr: \"SIOOC Atlantique\" },\n    catalogueTitle: {\n      fr: \"Catalogue de données du SIOOC du Atlantic\",\n      en: \"CIOOS Atlantic Data Catalogue\",\n    },\n    colors: { primary: \"#19222b\", secondary: \"#e55162\" },\n    email: \"info@cioosatlantic.ca\",\n    catalogueURL: {\n      fr: \"https://cioosatlantic.ca/ckan/fr/\",\n      en: \"https://cioosatlantic.ca/ckan/\",\n    },\n    introPageText: {\n      en:\n        \"CIOOS Atlantic integrates data from Canada’s east coast, from Labrador to Bay of Fundy.\",\n      fr:\n        \"Le CIOOS Atlantique intègre les données de la côte est du Canada, du Labrador à la baie de Fundy.\",\n    },\n    showInRegionSelector: true,\n  },\n\n  iys: {\n    title: { en: \"IYS\", fr: \"IYS\" },\n    catalogueTitle: {\n      fr: \"Catalogue de données du IYS\",\n      en: \"IYS Data Catalogue\",\n    },\n    colors: { primary: \"#006e90\", secondary: \"#ffc857\" },\n    email: \"iys.data@hakai.org\",\n    catalogueURL: {\n      fr: \"https://iys.hakai.org/dataset/\",\n      en: \"https://iys.hakai.org/dataset/\",\n    },\n    introPageText: { en: \"\", fr: \"\" },\n    showInRegionSelector: false,\n  },\n  hakai: {\n    title: { en: \"Hakai\", fr: \"Hakai\" },\n    catalogueTitle: {\n      fr: \"Catalogue de données du Hakai\",\n      en: \"Hakai Data Catalogue\",\n    },\n    colors: { primary: \"#aa2025\", secondary: \"#459be2\" },\n    email: \"info@hakai.org\",\n    catalogueURL: {\n      fr: \"https://catalogue.hakai.org/\",\n      en: \"https://catalogue.hakai.org/\",\n    },\n    introPageText: { en: \"\", fr: \"\" },\n    showInRegionSelector: false,\n  },\n  test: {\n    title: { en: \"Test\", fr: \"Test\" },\n    catalogueTitle: {\n      fr: \"Catalogue de données du Test\",\n      en: \"Test Data Catalogue\",\n    },\n    colors: { primary: \"#fcba03\", secondary: \"#2518ad\" },\n    email: \"info@hakai.org\",\n    catalogueURL: {\n      fr: \"https://example.com/\",\n      en: \"https://example.com/\",\n    },\n    introPageText: { en: \"This is a test region\", fr: \"\" },\n    showInRegionSelector: false,\n  },\n};\n\nexport default regions;\n","import firebase from \"firebase/app\";\nimport \"firebase/database\";\nimport \"firebase/auth\";\nimport \"firebase/functions\";\nimport \"firebase/firestore\";\n\nconst deployedOnTestSserver = process.env.REACT_APP_DEV_DEPLOYMENT;\n\nconst productionDB = \"https://cioos-metadata-form.firebaseio.com\";\nconst devDB = \"https://cioos-metadata-form-dev.firebaseio.com\";\n\nconst config = {\n  apiKey: \"AIzaSyAdlELZS5Lbea5NquotMT8amwO-Lc_7ogc\",\n  authDomain: \"cioos-metadata-form.firebaseapp.com\",\n  databaseURL:\n    process.env.NODE_ENV === \"production\" && !deployedOnTestSserver\n      ? productionDB\n      : devDB,\n  projectId: \"cioos-metadata-form\",\n  storageBucket: \"cioos-metadata-form.appspot.com\",\n  messagingSenderId: \"646114203434\",\n  appId: \"1:646114203434:web:bccceadc5144270f98f053\",\n};\n\nfirebase.initializeApp(config);\n\nexport default firebase;\n","import firebase from \"./firebase\";\n\nconst provider = new firebase.auth.GoogleAuthProvider();\n\nprovider.setCustomParameters({ promt: \"select_account\" });\n\nexport const auth = firebase.auth();\n\nexport const signInWithGoogle = () => auth.signInWithPopup(provider);\n","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nconst spanInLanguage = (lang) => ({ children }) => {\n  const { language } = useParams();\n  return language === lang && <>{children}</>;\n};\n\nexport const En = spanInLanguage(\"en\");\nexport const Fr = spanInLanguage(\"fr\");\n\n/* \n  This component can be used with attributes only, eg\n  <I18n en=\"boat\" fr=\"bateau\"/>\n\n  Or as a container for the <En> and <Fr> tags\n\n  Eg:\n\n  <I18n>\n    <En>rabbit</En>\n    <Fr>lapin</Fr>\n  </I18n>\n*/\n\nexport const I18n = (props) => {\n  const { en, fr } = props;\n  const { language = \"en\" } = useParams();\n\n  // If this component used via attributes\n  if (en || fr) {\n    if (en && fr) return language === \"en\" ? en : fr;\n    // eslint-disable-next-line no-console\n    console.error(\"Tag missing french or english!\");\n    return null;\n  }\n\n  if (Array.isArray(props.children) && props.children.length !== 2) {\n    // eslint-disable-next-line no-console\n    console.error(props, \"Tag missing french or english!\");\n  }\n\n  return props.children;\n};\n","import { Component } from \"react\";\n\nclass FormClassTemplate extends Component {\n  constructor() {\n    super();\n    this.listenerRefs = [];\n  }\n\n  componentDidUpdate(prevProps) {\n    const { match } = this.props;\n    // Refresh data when region changes via the URL\n\n    if (match.params.region !== prevProps.match.params.region) {\n      this.unsubscribeAndCloseListeners();\n      this.componentDidMount();\n    }\n  }\n\n  componentWillUnmount() {\n    // fixes error Can't perform a React state update on an unmounted component\n    this.unsubscribeAndCloseListeners();\n  }\n\n  unsubscribeAndCloseListeners() {\n    if (this.unsubscribe) this.unsubscribe();\n    if (this.listenerRefs.length) {\n      this.listenerRefs.forEach((ref) => ref.off());\n    }\n  }\n}\nexport default FormClassTemplate;\n","import React, { createContext } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport * as Sentry from \"@sentry/react\";\nimport { auth } from \"../auth\";\nimport firebase from \"../firebase\";\nimport FormClassTemplate from \"../components/Pages/FormClassTemplate\";\n\nexport const UserContext = createContext({ user: null, authIsLoading: false });\n\nclass UserProvider extends FormClassTemplate {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: null,\n      authIsLoading: false,\n      admins: [],\n      reviewers: [],\n      isReviewer: false,\n      loggedIn: false,\n    };\n  }\n\n  componentDidMount = () => {\n    const { match } = this.props;\n\n    const { region } = match.params;\n    this.setState({ authIsLoading: true });\n    this.unsubscribe = auth.onAuthStateChanged((userAuth) => {\n      if (userAuth) {\n        const { displayName, email, uid } = userAuth;\n\n        Sentry.configureScope((scope) => {\n          scope.setUser({\n            email,\n            username: email,\n          });\n        });\n\n        firebase\n          .database()\n          .ref(region)\n          .child(\"users\")\n          .child(uid)\n          .child(\"userinfo\")\n          .update({ displayName, email });\n\n        const permissionsRef = firebase\n          .database()\n          .ref(region)\n          .child(`permissions`);\n\n        permissionsRef.on(\"value\", (permissionsFB) => {\n          const permissions = permissionsFB.toJSON();\n\n          const admins = permissions?.admins || \"\";\n          const reviewers = permissions?.reviewers || \"\";\n\n          const isAdmin = admins.includes(email);\n          const isReviewer = reviewers.includes(email);\n\n          this.setState({\n            admins,\n            reviewers,\n            isAdmin,\n            isReviewer,\n            loggedIn: true,\n          });\n        });\n        this.listenerRefs.push(permissionsRef);\n      } else {\n        this.setState({\n          loggedIn: false,\n          authIsLoading: false,\n        });\n      }\n      this.setState({ user: userAuth, authIsLoading: false });\n    });\n  };\n\n  render() {\n    const { children } = this.props;\n    const translate = firebase.functions().httpsCallable(\"translate\");\n    const regenerateXMLforRecord = firebase\n      .functions()\n      .httpsCallable(\"regenerateXMLforRecord\");\n    const downloadRecord = firebase.functions().httpsCallable(\"downloadRecord\");\n\n    return (\n      <UserContext.Provider\n        value={{\n          ...this.state,\n          translate,\n          regenerateXMLforRecord,\n          downloadRecord,\n        }}\n      >\n        {children}\n      </UserContext.Provider>\n    );\n  }\n}\n\nexport default withRouter(UserProvider);\n","import React, { useContext } from \"react\";\n\nimport { useParams, useLocation, useHistory } from \"react-router-dom\";\n\nimport clsx from \"clsx\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport {\n  ExitToApp,\n  Contacts,\n  ListAlt,\n  AccountCircle,\n  ChevronLeft,\n  ChevronRight,\n  RateReview,\n  SupervisorAccount,\n  Menu,\n  AssignmentTurnedIn,\n} from \"@material-ui/icons\";\n\nimport {\n  Drawer,\n  Avatar,\n  AppBar,\n  Toolbar,\n  CssBaseline,\n  Typography,\n  Divider,\n  IconButton,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Select,\n  Tooltip,\n  MenuItem,\n} from \"@material-ui/core\";\nimport regions from \"../regions\";\nimport { auth, signInWithGoogle } from \"../auth\";\n\nimport { En, Fr, I18n } from \"./I18n\";\n\nimport { UserContext } from \"../providers/UserProvider\";\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexGrow: 1,\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: 36,\n  },\n  languageSelector: {\n    \"&:before\": {\n      borderColor: \"white\",\n    },\n    \"&:hover:not(.Mui-disabled):before\": {\n      borderColor: \"white\",\n    },\n    color: \"white\",\n    borderColor: \"white\",\n    marginRight: theme.spacing(2),\n  },\n  hide: {\n    display: \"none\",\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    whiteSpace: \"nowrap\",\n  },\n  drawerOpen: {\n    width: drawerWidth,\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  drawerClose: {\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    overflowX: \"hidden\",\n    width: theme.spacing(7) + 1,\n    [theme.breakpoints.up(\"sm\")]: {\n      width: theme.spacing(9) + 1,\n    },\n  },\n  toolbar: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-end\",\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n}));\n\nexport default function MiniDrawer({ children }) {\n  const history = useHistory();\n\n  const classes = useStyles();\n  const theme = useTheme();\n\n  const {\n    user,\n    isReviewer: userIsReviewer,\n    isAdmin: userIsAdmin,\n    authIsLoading,\n  } = useContext(UserContext);\n\n  let { language = \"en\", region = \"region-select\" } = useParams();\n\n  if (![\"en\", \"fr\"].includes(language)) language = \"en\";\n\n  // This component may be displayed before the region is selected\n  if (!Object.keys(regions).includes(region)) region = \"\";\n\n  const { pathname } = useLocation();\n\n  const pathWithoutLang = pathname\n    .split(\"/\")\n    .map((e) => e)\n    .slice(2)\n    .join(\"/\");\n\n  const baseURL = `/${language}/${region}`;\n\n  // if region not set, keep drawer closed\n  const [open, setOpen] = React.useState(Boolean(region));\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  const translations = {\n    home: <I18n en=\"Home\" fr=\"Accueil\" />,\n    new: <I18n en=\"Metadata Editor\" fr=\"Éditeur de méta-données\" />,\n    contacts: <I18n en=\"Contacts\" fr=\"Contacts\" />,\n    saved: <I18n en=\"My Records\" fr=\"Enregistrements\" />,\n    published: <I18n en=\"Published Records\" fr=\"Dossiers publiés\" />,\n    review: <I18n en=\"Review submissions\" fr=\"Examen des soumissions\" />,\n    admin: <I18n en=\"Admin\" fr=\"Admin\" />,\n    signIn: <I18n en=\"Sign in\" fr=\"Se Connecter\" />,\n    logout: <I18n en=\"Logout\" fr=\"Déconnexion\" />,\n  };\n  const topBarBackgroundColor = region\n    ? regions[region].colors.primary\n    : // CIOOS national \"dominant colour\" from branding doc\n      \"#52a79b\";\n\n  // add some text to indicate connected to dev d\n  const usingDevDatabase =\n    process.env.REACT_APP_DEV_DEPLOYMENT ||\n    process.env.NODE_ENV === \"development\";\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar\n        position=\"fixed\"\n        className={clsx(classes.appBar, {\n          [classes.appBarShift]: open,\n        })}\n      >\n        <Toolbar\n          style={{\n            backgroundColor: topBarBackgroundColor,\n            alignItems: \"end\",\n          }}\n        >\n          {region && (\n            <IconButton\n              aria-label=\"open drawer\"\n              onClick={handleDrawerOpen}\n              edge=\"start\"\n              className={clsx(classes.menuButton, {\n                [classes.hide]: open,\n              })}\n            >\n              <Menu />\n            </IconButton>\n          )}\n          <Typography\n            variant=\"h5\"\n            noWrap\n            style={{\n              marginLeft: \"10px\",\n              marginBottom: \"10px\",\n              flex: 1,\n              color: \"white\",\n            }}\n          >\n            <I18n>\n              <En>Metadata Entry Tool</En>\n              <Fr>Outil de saisie de métadonnées</Fr>\n            </I18n>\n          </Typography>\n          <div style={{ marginLeft: \"auto\" }}>\n            <img\n              src={`${process.env.PUBLIC_URL}/cioos_website_top_banner_${language}.png`}\n              alt=\"CIOOS/SIOOC\"\n              width={350}\n              style={{ verticalAlign: \"bottom\", paddingRight: \"15px\" }}\n            />\n\n            <Select\n              color=\"primary\"\n              className={classes.languageSelector}\n              value={language}\n              onChange={(e) =>\n                history.push(`/${e.target.value}/${pathWithoutLang}`)\n              }\n            >\n              <MenuItem value=\"en\">EN</MenuItem>\n              <MenuItem value=\"fr\">FR</MenuItem>\n            </Select>\n          </div>\n        </Toolbar>\n      </AppBar>\n      {region && (\n        <Drawer\n          variant=\"permanent\"\n          className={clsx(classes.drawer, {\n            [classes.drawerOpen]: open,\n            [classes.drawerClose]: !open,\n          })}\n          classes={{\n            paper: clsx({\n              [classes.drawerOpen]: open,\n              [classes.drawerClose]: !open,\n            }),\n          }}\n        >\n          <div className={classes.toolbar}>\n            <IconButton onClick={handleDrawerClose}>\n              {theme.direction === \"rtl\" ? <ChevronRight /> : <ChevronLeft />}\n            </IconButton>\n          </div>\n\n          {user && (\n            <ListItem key=\"userInfo\">\n              <ListItemIcon>\n                <Avatar src={user.photoURL} />\n              </ListItemIcon>\n              <ListItemText primary={user.displayName} />\n            </ListItem>\n          )}\n          <Divider />\n          <List>\n            {!user && region && (\n              <Tooltip\n                placement=\"right-start\"\n                title={open ? \"\" : translations.signIn}\n              >\n                <ListItem\n                  disabled={authIsLoading}\n                  button\n                  key=\"Sign in\"\n                  onClick={async () => {\n                    await signInWithGoogle();\n                    history.push(pathname);\n                  }}\n                >\n                  <ListItemIcon>\n                    <AccountCircle />\n                  </ListItemIcon>\n                  <ListItemText primary={translations.signIn} />\n                </ListItem>\n              </Tooltip>\n            )}\n            {user && region && (\n              <>\n                <Tooltip\n                  placement=\"right-start\"\n                  title={open ? \"\" : translations.saved}\n                >\n                  <ListItem\n                    button\n                    key=\"My Records\"\n                    onClick={() => history.push(`${baseURL}/submissions`)}\n                  >\n                    <ListItemIcon>\n                      <ListAlt />\n                    </ListItemIcon>\n                    <ListItemText primary={translations.saved} />\n                  </ListItem>\n                </Tooltip>\n                <Tooltip\n                  placement=\"right-start\"\n                  title={open ? \"\" : translations.saved}\n                >\n                  <ListItem\n                    button\n                    key=\"Region's Published Records\"\n                    onClick={() => history.push(`${baseURL}/published`)}\n                  >\n                    <ListItemIcon>\n                      <AssignmentTurnedIn />\n                    </ListItemIcon>\n                    <ListItemText primary={translations.published} />\n                  </ListItem>\n                </Tooltip>\n\n                <Tooltip\n                  placement=\"right-start\"\n                  title={open ? \"\" : translations.contacts}\n                >\n                  <ListItem\n                    button\n                    key=\"Contacts\"\n                    onClick={() => history.push(`${baseURL}/contacts`)}\n                  >\n                    <ListItemIcon disabled>\n                      <Contacts />\n                    </ListItemIcon>\n                    <ListItemText primary={translations.contacts} />\n                  </ListItem>\n                </Tooltip>\n\n                {userIsReviewer && (\n                  <Tooltip\n                    placement=\"right-start\"\n                    title={open ? \"\" : translations.review}\n                  >\n                    <ListItem\n                      button\n                      key=\"Review\"\n                      onClick={() => history.push(`${baseURL}/reviewer`)}\n                    >\n                      <ListItemIcon>\n                        <RateReview />\n                      </ListItemIcon>\n                      <ListItemText primary={translations.review} />\n                    </ListItem>\n                  </Tooltip>\n                )}\n                {userIsAdmin && (\n                  <Tooltip\n                    placement=\"right-start\"\n                    title={open ? \"\" : translations.admin}\n                  >\n                    <ListItem\n                      button\n                      key=\"Admin\"\n                      onClick={() => history.push(`${baseURL}/admin`)}\n                    >\n                      <ListItemIcon>\n                        <SupervisorAccount />\n                      </ListItemIcon>\n                      <ListItemText primary={translations.admin} />\n                    </ListItem>\n                  </Tooltip>\n                )}\n              </>\n            )}\n\n            {user && (\n              <Tooltip\n                placement=\"right-start\"\n                title={open ? \"\" : translations.logout}\n              >\n                <ListItem\n                  button\n                  key=\"Logout\"\n                  onClick={() =>\n                    auth.signOut().then(() => history.push(baseURL))\n                  }\n                >\n                  <ListItemIcon>\n                    <ExitToApp />\n                  </ListItemIcon>\n                  <ListItemText primary={translations.logout} />\n                </ListItem>\n              </Tooltip>\n            )}\n          </List>\n          <Divider />\n          {usingDevDatabase && <h5>Connected to development database</h5>}\n        </Drawer>\n      )}\n      <main className={classes.content}>\n        <div className={classes.toolbar} />\n        {children}\n      </main>\n    </div>\n  );\n}\n","export function deepCopy(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\nexport function deepEquals(obj1, obj2) {\n  return JSON.stringify(obj1) === JSON.stringify(obj2);\n}\n/*\nConvert firebase to javascript, mostly just used to get real array elements\n*/\nexport function firebaseToJSObject(input) {\n  if (!input) return null;\n  const out = deepCopy(input);\n  Object.keys(out).forEach((key) => {\n    if (typeof out[key] === \"object\" && Object.keys(out[key])[0] === \"0\") {\n      out[key] = Object.entries(out[key]).map(([, v]) => v);\n    }\n\n    //  special case\n    if (input.keywords)\n      out.keywords = {\n        en: Object.values(input.keywords.en || {}),\n        fr: Object.values(input.keywords.fr || {}),\n      };\n  });\n  if (out.contacts) {\n    Object.values(out.contacts).forEach((contact) => {\n      if (contact.role) {\n        // eslint-disable-next-line no-param-reassign\n        contact.role = Object.values(contact.role);\n      }\n    });\n  }\n\n  return out;\n}\n\n// runs firebaseToJSObject on each child object\nexport const multipleFirebaseToJSObject = (multiple) => {\n  return Object.entries(multiple || {}).reduce((acc, [k, v]) => {\n    acc[k] = firebaseToJSObject(deepCopy(v));\n    return acc;\n  }, {});\n};\n\nconst replacer = (key, value) => {\n  if (typeof value === \"string\") {\n    return value.trim();\n  }\n  return value;\n};\n\n// used to trim all extra whitespace from strings in the record\nexport const trimStringsInObject = (obj) =>\n  JSON.parse(JSON.stringify(obj, replacer));\n\nexport function getRecordFilename(record) {\n  return `${record.title[record.language].slice(\n    0,\n    30\n  )}_${record.identifier.slice(0, 5)}`\n    .trim()\n    .toLowerCase()\n    .replace(/[^a-zA-Z0-9]/g, \"_\");\n}\nexport const unique = (arr) => [...new Set(arr)];\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Modal from \"@material-ui/core/Modal\";\nimport { En, Fr, I18n } from \"../I18n\";\n\nfunction rand() {\n  return Math.round(Math.random() * 20) - 10;\n}\n\nfunction getModalStyle() {\n  const top = 50 + rand();\n  const left = 50 + rand();\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: \"absolute\",\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\nexport default function SimpleModal({\n  open,\n  onClose,\n  onAccept,\n  modalQuestion,\n}) {\n  const classes = useStyles();\n  // getModalStyle is not a pure function, we roll the style only on the first render\n  const [modalStyle] = React.useState(getModalStyle);\n\n  return (\n    <div>\n      <Modal\n        open={open}\n        onClose={onClose}\n        aria-labelledby=\"simple-modal-title\"\n        aria-describedby=\"simple-modal-description\"\n        onKeyPress={(e) => {\n          if (e.key === \"y\") {\n            onClose();\n            onAccept();\n          }\n        }}\n      >\n        <div style={modalStyle} className={classes.paper}>\n          <h2 id=\"simple-modal-title\">\n            {modalQuestion ? (\n              modalQuestion\n            ) : (\n              <I18n>\n                <En>Are you sure?</En>\n                <Fr>Vous êtes sûr ?</Fr>\n              </I18n>\n            )}\n          </h2>\n          <button\n            type=\"button\"\n            onClick={() => {\n              onClose();\n              onAccept();\n            }}\n          >\n            <I18n>\n              <En>Yes</En>\n              <Fr>Oui</Fr>\n            </I18n>\n          </button>\n          <button type=\"button\" onClick={onClose}>\n            <I18n>\n              <En>No</En>\n              <Fr>Non</Fr>\n            </I18n>\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","import { v4 as uuidv4 } from \"uuid\";\n\nimport { deepCopy } from \"./misc\";\n\nconst blankRecord = {\n  title: { en: \"\", fr: \"\" },\n  abstract: { en: \"\", fr: \"\" },\n  keywords: { en: [], fr: [] },\n  eov: [],\n  progress: \"\",\n  distribution: [],\n  dateStart: null,\n  dateEnd: null,\n  map: { north: \"\", south: \"\", east: \"\", west: \"\", polygon: \"\" },\n  verticalExtentMin: \"\",\n  verticalExtentMax: \"\",\n  datePublished: null,\n  dateRevised: null,\n  recordID: \"\",\n  instruments: [],\n  platformID: \"\",\n  platformDescription: \"\",\n  language: \"\",\n  license: \"\",\n  contacts: [],\n  status: \"\",\n  comment: \"\",\n  limitations: \"\",\n  lastEditedBy: {},\n  category: \"\",\n  verticalExtentDirection: \"\",\n  datasetIdentifier: \"\",\n  noPlatform: false,\n  filename: \"\",\n  organization: \"\",\n  timeFirstPublished: \"\",\n};\n\nfunction getBlankRecord() {\n  const record = deepCopy(blankRecord);\n  record.identifier = uuidv4();\n  record.created = new Date().toISOString();\n  return record;\n}\n\nexport default getBlankRecord;\n","import { v4 as uuidv4 } from \"uuid\";\nimport firebase from \"../firebase\";\n\nimport getBlankRecord from \"./blankRecord\";\nimport { firebaseToJSObject, getRecordFilename } from \"./misc\";\n\nexport async function cloneRecord(\n  recordID,\n  sourceUserID,\n  destinationUserID,\n  region\n) {\n  const sourceUserRecordsRef = firebase\n    .database()\n    .ref(region)\n    .child(\"users\")\n    .child(sourceUserID)\n    .child(\"records\");\n\n  const record = (\n    await sourceUserRecordsRef.child(recordID).once(\"value\")\n  ).val();\n\n  // reset record details\n  record.recordID = \"\";\n  record.status = \"\";\n  record.lastEditedBy = {};\n  record.created = new Date().toISOString();\n  record.filename = \"\";\n  record.timeFirstPublished = \"\";\n\n  if (record.title.en) record.title.en = `${record.title.en} (Copy)`;\n  if (record.title.fr) record.title.fr = `${record.title.fr} (Copte)`;\n  record.identifier = uuidv4();\n  record.created = new Date().toISOString();\n\n  const destinationUserRecordsRef = firebase\n    .database()\n    .ref(region)\n    .child(\"users\")\n    .child(destinationUserID)\n    .child(\"records\");\n\n  destinationUserRecordsRef.push(record);\n}\n\nexport function loadRegionRecords(regionRecords, statusFilter) {\n  const regionUsers = regionRecords.toJSON();\n  const records = [];\n\n  Object.entries(regionUsers).forEach(([userID, user]) => {\n    if (user.records) {\n      Object.entries(user.records).forEach(([key, record]) => {\n        if (statusFilter.includes(record.status))\n          records.push({\n            ...{ ...getBlankRecord(), ...firebaseToJSObject(record) },\n            userinfo: { ...user.userinfo, userID },\n            key,\n          });\n      });\n    }\n  });\n\n  return records;\n}\n\nexport async function submitRecord(region, userID, key, status, record) {\n  const recordRef = firebase\n    .database()\n    .ref(region)\n    .child(\"users\")\n    .child(userID)\n    .child(\"records\")\n    .child(key);\n\n  await recordRef.child(\"status\").set(status);\n  if (status === \"published\")\n    await recordRef.child(\"timeFirstPublished\").set(new Date().toISOString());\n\n  if (record && !record.filename) {\n    const filename = getRecordFilename(record);\n    recordRef.child(\"filename\").set(filename);\n  }\n}\n\nexport function deleteRecord(region, userID, key) {\n  return (\n    firebase\n      .database()\n      .ref(region)\n      .child(\"users\")\n      // this can be any user id\n      .child(userID)\n      .child(\"records\")\n      .child(key)\n      .remove()\n  );\n}\n\nexport async function transferRecord(\n  transferEmail,\n  recordID,\n  sourceUserID,\n  region\n) {\n  const regionUsersRef = firebase.database().ref(region).child(\"users\");\n  const regionUsers = (await regionUsersRef.once(\"value\")).val();\n\n  // get mapping like [[\"sdfssf32fwwfe\",\"sdf@sdef.ca\"]]\n  const userIDToEmailMapping = Object.entries(\n    regionUsers\n  ).map(([userID, userData]) => [userID, userData?.userinfo?.email]);\n\n  const userMatch = userIDToEmailMapping.find(\n    ([, email]) =>\n      email.toLowerCase().trim() === transferEmail.toLowerCase().trim()\n  );\n  if (userMatch) {\n    const [matchingUserID] = userMatch;\n\n    const recordRef = regionUsersRef\n      .child(sourceUserID)\n      .child(\"records\")\n      .child(recordID);\n\n    const record = (await recordRef.once(\"value\")).val();\n\n    const newRecordRef = await regionUsersRef\n      .child(matchingUserID)\n      .child(\"records\")\n      .push(record);\n    const newRecordID = newRecordRef.key;\n\n    record.recordID = newRecordID;\n    newRecordRef.update(record);\n    if (newRecordID) {\n      await recordRef.remove();\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function returnRecordToDraft(region, userID, key) {\n  return firebase\n    .database()\n    .ref(region)\n    .child(\"users\")\n    .child(userID)\n    .child(\"records\")\n    .child(key)\n    .child(\"status\")\n    .set(\"\");\n}\n","import templatePath from \"./emlTemplate.j2\";\nconst nunjucks = require(\"nunjucks\");\n\n// get the full goos eov name here\n// function translateEOV() {}\nfunction arrayOverlap(a, b) {\n  return a.some((e) => b.includes(e));\n}\nfunction getFirstName(x) {\n  const names = x.split(\" \");\n  if (names) return names.slice(-1);\n}\n\nfunction getLastName(x) {\n  const names = x.split(\" \");\n  if (names) return names[0];\n}\nfunction translateRole(isoRoles) {\n  console.log(isoRoles);\n  return isoRoles;\n}\n\nasync function recordToEML(record) {\n  nunjucks.configure({ autoescape: true, web: true });\n\n  const templateXML = await fetch(templatePath).then((t) => t.text());\n\n  return nunjucks.renderString(templateXML, {\n    record,\n    getFirstName,\n    getLastName,\n    translateRole,\n    arrayOverlap,\n  });\n}\n\nexport default recordToEML;\n","import validator from \"validator\";\n\nexport const validateEmail = (email) => !email || validator.isEmail(email);\nexport const validateURL = (url) => !url || validator.isURL(url);\n\n// See https://stackoverflow.com/a/48524047/7416701\nexport const doiRegexp = /^10.\\d{4,9}\\/[-._;()/:A-Z0-9]+$/i;\n\nconst validateLatitude = (num) => num >= -90 && num <= 90;\n\nconst deepCompare = (obj1, obj2) =>\n  JSON.parse(JSON.stringify(obj1) === JSON.stringify(obj2));\n\nconst validateLongitude = (num) => num >= -360 && num <= 360;\n\nconst polygonIsValid = (polygon) => {\n  // eg 48,-128 56,-133 56,-147 48,-128\n  const coordinates = polygon.split(\" \").map((c) => c.split(\",\"));\n  if (coordinates.length < 2) return false;\n  if (!deepCompare(coordinates[0], coordinates[coordinates.length - 1]))\n    return false;\n\n  return (\n    coordinates.filter(\n      ([lat, lon]) =>\n        validateLongitude(parseFloat(lon)) && validateLatitude(parseFloat(lat))\n    ).length === coordinates.length\n  );\n};\n\nconst contactIsFilled = (contact) =>\n  Boolean(\n    contact.role && contact.role.length && (contact.orgName || contact.indName)\n  );\n\n// required fields and  a function to validate each\nconst validators = {\n  title: {\n    validation: (val) => val && val.en && val.fr,\n    tab: \"dataID\",\n    error: {\n      en: \"Missing title in French or English\",\n      fr: \"Titre manquant en français ou en anglais\",\n    },\n  },\n  abstract: {\n    validation: (val) => val && val.en && val.fr,\n    tab: \"dataID\",\n    error: {\n      en: \"Missing abstract in French or English\",\n      fr: \"Abrégé manquant en français ou en anglais\",\n    },\n  },\n  keywords: {\n    validation: (val) => val && (val.en.length || val.fr.length),\n    tab: \"dataID\",\n    error: {\n      en: \"At least one keyword is required\",\n      fr: \"Au moins un mot clé est requis\",\n    },\n  },\n  eov: {\n    validation: (val) => val && val.length,\n    tab: \"dataID\",\n    error: {\n      en: \"At least one EOV is required\",\n      fr: \"Au moins un variable essentielle océanique est requise\",\n    },\n  },\n  datasetIdentifier: {\n    validation: (val) => !val || doiRegexp.test(val),\n    optional: true,\n    tab: \"dataID\",\n    error: {\n      en: \"Invalid DOI\",\n      fr: \"DOI non valide\",\n    },\n  },\n  progress: {\n    tab: \"dataID\",\n    validation: (val) => val,\n    error: {\n      en: \"Please select a dataset status\",\n      fr: \"L'information spatiale est manquante\",\n    },\n  },\n  language: {\n    tab: \"dataID\",\n    validation: (val) => val,\n    error: {\n      en: \"Language field is missing\",\n      fr: \"Le champ de langue est vide\",\n    },\n  },\n  license: {\n    tab: \"dataID\",\n    validation: (val) => val,\n    error: {\n      en: \"Please select a license for the dataset\",\n      fr: \"Veuillez sélectionner une licence pour le jeu de données\",\n    },\n  },\n  map: {\n    error: {\n      en: \"Spatial information is missing\",\n      fr: \"L'information géographique est manquante\",\n    },\n    tab: \"spatial\",\n    validation: (val) => {\n      if (!val) return false;\n      const north = parseFloat(val.north);\n      const south = parseFloat(val.south);\n      const east = parseFloat(val.east);\n      const west = parseFloat(val.west);\n      const { polygon } = val;\n\n      return (\n        (north &&\n          south &&\n          east &&\n          west &&\n          north >= south &&\n          east >= west &&\n          validateLatitude(north) &&\n          validateLatitude(south) &&\n          validateLongitude(east) &&\n          validateLongitude(west)) ||\n        (polygon && polygonIsValid(polygon))\n      );\n    },\n  },\n\n  verticalExtentMin: {\n    tab: \"spatial\",\n\n    validation: (val) => val,\n    error: {\n      en: \"Missing Vertical Extent Min\",\n      fr: \"Étendue verticale manquante Min\",\n    },\n  },\n  verticalExtentMax: {\n    tab: \"spatial\",\n    validation: (val) => val,\n    error: {\n      en: \"Missing Vertical Extent Max\",\n      fr: \"Étendue verticale manquante Max\",\n    },\n  },\n  verticalExtentDirection: {\n    tab: \"spatial\",\n    validation: (val) => val,\n    error: {\n      en: \"Missing Vertical Extent Direction\",\n      fr: \"Direction de l'étendue verticale manquante\",\n    },\n  },\n  // at least one contact has to have a role and a org or individual name\n  contacts: {\n    tab: \"contacts\",\n    validation: (val) =>\n      val &&\n      // every contact must have a role and name\n      val.every(contactIsFilled) &&\n      val.every(\n        (contact) =>\n          validateEmail(contact.indEmail) &&\n          validateEmail(contact.orgEmail) &&\n          validateURL(contact.orgURL)\n      ) &&\n      val\n        .filter(contactIsFilled)\n        .find((contact) => contact.role.includes(\"custodian\")) &&\n      val\n        .filter(contactIsFilled)\n        .find((contact) => contact.role.includes(\"owner\")),\n    error: {\n      en:\n        \"Every contact must have at least one role checked, and  'Data contact' or 'Metadata contact' must be added to at least one contact. Email addresses must be in the form of user@example.com and URLs must be valid.\",\n      fr:\n        \"Assurez-vous que chaque contact a un rôle qui lui est attribué. Assurez-vous également d'avoir une personne ressource pour les métadonnées et un personne ressource pour les données. Les adresses e-mail doivent être sous la forme de user@example.com et les URL doivent être valides.\",\n    },\n  },\n  distribution: {\n    tab: \"resources\",\n    validation: (val) =>\n      Array.isArray(val) &&\n      val.filter((dist) => dist.name && dist.url && validator.isURL(dist.url))\n        .length,\n\n    error: {\n      en:\n        \"Must have at least one resource. If a URL is included it must be valid.\",\n      fr:\n        \"Doit avoir au moins une ressource. Si une URL est incluse, elle doit être valide.\",\n    },\n  },\n  platformID: {\n    tab: \"platform\",\n    validation: (val, record) => record.noPlatform || val,\n    error: {\n      en: \"Missing platform ID\",\n      fr: \"ID de la plateforme manquant\",\n    },\n  },\n  platformDescription: {\n    tab: \"platform\",\n    validation: (val, record) => record.noPlatform || val,\n    error: {\n      en: \"Missing platform description\",\n      fr: \"Description de la plateforme manquante\",\n    },\n  },\n  instruments: {\n    tab: \"platformInstruments\",\n    validation: (val, record) =>\n      record.noPlatform ||\n      (val && val.filter((instrument) => instrument.id).length),\n    error: {\n      en: \"At least one instrument is required if there is a platform\",\n      fr: \"Au moins un instrument est requis s'il y a une plateforme\",\n    },\n  },\n};\nexport const validateField = (record, fieldName) => {\n  const valueToValidate = record[fieldName];\n  // if no validator funciton exists, then it is not a required field\n  const validationFunction =\n    (validators[fieldName] && validators[fieldName].validation) || (() => true);\n\n  return validationFunction && validationFunction(valueToValidate, record);\n};\n\nexport const getErrorsByTab = (record) => {\n  const fields = Object.keys(validators);\n  const invalidFields = fields.filter((field) => !validateField(record, field));\n  const fieldErrorInfo = invalidFields.map((field) => {\n    const { error, tab } = validators[field];\n    return { error, tab };\n  });\n\n  return fieldErrorInfo.reduce((acc, { error, tab }) => {\n    if (!acc[tab]) acc[tab] = [];\n    acc[tab].push(error);\n    return acc;\n  }, {});\n};\n\nexport const percentValid = (record) => {\n  const fields = Object.keys(validators);\n  const numTotalRequired = fields.filter((field) => !validators[field].optional)\n    .length;\n\n  const validFieldsRequired = fields.filter(\n    (field) => !validators[field].optional && validateField(record, field)\n  );\n  const numValidRequired = validFieldsRequired.length;\n\n  return numValidRequired / numTotalRequired;\n};\nexport const recordIsValid = (record) => {\n  const optionalFieldsAreValid = Object.entries(validators)\n    .filter(([, validatorObject]) => validatorObject.optional)\n    .every(([field]) => validateField(record, field));\n\n  return percentValid(record) === 1 && optionalFieldsAreValid;\n};\n","import React from \"react\";\nimport TimeAgo from \"javascript-time-ago\";\nimport { useParams } from \"react-router-dom\";\n\nimport en from \"javascript-time-ago/locale/en\";\nimport fr from \"javascript-time-ago/locale/fr\";\nimport { En, Fr, I18n } from \"../I18n\";\n\nconst LastEdited = ({ dateStr }) => {\n  const { language } = useParams();\n\n  if (!dateStr) return null;\n\n  let timeAgo;\n\n  if (language === \"en\") {\n    TimeAgo.addLocale(en);\n    timeAgo = new TimeAgo(\"en-US\");\n  } else {\n    TimeAgo.addLocale(fr);\n    timeAgo = new TimeAgo(\"fr-FR\");\n  }\n\n  return (\n    <span>\n      <I18n>\n        <En>Last edited</En>\n        <Fr>Dernière modification</Fr>\n      </I18n>{\" \"}\n      {timeAgo.format(new Date(dateStr))}\n      {\". \"}\n    </span>\n  );\n};\n\nexport default LastEdited;\n","import React from \"react\";\nimport { Description, AssignmentTurnedIn, Drafts } from \"@material-ui/icons\";\nimport { Tooltip } from \"@material-ui/core\";\nimport { I18n } from \"../I18n\";\n\nconst RecordStatusIcon = ({ status }) => {\n  if (status === \"published\")\n    return (\n      <Tooltip title={<I18n en=\"Published\" fr=\"Publié\" />}>\n        <AssignmentTurnedIn color=\"primary\" />\n      </Tooltip>\n    );\n  if (status === \"submitted\")\n    return (\n      <Tooltip title={<I18n en=\"Submitted\" fr=\"Soumis\" />}>\n        <Description color=\"secondary\" />\n      </Tooltip>\n    );\n  if (status === \"\")\n    return (\n      <Tooltip title={<I18n en=\"Draft\" fr=\"Brouillon\" />}>\n        <Drafts color=\"action\" />\n      </Tooltip>\n    );\n  return null;\n};\nexport default RecordStatusIcon;\n","import React, { useContext, useState } from \"react\";\nimport FileSaver from \"file-saver\";\n\nimport {\n  ListItem,\n  ListItemText,\n  Avatar,\n  ListItemAvatar,\n  Tooltip,\n  ListItemSecondaryAction,\n  IconButton,\n  CircularProgress,\n  MenuItem,\n  Menu,\n} from \"@material-ui/core\";\nimport {\n  FileCopy,\n  Delete,\n  Publish,\n  Eject,\n  Visibility,\n  CloudDownload,\n  TransferWithinAStation,\n  OpenInNew,\n  Edit,\n} from \"@material-ui/icons\";\nimport { useParams } from \"react-router-dom\";\nimport { getRecordFilename } from \"../../utils/misc\";\nimport recordToEML from \"../../utils/recordToEML\";\nimport { recordIsValid, percentValid } from \"../../utils/validate\";\nimport { I18n, En, Fr } from \"../I18n\";\nimport LastEdited from \"./LastEdited\";\nimport RecordStatusIcon from \"./RecordStatusIcon\";\nimport { UserContext } from \"../../providers/UserProvider\";\nimport regions from \"../../regions\";\n\nconst MetadataRecordListItem = ({\n  record,\n  onViewEditClick,\n  onDeleteClick,\n  onCloneClick,\n  onSubmitClick,\n  showAuthor,\n  showDeleteAction,\n  showSubmitAction,\n  showPublishAction,\n  showUnPublishAction,\n  showUnSubmitAction,\n  showViewAction,\n  showEditAction,\n  showPercentComplete,\n  showCloneAction,\n  onUnSubmitClick,\n  onUnPublishClick,\n  showDownloadButton = true,\n  showTransferButton,\n  onTransferClick,\n}) => {\n  const { language, region } = useParams();\n  const showCatalogueURL = record.status === \"published\";\n  const { downloadRecord } = useContext(UserContext);\n  const [isLoading, setIsLoading] = useState({ downloadXML: false });\n  const catalogueURL = `${regions[region].catalogueURL[language]}dataset/ca-cioos_${record.identifier}`;\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  if (!record.title) {\n    // eslint-disable-next-line no-console\n    console.log(record);\n    return <></>;\n  }\n\n  const isValidRecord =\n    (showSubmitAction || showDownloadButton) && recordIsValid(record);\n\n  const percentValidInt =\n    showPercentComplete && Math.round(percentValid(record) * 100);\n\n  async function handleDownloadRecord(fileType) {\n    // filetype is \n    const extensions={\n      erddap:'_erddap.txt',\n      xml: '.xml',\n      yaml:'.yaml',\n      eml:'_eml.xml'\n    }\n    setIsLoading({ downloadXML: true });\n\n    try {\n      let data;\n      if (fileType === \"eml\") {\n        const emlStr= await recordToEML(record);\n        console.log(emlStr);\n        data = [emlStr];\n      } else {\n        const res = await downloadRecord({ record, fileType });\n        data = Object.values(res.data.message);\n      }\n      const mimeTypes = {\n        xml: \"application/xml\",\n        yaml: \"application/x-yaml\",\n        eml: \"application/xml\",\n        erddap: \"application/xml\",\n      };\n      const blob = new Blob(data, {\n        type: `${mimeTypes[fileType]};charset=utf-8`,\n      });\n\n      FileSaver.saveAs( \n        blob,\n        `${getRecordFilename(record)}${extensions[fileType]}`\n      );\n      setIsLoading({ downloadXML: false });\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.log(e);\n      setIsLoading({ downloadXML: false });\n    }\n  }\n\n  return (\n    <ListItem key={record.key}>\n      <ListItemAvatar>\n        <IconButton onClick={onViewEditClick}>\n          <Avatar>\n            <RecordStatusIcon status={record.status} />\n          </Avatar>\n        </IconButton>\n      </ListItemAvatar>\n      <ListItemText\n        primary={<div style={{ width: \"80%\" }}>{record.title?.[language]}</div>}\n        secondaryTypographyProps={{ variant: \"body2\" }}\n        secondary={\n          <span>\n            {showAuthor && (\n              <span>\n                <I18n en=\"Author\" fr=\"Auteur\" />: {record.userinfo?.displayName}{\" \"}\n                {record.userinfo?.email}\n              </span>\n            )}\n\n            <span style={{ display: \"block\" }}>\n              <LastEdited dateStr={record.created} />\n\n              {showPercentComplete && (\n                <I18n>\n                  <En>{percentValidInt}% complete</En>\n                  <Fr>{percentValidInt}% Achevée</Fr>\n                </I18n>\n              )}\n            </span>\n\n            <span style={{ display: \"block\" }}>UUID: {record.identifier}</span>\n          </span>\n        }\n      />\n      <ListItemSecondaryAction>\n        {showViewAction && (\n          <Tooltip title={<I18n en=\"View\" fr=\"Vue\" />}>\n            <span>\n              <IconButton\n                onClick={onViewEditClick}\n                edge=\"end\"\n                aria-label=\"view record\"\n              >\n                <Visibility />\n              </IconButton>\n            </span>\n          </Tooltip>\n        )}\n        {showEditAction && (\n          <Tooltip\n            title={<I18n en=\"Edit record\" fr=\"Éditer un enregistrement\" />}\n          >\n            <span>\n              <IconButton\n                onClick={onViewEditClick}\n                edge=\"end\"\n                aria-label=\"Edit record\"\n              >\n                <Edit />\n              </IconButton>\n            </span>\n          </Tooltip>\n        )}\n\n        {showDeleteAction && (\n          <Tooltip title={<I18n en=\"Delete\" fr=\"Supprimer\" />}>\n            <span>\n              <IconButton\n                onClick={onDeleteClick}\n                edge=\"end\"\n                aria-label=\"delete\"\n              >\n                <Delete />\n              </IconButton>\n            </span>\n          </Tooltip>\n        )}\n        {showPublishAction && (\n          <Tooltip title={<I18n en=\"Publish\" fr=\"Publier\" />}>\n            <span>\n              <IconButton\n                onClick={onSubmitClick}\n                edge=\"end\"\n                aria-label=\"delete\"\n              >\n                <Publish />\n              </IconButton>\n            </span>\n          </Tooltip>\n        )}\n        {showSubmitAction &&\n          (record.status === \"\" ? (\n            <Tooltip\n              title={\n                <>\n                  {isValidRecord ? (\n                    <I18n en=\"Submit for review\" fr=\"Soumettre pour examen\" />\n                  ) : (\n                    <I18n\n                      en=\"Can't submit incomplete or invalid record\"\n                      fr=\"Impossible de soumettre un enregistrement incomplet ou non valide\"\n                    />\n                  )}\n                </>\n              }\n            >\n              <span>\n                <IconButton\n                  onClick={onSubmitClick}\n                  edge=\"end\"\n                  aria-label=\"submit\"\n                  disabled={!isValidRecord}\n                >\n                  <Publish />\n                </IconButton>\n              </span>\n            </Tooltip>\n          ) : (\n            <Tooltip\n              title={\n                <I18n\n                  en=\"Return record to draft for editing\"\n                  fr=\"Retourner l'enregistrement au brouillon pour modification\"\n                />\n              }\n            >\n              <span>\n                <IconButton\n                  onClick={onSubmitClick}\n                  edge=\"end\"\n                  aria-label=\"delete\"\n                >\n                  <Eject />\n                </IconButton>\n              </span>\n            </Tooltip>\n          ))}\n        {showUnPublishAction && (\n          <Tooltip title={<I18n en=\"Un-publish\" fr=\"De-Publier\" />}>\n            <span>\n              <IconButton\n                onClick={onUnPublishClick}\n                edge=\"end\"\n                aria-label=\"delete\"\n              >\n                <Eject />\n              </IconButton>\n            </span>\n          </Tooltip>\n        )}\n        {showCloneAction && (\n          <Tooltip title={<I18n en=\"Clone\" fr=\"Cloner\" />}>\n            <span>\n              <IconButton onClick={onCloneClick} edge=\"end\" aria-label=\"clone\">\n                <FileCopy />\n              </IconButton>\n            </span>\n          </Tooltip>\n        )}\n        {showUnSubmitAction && (\n          <Tooltip\n            title={<I18n en=\"Return to draft\" fr=\"Revenir au brouillon\" />}\n          >\n            <span>\n              <IconButton\n                onClick={onUnSubmitClick}\n                edge=\"end\"\n                aria-label=\"delete\"\n              >\n                <Eject />\n              </IconButton>\n            </span>\n          </Tooltip>\n        )}\n\n        {showDownloadButton && (\n          <Tooltip title={<I18n en=\"Download\" fr=\"Download\" />}>\n            <span>\n              <IconButton\n                aria-label=\"more\"\n                id=\"long-button\"\n                aria-controls=\"long-menu\"\n                aria-expanded={open ? \"true\" : undefined}\n                aria-haspopup=\"true\"\n                onClick={handleClick}\n                disabled={!isValidRecord}\n              >\n                {isLoading.downloadXML ? (\n                  <CircularProgress />\n                ) : (\n                  <CloudDownload />\n                )}\n              </IconButton>\n              <Menu\n                id=\"long-menu\"\n                MenuListProps={{\n                  \"aria-labelledby\": \"long-button\",\n                }}\n                anchorEl={anchorEl}\n                open={open}\n                onClose={handleClose}\n                PaperProps={{\n                  style: {\n                    // maxHeight: ITEM_HEIGHT * 4.5,\n                    width: \"20ch\",\n                  },\n                }}\n              >\n                <MenuItem\n                  key=\"xml\"\n                  onClick={() => {\n                    handleDownloadRecord(\"xml\");\n                    handleClose();\n                  }}\n                >\n                  ISO 19115 XML\n                </MenuItem>\n                <MenuItem\n                  key=\"yaml\"\n                  onClick={() => {\n                    handleDownloadRecord(\"yaml\");\n                    handleClose();\n                  }}\n                >\n                  YAML\n                </MenuItem>\n                <MenuItem\n                  key=\"erddap\"\n                  onClick={() => {\n                    handleDownloadRecord(\"erddap\");\n                    handleClose();\n                  }}\n                >\n                  ERDDAP snippet\n                </MenuItem>\n                <MenuItem\n                  key=\"eml\"\n                  onClick={() => {\n                    handleDownloadRecord(\"eml\");\n                    handleClose();\n                  }}\n                >\n                  EML for OBIS IPT\n                </MenuItem>\n              </Menu>\n            </span>\n          </Tooltip>\n        )}\n        {showTransferButton && (\n          <Tooltip\n            title={\n              <I18n en=\"Transfer to user\" fr=\"Transfert vers l'utilisateur\" />\n            }\n          >\n            <span>\n              <IconButton\n                onClick={onTransferClick}\n                edge=\"end\"\n                aria-label=\"transfer\"\n              >\n                <TransferWithinAStation />\n              </IconButton>\n            </span>\n          </Tooltip>\n        )}\n\n        <Tooltip\n          title={\n            <I18n\n              en=\"Open catalogue entry in new window\"\n              fr=\"Ouvrir l'entrée dans le catalogue dans une nouvelle fenêtre\"\n            />\n          }\n        >\n          <span>\n            <IconButton\n              disabled={!showCatalogueURL}\n              onClick={() => {\n                const win = window.open(catalogueURL, \"_blank\");\n                win.focus();\n              }}\n              edge=\"end\"\n              aria-label=\"transfer\"\n            >\n              <OpenInNew />\n            </IconButton>\n          </span>\n        </Tooltip>\n      </ListItemSecondaryAction>\n    </ListItem>\n  );\n};\n\nexport default MetadataRecordListItem;\n","import React from \"react\";\n\nimport { Typography, List, CircularProgress, Button } from \"@material-ui/core\";\n\nimport { Add } from \"@material-ui/icons\";\nimport FormClassTemplate from \"./FormClassTemplate\";\n\nimport firebase from \"../../firebase\";\nimport { auth } from \"../../auth\";\n\nimport { Fr, En, I18n } from \"../I18n\";\nimport { multipleFirebaseToJSObject } from \"../../utils/misc\";\nimport SimpleModal from \"../FormComponents/SimpleModal\";\n\nimport regions from \"../../regions\";\nimport {\n  cloneRecord,\n  deleteRecord,\n  submitRecord,\n  returnRecordToDraft,\n} from \"../../utils/firebaseRecordFunctions\";\nimport MetadataRecordListItem from \"../FormComponents/MetadataRecordListItem\";\n\nclass Submissions extends FormClassTemplate {\n  constructor(props) {\n    super(props);\n    this.state = {\n      records: {},\n      deleteModalOpen: false,\n      submitModalOpen: false,\n      withdrawModalOpen: false,\n      modalKey: \"\",\n      modalRecord: null,\n      loading: false,\n    };\n  }\n\n  async loadRecords() {\n    this.setState({ loading: true });\n    const { match } = this.props;\n    const { region } = match.params;\n\n    this.unsubscribe = auth.onAuthStateChanged((user) => {\n      if (user) {\n        const recordsRef = firebase\n          .database()\n          .ref(region)\n          .child(\"users\")\n          .child(user.uid)\n          .child(\"records\");\n\n        recordsRef.on(\"value\", (records) => {\n          const allUsersRecords = records.toJSON();\n\n          this.setState({\n            records: multipleFirebaseToJSObject(allUsersRecords),\n            loading: false,\n          });\n        });\n\n        this.listenerRefs.push(recordsRef);\n      }\n    });\n  }\n\n  async componentDidMount() {\n    this.loadRecords();\n  }\n\n  editRecord(key) {\n    const { match, history } = this.props;\n    const { language, region } = match.params;\n    const { currentUser } = auth;\n    history.push(`/${language}/${region}/${currentUser.uid}/${key}`);\n  }\n\n  handleSubmitRecord(key) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (auth.currentUser && key) {\n      return submitRecord(region, auth.currentUser.uid, key, \"submitted\");\n    }\n    return false;\n  }\n\n  // Make record a draft again\n  withdrawRecord(key) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (auth.currentUser && key) {\n      return returnRecordToDraft(region, auth.currentUser.uid, key);\n    }\n    return false;\n  }\n\n  cloneRecord(recordID) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (auth.currentUser) {\n      cloneRecord(recordID, auth.currentUser.uid, auth.currentUser.uid, region);\n    }\n  }\n\n  deleteRecord(key) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (auth.currentUser) {\n      return deleteRecord(region, auth.currentUser.uid, key);\n    }\n    return false;\n  }\n\n  toggleModal(modalName, state, key = \"\", record = null) {\n    this.setState({ modalKey: key, [modalName]: state, modalRecord: record });\n  }\n\n  render() {\n    const { match, history } = this.props;\n\n    const { language, region } = match.params;\n\n    const {\n      deleteModalOpen,\n      withdrawModalOpen,\n      modalKey,\n      modalRecord,\n      submitModalOpen,\n      records,\n      loading,\n    } = this.state;\n\n    const recordDateSort = (a, b) =>\n      new Date(b[1].created) - new Date(a[1].created);\n\n    return (\n      <div>\n        <SimpleModal\n          open={deleteModalOpen}\n          onClose={() => this.toggleModal(\"deleteModalOpen\", false)}\n          onAccept={() => this.deleteRecord(modalKey)}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n        />\n        <SimpleModal\n          open={submitModalOpen}\n          onClose={() => this.toggleModal(\"submitModalOpen\", false)}\n          onAccept={() => this.handleSubmitRecord(modalKey, modalRecord)}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n        />\n        <SimpleModal\n          open={withdrawModalOpen}\n          onClose={() => this.toggleModal(\"withdrawModalOpen\", false)}\n          onAccept={() => this.withdrawRecord(modalKey)}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n        />\n\n        <Typography variant=\"h5\">\n          <I18n>\n            <En>My Records</En>\n            <Fr>Mes dossiers</Fr>\n          </I18n>\n        </Typography>\n\n        {loading ? (\n          <CircularProgress />\n        ) : (\n          <span>\n            <div>\n              <Typography>\n                <I18n>\n                  <En>\n                    To start a new record, click on \"New Record\" and begin\n                    adding information. To continue working on a record, select\n                    it from the list below. Once your record is completed and\n                    information has been provided for all mandatory fields, you\n                    can submit your record for review by clicking the \"Submit\n                    for review\" icon to the right of your record title. The\n                    record will not be published until it is reviewed and\n                    approved by {regions[region].title[language]} staff.\n                  </En>\n                  <Fr>\n                    Afin de soumettre vos métadonnées, cliquez sur « Nouvel\n                    enregistrement » et ajoutez-y les informations demandées. Si\n                    vous désirez reprendre la saisie d’un formulaire déjà\n                    entamé, sélectionnez-le dans la liste ci-dessous. Lorsque\n                    les informations sont saisies pour tous les champs\n                    obligatoires, vous pouvez soumettre vos métadonnées pour\n                    validation en cliquant sur l’icône « soumettre pour\n                    validation ». Vos métadonnées seront publiées lorsqu’elles\n                    auront été validées et approuvées par un professionel du{\" \"}\n                    {regions[region].title[language]}.\n                  </Fr>\n                </I18n>\n              </Typography>\n\n              <div style={{ marginTop: \"10px\" }}>\n                <Button\n                  startIcon={<Add />}\n                  onClick={() => history.push(`/${language}/${region}/new`)}\n                >\n                  <I18n en=\"New Record\" fr=\"Nouvel enregistrement\" />\n                </Button>\n              </div>\n\n              <List>\n                {Object.entries(records || {})\n                  .sort(recordDateSort)\n                  .map(([key, record]) => {\n                    const { status, title } = record;\n\n                    if (!(title?.en || !title?.fr)) return null;\n\n                    return (\n                      <MetadataRecordListItem\n                        key={key}\n                        record={record}\n                        showCloneAction\n                        onCloneClick={() => this.cloneRecord(key)}\n                        showDeleteAction\n                        onDeleteClick={() =>\n                          this.toggleModal(\"deleteModalOpen\", true, key)\n                        }\n                        showEditAction\n                        showPercentComplete\n                        onViewEditClick={() => this.editRecord(key)}\n                        showSubmitAction\n                        onSubmitClick={() => {\n                          if (status === \"\")\n                            this.toggleModal(\n                              \"submitModalOpen\",\n                              true,\n                              key,\n                              record\n                            );\n                          else this.toggleModal(\"withdrawModalOpen\", true, key);\n                        }}\n                      />\n                    );\n                  })}\n              </List>\n            </div>\n\n            {!records && (\n              <Typography>\n                <I18n>\n                  <En>You don't have any records.</En>\n                  <Fr>Vous n'avez pas d'historique de saisie.</Fr>\n                </I18n>\n              </Typography>\n            )}\n          </span>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Submissions;\n","import React from \"react\";\nimport { Typography, List, CircularProgress } from \"@material-ui/core\";\nimport firebase from \"../../firebase\";\nimport MetadataRecordListItem from \"../FormComponents/MetadataRecordListItem\";\nimport { auth } from \"../../auth\";\nimport {\n  cloneRecord,\n  loadRegionRecords,\n} from \"../../utils/firebaseRecordFunctions\";\nimport { Fr, En, I18n } from \"../I18n\";\nimport FormClassTemplate from \"./FormClassTemplate\";\n\nclass Published extends FormClassTemplate {\n  constructor(props) {\n    super(props);\n    this.state = {\n      records: {},\n      deleteModalOpen: false,\n      submitModalOpen: false,\n      withdrawModalOpen: false,\n      modalKey: \"\",\n      modalRecord: null,\n      loading: false,\n    };\n  }\n\n  async loadRecords() {\n    this.setState({ loading: true });\n    const { match } = this.props;\n    const { region } = match.params;\n\n    this.unsubscribe = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        const usersRef = firebase.database().ref(region).child(\"users\");\n\n        usersRef.on(\"value\", (regionRecordsFB) => {\n          const records = loadRegionRecords(regionRecordsFB, [\"published\"]);\n          this.setState({ records, loading: false });\n        });\n        this.listenerRefs.push(usersRef);\n      }\n    });\n  }\n\n  async componentDidMount() {\n    this.loadRecords();\n  }\n\n  editRecord(key, userID) {\n    const { match, history } = this.props;\n    const { language, region } = match.params;\n    history.push(`/${language}/${region}/${userID}/${key}`);\n  }\n\n  // user ID is that of the record owner, not the editor\n  handleCloneRecord(recordID, sourceUserID) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (auth.currentUser) {\n      cloneRecord(recordID, sourceUserID, auth.currentUser.uid, region);\n    }\n  }\n\n  render() {\n    const { match } = this.props;\n    const { region } = match.params;\n    const { records, loading } = this.state;\n\n    const recordDateSort = (a, b) => new Date(b.created) - new Date(a.created);\n\n    return (\n      <div>\n        <Typography variant=\"h5\">\n          <I18n>\n            <En>Published Records</En>\n            <Fr>Dossiers publiés</Fr>\n          </I18n>\n        </Typography>\n\n        {loading ? (\n          <CircularProgress />\n        ) : (\n          <span>\n            <div>\n              <Typography>\n                <I18n>\n                  <En>These are the published records in your region.</En>\n                  <Fr>\n                    Il s'agit des enregistrements publiés dans votre région.\n                  </Fr>\n                </I18n>\n              </Typography>\n\n              <List>\n                {records && records.length\n                  ? records\n                      .sort(recordDateSort)\n                      .filter((record) => record.status === \"published\")\n                      .map((record) => {\n                        const { title } = record;\n\n                        if (!(title?.en || !title?.fr)) return null;\n\n                        return (\n                          <MetadataRecordListItem\n                            record={record}\n                            key={record.key}\n                            onViewEditClick={() =>\n                              this.editRecord(\n                                record.key,\n                                record.userinfo?.userID\n                              )\n                            }\n                            showDeleteAction={false}\n                            showUnSubmitAction={false}\n                            showCloneAction\n                            showAuthor\n                            showViewAction\n                            onCloneClick={() =>\n                              this.handleCloneRecord(\n                                record.key,\n                                record.userinfo?.userID,\n                                region\n                              )\n                            }\n                          />\n                        );\n                      })\n                  : \"\"}\n              </List>\n            </div>\n\n            {!records && (\n              <Typography>\n                <I18n>\n                  <En>There are no published records.</En>\n                  <Fr>Il n'y a pas de documents publiés.</Fr>\n                </I18n>\n              </Typography>\n            )}\n          </span>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Published;\n","import firebase from \"../firebase\";\n\nexport async function cloneContact(region, userID, contactID) {\n  const contactsRef = firebase\n    .database()\n    .ref(region)\n    .child(\"users\")\n    .child(userID)\n    .child(\"contacts\");\n\n  const contact = (await contactsRef.child(contactID).once(\"value\")).val();\n\n  if (contact.indName) contact.indName += \" (Copy)\";\n  else contact.orgName += \" (Copy)\";\n  contactsRef.push(contact);\n}\n\nexport function deleteContact(region, userID, contactID) {\n  return firebase\n    .database()\n    .ref(region)\n    .child(\"users\")\n    .child(userID)\n    .child(\"contacts\")\n    .child(contactID)\n    .remove();\n}\n\nexport async function newContact(region, userID) {\n  const newNode = await firebase\n    .database()\n    .ref(region)\n    .child(\"users\")\n    .child(userID)\n    .child(\"contacts\")\n    .push({});\n\n  return newNode.key;\n}\n","import React from \"react\";\n\nimport { I18n } from \"../I18n\";\n\nfunction getContactTitleFromNames(contact) {\n  const { orgName, indName } = contact;\n  const titleParts = [orgName, indName];\n\n  return titleParts\n    .filter((e) => e)\n    .map((e) => e.trim())\n    .filter((e) => e)\n    .join(\" - \");\n}\n\nfunction ContactTitle({ contact }) {\n  return (\n    getContactTitleFromNames(contact) || (\n      <I18n en=\"New contact\" fr=\"Nouveau contact\" />\n    )\n  );\n}\n\nexport default ContactTitle;\n","import React from \"react\";\nimport {\n  Typography,\n  IconButton,\n  Button,\n  List,\n  ListItem,\n  ListItemText,\n  Avatar,\n  Grid,\n  ListItemSecondaryAction,\n  ListItemAvatar,\n  CircularProgress,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  Add,\n  Edit,\n  Delete,\n  PermContactCalendar,\n  FileCopy,\n} from \"@material-ui/icons\";\nimport firebase from \"../../firebase\";\nimport { auth } from \"../../auth\";\nimport {\n  newContact,\n  cloneContact,\n  deleteContact,\n} from \"../../utils/firebaseContactFunctions\";\nimport ContactTitle from \"../FormComponents/ContactTitle\";\nimport { I18n, En, Fr } from \"../I18n\";\nimport SimpleModal from \"../FormComponents/SimpleModal\";\nimport FormClassTemplate from \"./FormClassTemplate\";\n\nclass Contacts extends FormClassTemplate {\n  constructor(props) {\n    super(props);\n    this.state = {\n      contacts: {},\n      modalOpen: false,\n      modalKey: \"\",\n      loading: false,\n    };\n  }\n\n  async componentDidMount() {\n    this.setState({ loading: true });\n\n    const { match } = this.props;\n    const { region } = match.params;\n\n    this.unsubscribe = auth.onAuthStateChanged((user) => {\n      if (user) {\n        const contactsRef = firebase\n          .database()\n          .ref(region)\n          .child(\"users\")\n          .child(user.uid)\n          .child(\"contacts\");\n        contactsRef.on(\"value\", (records) =>\n          this.setState({ contacts: records.toJSON(), loading: false })\n        );\n        this.listenerRefs.push(contactsRef);\n      }\n    });\n  }\n\n  handleDeleteContact(contactID) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (auth.currentUser) {\n      deleteContact(region, auth.currentUser.uid, contactID);\n    }\n  }\n\n  handleCloneContact(contactID) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (auth.currentUser) {\n      return cloneContact(region, auth.currentUser.uid, contactID);\n    }\n    return false;\n  }\n\n  addContact() {\n    const { history, match } = this.props;\n    const { language, region } = match.params;\n\n    // render different page with 'save' button?\n    if (auth.currentUser) {\n      newContact(region, auth.currentUser.uid).then((key) => {\n        history.push(`/${language}/${region}/contacts/${key}`);\n      });\n    }\n  }\n\n  editContact(key) {\n    const { history, match } = this.props;\n    const { language, region } = match.params;\n\n    // render different page with 'save' button?\n    history.push(`/${language}/${region}/contacts/${key}`);\n  }\n\n  toggleModal(state, key = \"\") {\n    this.setState({ modalKey: key, modalOpen: state });\n  }\n\n  render() {\n    const { modalOpen, modalKey, loading, contacts } = this.state;\n    return (\n      <Grid container direction=\"column\" spacing={3}>\n        <Grid item xs>\n          <SimpleModal\n            open={modalOpen}\n            onClose={() => this.toggleModal(false)}\n            onAccept={() => this.handleDeleteContact(modalKey)}\n            aria-labelledby=\"simple-modal-title\"\n            aria-describedby=\"simple-modal-description\"\n          />\n\n          <Typography variant=\"h5\">\n            <I18n>\n              <En>Contacts</En>\n              <Fr>Contacts</Fr>\n            </I18n>\n          </Typography>\n        </Grid>\n        <Grid item xs>\n          <Typography>\n            <I18n>\n              <En>\n                Create contacts here that you can reuse in multiple metadata\n                records.\n              </En>\n              <Fr>\n                Ajoutez ici les personnes ressources que vous désirez réutiliser\n                pour la saisie d’autres métadonnées.\n              </Fr>\n            </I18n>\n          </Typography>\n        </Grid>\n\n        <Grid item xs>\n          <Button startIcon={<Add />} onClick={() => this.addContact()}>\n            <I18n>\n              <En>Add contact</En>\n              <Fr>ajouter un contact</Fr>\n            </I18n>\n          </Button>\n        </Grid>\n\n        {loading ? (\n          <CircularProgress />\n        ) : (\n          <>\n            <Grid item xs>\n              {contacts && Object.keys(contacts).length ? (\n                <div>\n                  <Typography>\n                    <I18n>\n                      <En>These are your contacts</En>\n                      <Fr>Ce sont vos contacts</Fr>\n                    </I18n>\n                  </Typography>\n                  <List>\n                    {Object.entries(contacts).map(([key, val]) => (\n                      <ListItem\n                        key={key}\n                        button\n                        onClick={() => this.editContact(key)}\n                      >\n                        <ListItemAvatar>\n                          <Avatar>\n                            <PermContactCalendar />\n                          </Avatar>\n                        </ListItemAvatar>\n\n                        <ListItemText\n                          primary={<ContactTitle contact={val} />}\n                        />\n                        <ListItemSecondaryAction>\n                          <Tooltip title={<I18n en=\"Edit\" fr=\"Éditer\" />}>\n                            <span>\n                              <IconButton onClick={() => this.editContact(key)}>\n                                <Edit />\n                              </IconButton>\n                            </span>\n                          </Tooltip>\n                          <Tooltip title={<I18n en=\"Clone\" fr=\"Clone\" />}>\n                            <span>\n                              <IconButton\n                                onClick={() => this.handleCloneContact(key)}\n                              >\n                                <FileCopy />\n                              </IconButton>\n                            </span>\n                          </Tooltip>\n                          <Tooltip title={<I18n en=\"Delete\" fr=\"Supprimer\" />}>\n                            <span>\n                              <IconButton\n                                onClick={() => this.toggleModal(true, key)}\n                              >\n                                <Delete />\n                              </IconButton>\n                            </span>\n                          </Tooltip>\n                        </ListItemSecondaryAction>\n                      </ListItem>\n                    ))}\n                  </List>\n                </div>\n              ) : (\n                <Typography>\n                  <I18n>\n                    <En>No contacts submitted yet</En>\n                    <Fr>Aucun contacts n'a encore été soumis</Fr>\n                  </I18n>\n                </Typography>\n              )}\n            </Grid>\n          </>\n        )}\n      </Grid>\n    );\n  }\n}\nexport default Contacts;\n","import React from \"react\";\n\nimport { Typography } from \"@material-ui/core\";\nimport { En, Fr, I18n } from \"../I18n\";\n\nconst Login = () => {\n  return (\n    <div>\n      <Typography>\n        <I18n>\n          <En>\n            Please sign in to access your metadata records. You will need a\n            Google account to login.\n          </En>\n          <Fr>\n            Connectez-vous pour accéder à l'historique de saisie de vos métadonnées.\n            Vous aurez besoin d'un compte Google pour vous connecter.\n          </Fr>\n        </I18n>\n      </Typography>\n    </div>\n  );\n};\n\nexport default Login;\n","import React from \"react\";\n\nimport { Chip } from \"@material-ui/core\";\nimport { I18n } from \"../I18n\";\n\nconst StatusChip = ({ status }) => {\n  let chipText = \"\";\n\n  if (status === \"submitted\") chipText = <I18n en=\"Submitted\" fr=\"Soumis\" />;\n  else if (status === \"published\")\n    chipText = <I18n en=\"Published\" fr=\"Publié\" />;\n  else chipText = <I18n en=\"Draft\" fr=\"Brouillon\" />;\n\n  return (\n    <Chip\n      label={chipText}\n      // color={statusColors[status] || \"default\"}\n      variant=\"outlined\"\n    />\n  );\n};\n\nexport default StatusChip;\n","import React from \"react\";\nimport { Typography } from \"@material-ui/core\";\n\nconst NotFound = () => {\n  return (\n    <div>\n      <Typography variant=\"h5\">Not Found / Non trouvé</Typography>\n    </div>\n  );\n};\n\nexport default NotFound;\n","import React from \"react\";\nimport { Tooltip } from \"@material-ui/core\";\nimport { I18n } from \"../I18n\";\n\nfunction RequiredMark({ passes }) {\n  if (passes)\n    return (\n      <span\n        style={{\n          color: \"green\",\n          fontSize: \"x-large\",\n          position: \"relative\",\n          bottom: \"-4px\",\n        }}\n      >\n        {\" \"}\n        ✓{\" \"}\n      </span>\n    );\n  return (\n    <Tooltip title={<I18n en=\"Required\" fr=\"Obligatoire\" />}>\n      <span\n        style={{\n          color: \"red\",\n          fontSize: \"large\",\n        }}\n      >\n        {\" \"}\n        ✵{\" \"}\n      </span>\n    </Tooltip>\n  );\n}\nexport default RequiredMark;\n","import React from \"react\";\nimport { Typography } from \"@material-ui/core\";\n\nexport const SupplementalText = ({ children }) => (\n  <Typography variant=\"body2\" component=\"div\" style={{ marginTop: \"10px\" }}>\n    {children}\n  </Typography>\n);\nexport const QuestionText = ({ children }) => (\n  <Typography variant=\"body1\" component=\"div\" style={{ marginBottom: \"10px\" }}>\n    {children}\n  </Typography>\n);\nexport const paperClass = {\n  padding: \"10px\",\n  margin: \"20px\",\n  width: \"90%\",\n};\n","import React from \"react\";\n\nimport { Save } from \"@material-ui/icons\";\nimport { Typography, Paper, Grid } from \"@material-ui/core\";\nimport { useParams } from \"react-router-dom\";\n\nimport regions from \"../../regions\";\n\nimport { En, Fr, I18n } from \"../I18n\";\nimport RequiredMark from \"../FormComponents/RequiredMark\";\nimport { paperClass } from \"../FormComponents/QuestionStyles\";\n\nconst StartTab = ({ disabled }) => {\n  const { region } = useParams();\n  const regionInfo = regions[region];\n\n  return (\n    <Grid item xs>\n      <Paper style={paperClass}>\n        {disabled && (\n          <Typography>\n            <I18n>\n              <En>\n                <b>\n                  This form is locked because it has already been published, or\n                  you do not have access to edit it.\n                </b>\n              </En>\n              <Fr>\n                <b>\n                  Ce formulaire est verrouillé car il a déjà été publié ou vous\n                  n'avez pas accès pour le modifier.\n                </b>\n              </Fr>\n            </I18n>\n          </Typography>\n        )}\n        <Typography variant=\"body1\">\n          <I18n>\n            <En>\n              Welcome to the {regionInfo.title.en} Metadata Entry Tool, the\n              first step in making your data discoverable and accessible through\n              CIOOS. This information will be used to create a metadata record\n              for your dataset that will allow it to be searchable through the{\" \"}\n              {regionInfo.catalogueTitle.en}. Please fill out each field with as\n              much detail as possible. The metadata record will help describe\n              this dataset for others to determine if it is relevant for their\n              work and ensure it is interoperable with other databases and\n              systems.\n              <br />\n              <br /> Questions regarding the form can be directed to{\" \"}\n            </En>\n            <Fr>\n              Bienvenue dans l’outil de saisie de métadonnées du{\" \"}\n              {regionInfo.title.fr}! Ceci constitue la première étape pour\n              rendre vos données accessibles et découvrables via notre\n              plateforme. Ces renseignements serviront à créer un enregistrement de \n              métadonnées pour votre jeu de données, facilitant ainsi sa\n              découverte dans le {regionInfo.catalogueTitle.fr} et le rendant\n              interopérable avec d’autres systèmes de diffusion. Veuillez\n              remplir les champs requis de la façon la plus exhaustive possible.\n              <br />\n              <br /> Les questions concernant le formulaire peuvent être\n              adressées à{\" \"}\n            </Fr>\n          </I18n>\n          <a href={`mailto:${regionInfo.email}`}>{regionInfo.email}</a>.\n        </Typography>\n\n        <ul>\n          <li>\n            <I18n>\n              <En>You can save the form once you have filled out a title.</En>\n              <Fr>\n                Vous pouvez enregistrer le formulaire une fois que vous avez\n                saisi un titre.\n              </Fr>\n            </I18n>\n          </li>\n          <li>\n            <En>\n              All fields marked with a <RequiredMark /> are mandatory.\n            </En>\n            <Fr>\n              Tous les champs marqués d'une étoile <RequiredMark /> sont\n              obligatoires.\n            </Fr>\n          </li>\n          <li>\n            <I18n>\n              <En>\n                The form can be saved and completed over time by clicking the{\" \"}\n                <Save /> icon in the bottom right corner. This icon will be\n                greyed out until you have filled in the dataset title in the\n                \"Identification\" section.\n              </En>\n              <Fr>\n                Le formulaire peut être sauvegardé et complété ultérieurement en\n                cliquant sur le bouton <Save /> dans le coin inférieur droit.\n                Cette icône sera grisée jusqu'à ce que vous ayez complété le\n                titre du jeu de données dans la Section « Identification des\n                données ».\n              </Fr>\n            </I18n>\n          </li>\n          <li>\n            <I18n>\n              <En>\n                Some fields can have text in both French and English, though\n                this is only required for the title and the abstract. There is a\n                'Translate' button that will automatically generate text in the\n                other language. This translation is more accurate when there is\n                more text to translate.\n              </En>\n              <Fr>\n                Certains champs peuvent avoir du texte à la fois en français et\n                en anglais, toutefois seules les traductions du titre et de\n                l'abrégé sont réellement requisent. Il y a un Bouton « Traduire\n                » qui générera automatiquement du texte dans l'autre langue.\n                Veuillez noter que cette traduction est plus précise quand il y\n                a plus de texte que moins à traduire.\n              </Fr>\n            </I18n>\n          </li>\n        </ul>\n      </Paper>\n    </Grid>\n  );\n};\n\nexport default StartTab;\n","import React from \"react\";\n\nimport {\n  Checkbox,\n  FormControlLabel,\n  Grid,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\n\nconst CheckBoxList = ({\n  onChange,\n  value = [],\n  name,\n  options,\n  optionLabels = options,\n  optionTooltips = [],\n  disabled,\n  labelSize = 3,\n}) => {\n  // remove array element from array, by value\n  function toggleArrayElement(ele, arr) {\n    if (arr.includes(ele)) return arr.filter((v) => v !== ele);\n    return arr.concat(ele);\n  }\n\n  return (\n    <Grid container direction=\"row\">\n      {options.map((v, i) => {\n        return (\n          <Grid item key={i} xs={labelSize}>\n            <Tooltip title={optionTooltips[i] || \"\"}>\n              <FormControlLabel\n                disabled={disabled}\n                control={\n                  <Checkbox\n                    value={v || []}\n                    name={name}\n                    checked={value.includes(v)}\n                    onChange={(e) => {\n                      const val = e.target.value;\n                      const newCheckedValuesArray = toggleArrayElement(\n                        val,\n                        value\n                      );\n\n                      onChange(newCheckedValuesArray);\n                    }}\n                  />\n                }\n                label={<Typography>{optionLabels[i]}</Typography>}\n              />\n            </Tooltip>\n          </Grid>\n        );\n      })}\n    </Grid>\n  );\n};\n\nexport default CheckBoxList;\n","export const eovList = [\n  \"dissolvedOrganicCarbon\",\n  \"inorganicCarbon\",\n  \"nitrate\",\n  \"nutrients\",\n  \"oxygen\",\n  \"phosphate\",\n  \"potentialDensity\",\n  \"potentialTemperature\",\n  \"pressure\",\n  \"seaIce\",\n  \"seaState\",\n  \"seaSurfaceHeight\",\n  \"seaSurfaceSalinity\",\n  \"seaSurfaceTemperature\",\n  \"seawaterDensity\",\n  \"silicate\",\n  \"speedOfSound\",\n  \"subSurfaceCurrents\",\n  \"subSurfaceSalinity\",\n  \"subSurfaceTemperature\",\n  \"surfaceCurrents\",\n  \"other\",\n];\n\nexport const roleCodes = {\n  custodian: {\n    title: {\n      en: \"Metadata Custodian\",\n      fr: \"Dépositaire des métadonnées\",\n    },\n    text: {\n      en:\n        \"Party that accepts accountability and responsibility for the resource and ensures appropriate care and maintenance of the resource \",\n      fr:\n        \"Partie qui accepte la reddition de comptes et la responsabilité de la ressource et assure le soin et l'entretien appropriés de la ressource \",\n    },\n  },\n  owner: {\n    title: { en: \"Data Owner\", fr: \"Propriétaire des données\" },\n    text: {\n      en: \"Party that owns the resource\",\n      fr: \"Partie propriétaire de la ressource\",\n    },\n    includeInCitation: true,\n  },\n  distributor: {\n    title: { en: \"Distributor\", fr: \"Distributeur\" },\n    text: {\n      en: \"Party who distributes the resource\",\n      fr: \"Partie qui distribue la ressource\",\n    },\n  },\n  author: {\n    title: { en: \"Author\", fr: \"Auteur\" },\n    text: { en: \"Party who authored the resource\" },\n    includeInCitation: true,\n  },\n  coAuthor: {\n    title: { en: \"Coauthor\", fr: \"Co-auteur\" },\n    text: {\n      en: \"Party who jointly authors the resource\",\n      fr: \"Partie qui est l'auteur conjoint de la ressource\",\n    },\n  },\n\n  collaborator: {\n    title: { en: \"Collaborator\", fr: \"Collaborateur\" },\n    text: {\n      en:\n        \"Party who assists with the generation of the resource other than the principal investigator\",\n      fr:\n        \"Partie qui aide à la production de la ressource autre que le chercheur principal\",\n    },\n  },\n  contributor: {\n    title: { en: \"Contributor\", fr: \"Contributeur\" },\n    text: {\n      en: \"Party contributing to the resource\",\n      fr: \"Partie contribuant à la ressource\",\n    },\n  },\n  editor: {\n    title: { en: \"Editor\", fr: \"Éditeur\" },\n    text: {\n      en: \"Party who reviewed or modified the resource to improve the content\",\n      fr:\n        \"Partie qui a examiné ou modifié la ressource pour améliorer le contenu\",\n    },\n  },\n  funder: {\n    title: { en: \"Funder\", fr: \"Fondateur\" },\n    text: {\n      en: \"Party providing monetary support for the resource\",\n      fr: \"Partie fournissant un soutien monétaire pour la ressource\",\n    },\n  },\n  mediator: {\n    title: { en: \"Mediator\", fr: \"Médiateur\" },\n    text: {\n      en:\n        \"A class of entity that mediates access to the resource and for whom the resource is intended or useful \",\n      fr:\n        \"Classe d'entité qui sert de médiateur à l'accès à la ressource et pour laquelle la ressource est destinée ou utile\",\n    },\n  },\n  originator: {\n    title: { en: \"Originator\", fr: \"Initiateur\" },\n    text: {\n      en: \"Party who created the resource\",\n      fr: \"Partie qui a créé la ressource\",\n    },\n    includeInCitation: true,\n  },\n  pointOfContact: {\n    title: { en: \"Point Of Contact\", fr: \"Point de contact\" },\n    text: {\n      en:\n        \"Party who can be contacted for acquiring knowledge about or acquisition of the resource\",\n      fr:\n        \"Partie qui peut être contactée pour acquérir des connaissances sur la ressource ou l'acquisition de la ressource\",\n    },\n  },\n\n  principalInvestigator: {\n    title: { en: \"Principal Investigator\", fr: \"Responsable de recherche\" },\n    text: {\n      en:\n        \"Key party responsible for gathering information and conducting research\",\n      fr:\n        \"Partie clé responsable de la collecte de l'information et de la réalisation de la recherche\",\n    },\n    includeInCitation: true,\n  },\n  processor: {\n    title: { en: \"Processor\", fr: \"Transformateur\" },\n    text: {\n      en:\n        \"Party who has processed the data in a manner such that the resource has been modified\",\n      fr:\n        \"Partie qui a traité les données d'une manière telle que la ressource a été modifiée\",\n    },\n  },\n  publisher: {\n    title: { en: \"Publisher\", fr: \"Editeur\" },\n    text: {\n      en: \"Party who published the resource\",\n      fr: \"Partie qui a publié la ressource\",\n    },\n    includeInCitation:true,\n  },\n  resourceProvider: {\n    title: { en: \"Resource Provider\", fr: \"Fournisseur de ressources\" },\n    text: {\n      en: \"Party that supplies the resource\",\n      fr: \"Partie qui fournit la ressource \",\n    },\n  },\n  rightsHolder: {\n    title: { en: \"Rights Holder\", fr: \"Ayant droit\" },\n    text: {\n      en: \"Party owning or managing rights over the resource \",\n      fr: \"Partie détenant ou gérant des droits sur la ressource\",\n    },\n  },\n  sponsor: {\n    title: { en: \"Sponsor\", fr: \"Commanditaire\" },\n    text: {\n      en: \"Party who speaks for the resource \",\n      fr: \"Parti qui parle pour la ressource\",\n    },\n  },\n  stakeholder: {\n    title: { en: \"Stakeholder\", fr: \"Actionnaire\" },\n    text: {\n      en:\n        \"Party who has an interest in the resource or the use of the resource \",\n      fr:\n        \"Partie qui a un intérêt dans la ressource ou l'utilisation de la ressource\",\n    },\n  },\n};\n\nexport const progressCodes = {\n  onGoing: {\n    title: { en: \"Ongoing\", fr: \"En cours\" },\n    text: {\n      en:\n        \"Data is continually being updated. e.g satellite dataset that continues to be augmented\",\n      fr:\n        \"Les données sont continuellement mises à jour, par exemple un ensemble de données satellite qui continue d'être augmenté\",\n    },\n  },\n\n  historicalArchive: {\n    title: { en: \"Historical Archive\", fr: \"Archives historiques\" },\n    text: {\n      en:\n        \"Data has been stored in an offline storage facility. use to indicate data are archived\",\n      fr:\n        \"Les données ont été stockées dans une installation de stockage hors connexion. Utilisez pour indiquer que les données sont archivées\",\n    },\n  },\n\n  completed: {\n    title: { en: \"Completed\", fr: \"Terminé\" },\n    text: {\n      en:\n        \"Production of the data has been completed \te.g. raw data that is not ongoing, completed model\",\n      fr:\n        \"La production des données a été terminée, p. ex. données brutes qui ne sont pas en cours, modèle terminé\",\n    },\n  },\n};\n\nexport const depthDirections = {\n  heightPositive: { en: \"Depth Positive\", fr: \"Profondeur positive\" },\n  depthPositive: { en: \"Height Positive\", fr: \"Hauteur positive\" },\n};\n","import React, { useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nimport {\n  Grid,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Tooltip,\n} from \"@material-ui/core\";\nimport { ExpandMore } from \"@material-ui/icons\";\n\nimport CheckBoxList from \"./CheckBoxList\";\nimport RequiredMark from \"./RequiredMark\";\n\nimport { En, Fr, I18n } from \"../I18n\";\nimport { roleCodes } from \"../../isoCodeLists\";\n\nimport { QuestionText, SupplementalText } from \"./QuestionStyles\";\n\nconst RolePicker = ({ value, disabled, updateContact }) => {\n  const [expanded, setExpanded] = useState(false);\n  const { language } = useParams();\n  const roleCodeKeys = Object.keys(roleCodes);\n  const roleLabels = Object.values(roleCodes).map(\n    ({ title, includeInCitation }) =>\n      `${title[language]}${includeInCitation ? \"*\" : \"\"}`\n  );\n  const citationRoleText = {\n    en: \"This role is included in the citation.\",\n    fr: \"Ce rôle est inclus dans la citation.\",\n  };\n  const tooltips = Object.values(roleCodes).map(\n    ({ text, includeInCitation }) =>\n      `${text[language]}${\n        includeInCitation ? `.  ${citationRoleText[language]}` : \"\"\n      }`\n  );\n\n  // the first 3 roles are show more prominently\n  const numSpecialRoles = 3;\n\n  const selectOptionIsInExpandedList =\n    (value.role || []).filter(\n      (role) => roleCodeKeys.indexOf(role) > numSpecialRoles - 1\n    ).length > 0;\n\n  return (\n    <Grid item xs>\n      <QuestionText>\n        <I18n>\n          <En>\n            What is the role of this contact? {selectOptionIsInExpandedList}\n          </En>\n          <Fr>Quel est son rôle?</Fr>\n        </I18n>\n        <RequiredMark passes={value.role?.length} />\n        <SupplementalText>\n          {\" \"}\n          <I18n>\n            <En>\n              At least one Metadata Custodian and one Data Owner are required.\n              Multiple roles can be selected for each contact. Expand the list\n              below for additional role. Only starred roles (*) will appear in\n              the citation.\n            </En>\n            <Fr>\n              Au moins un dépositaire de métadonnées et un propriétaire de\n              données sont requis. Plusieurs rôles peuvent être sélectionnés par\n              personne. Si vous avez besoin de rôles plus spécifiques, vous\n              pouvez étendre la liste. Développez la liste ci-dessous pour un\n              rôle supplémentaire. Seuls les rôles marqués d'un astérisque (*)\n              apparaîtront dans la citation.\n            </Fr>\n          </I18n>\n        </SupplementalText>\n      </QuestionText>\n\n      <CheckBoxList\n        value={value.role || []}\n        onChange={updateContact(\"role\")}\n        options={roleCodeKeys.slice(0, numSpecialRoles)}\n        optionLabels={roleLabels.slice(0, numSpecialRoles)}\n        disabled={disabled}\n        optionTooltips={tooltips.slice(0, numSpecialRoles)}\n      />\n\n      <Accordion\n        onChange={() => setExpanded(!expanded)}\n        expanded={expanded || selectOptionIsInExpandedList}\n      >\n        <AccordionSummary\n          expandIcon={\n            <Tooltip title=\"Show/Hide more options\">\n              <ExpandMore />\n            </Tooltip>\n          }\n          aria-controls=\"panel1a-content\"\n          id=\"panel1a-header\"\n        >\n          <I18n>\n            <En>Show/Hide more role options</En>\n            <Fr>Afficher/masquer les rôles</Fr>\n          </I18n>\n        </AccordionSummary>\n        <AccordionDetails>\n          <CheckBoxList\n            value={value.role || []}\n            onChange={updateContact(\"role\")}\n            options={roleCodeKeys.slice(numSpecialRoles)}\n            optionLabels={roleLabels.slice(numSpecialRoles)}\n            disabled={disabled}\n            optionTooltips={tooltips.slice(numSpecialRoles)}\n          />\n        </AccordionDetails>\n      </Accordion>\n    </Grid>\n  );\n};\nexport default RolePicker;\n","import React from \"react\";\n\nimport { TextField, Typography, Grid } from \"@material-ui/core\";\n\nimport { validateEmail, validateURL } from \"../../utils/validate\";\nimport RolePicker from \"./RolePicker\";\nimport { En, Fr, I18n } from \"../I18n\";\n\nimport ContactTitle from \"./ContactTitle\";\nimport { QuestionText } from \"./QuestionStyles\";\n\nconst ContactEditor = ({\n  value,\n  showRolePicker,\n  disabled,\n  updateContact,\n  updateContactEvent,\n}) => {\n  const orgEmailValid = validateEmail(value.orgEmail);\n  const indEmailValid = validateEmail(value.indEmail);\n  const orgURLValid = validateURL(value.orgURL);\n\n  return (\n    <Grid container direction=\"column\" spacing={2}>\n      <Grid item xs>\n        <Typography variant=\"h6\">\n          <ContactTitle contact={value} />\n        </Typography>\n      </Grid>\n      <Grid item xs>\n        {showRolePicker && (\n          <RolePicker\n            value={value}\n            updateContact={updateContact}\n            disabled={disabled}\n          />\n        )}\n        <Grid\n          container\n          direction=\"column\"\n          spacing={1}\n          style={{ marginTop: \"10px\" }}\n        >\n          {/* Organization */}\n          <Grid item xs>\n            <QuestionText>\n              <I18n>\n                <En>Provide any information about the organization</En>\n                <Fr>Identification de l'organisation</Fr>\n              </I18n>\n            </QuestionText>\n          </Grid>\n          <Grid item xs style={{ marginleft: \"10px\" }}>\n            <TextField\n              label={<I18n en=\"Organization name\" fr=\"Nom de l'organisation\" />}\n              value={value.orgName}\n              onChange={updateContactEvent(\"orgName\")}\n              disabled={disabled}\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs>\n            <TextField\n              helperText={\n                !orgURLValid && <I18n en=\"Invalid URL\" fr=\"URL non valide\" />\n              }\n              error={!orgURLValid}\n              label={<I18n en=\"URL\" fr=\"URL\" />}\n              value={value.orgURL}\n              onChange={updateContactEvent(\"orgURL\")}\n              disabled={disabled}\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs>\n            <TextField\n              label={<I18n en=\"Address\" fr=\"Adresse\" />}\n              value={value.orgAdress}\n              onChange={updateContactEvent(\"orgAdress\")}\n              disabled={disabled}\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs>\n            <TextField\n              label={<I18n en=\"City\" fr=\"Ville\" />}\n              value={value.orgCity}\n              onChange={updateContactEvent(\"orgCity\")}\n              disabled={disabled}\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs>\n            <TextField\n              label={<I18n en=\"Country\" fr=\"Pays\" />}\n              value={value.orgCountry}\n              onChange={updateContactEvent(\"orgCountry\")}\n              disabled={disabled}\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs>\n            <TextField\n              helperText={\n                !orgEmailValid && (\n                  <I18n en=\"Invalid email\" fr=\"E-mail non valide\" />\n                )\n              }\n              error={!orgEmailValid}\n              label={<I18n en=\"Email\" fr=\"Courriel\" />}\n              value={value.orgEmail}\n              onChange={updateContactEvent(\"orgEmail\")}\n              fullWidth\n              disabled={disabled}\n            />{\" \"}\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item xs>\n        {/* Individual */}\n        <Typography>\n          <I18n>\n            <En>Provide any information about the individual</En>\n            <Fr>Identification de l'individu</Fr>\n          </I18n>\n        </Typography>\n\n        <Grid\n          container\n          direction=\"column\"\n          spacing={1}\n          style={{ marginTop: \"10px\" }}\n        >\n          <Grid item xs>\n            <TextField\n              label={<I18n en=\"Individual Name\" fr=\"Nom de l'individu\" />}\n              value={value.indName}\n              onChange={updateContactEvent(\"indName\")}\n              disabled={disabled}\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs>\n            <TextField\n              label={<I18n en=\"Position\" fr=\"Poste occupé\" />}\n              value={value.indPosition}\n              onChange={updateContactEvent(\"indPosition\")}\n              disabled={disabled}\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs>\n            <TextField\n              helperText={\n                !indEmailValid && (\n                  <I18n en=\"Invalid email\" fr=\"E-mail non valide\" />\n                )\n              }\n              error={!indEmailValid}\n              label={<I18n en=\"Email\" fr=\"Courriel\" />}\n              value={value.indEmail}\n              onChange={updateContactEvent(\"indEmail\")}\n              disabled={disabled}\n              fullWidth\n            />\n          </Grid>\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default ContactEditor;\n","import React from \"react\";\nimport {\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n  Typography,\n  Tooltip,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { I18n } from \"../I18n\";\n\nconst useStyles = makeStyles(() => ({\n  formControl: {\n    minWidth: 200,\n  },\n  selectEmpty: {},\n}));\n\nconst SelectInput = ({\n  value = \"\",\n  name,\n  options,\n  optionLabels,\n  optionTooltips = [],\n  onChange,\n  disabled,\n  label,\n  fullWidth = true,\n}) => {\n  const classes = useStyles();\n\n  return (\n    <FormControl\n      fullWidth={fullWidth}\n      className={classes.formControl}\n      disabled={disabled}\n    >\n      <Select\n        className={classes.selectEmpty}\n        name={name}\n        fullWidth={fullWidth}\n        value={value}\n        disabled={disabled}\n        displayEmpty\n        onChange={onChange}\n      >\n        <MenuItem value=\"\">\n          <InputLabel id=\"demo-simple-select-label\">\n            <Typography>\n              {label || <I18n en=\"Choose\" fr=\"Choisir\" />}\n            </Typography>\n          </InputLabel>\n        </MenuItem>\n        {options.map((v, i) => (\n          <MenuItem key={v} value={v}>\n            <Tooltip\n              enterDelay={1}\n              title={optionTooltips[i] ? optionTooltips[i] : \"\"}\n            >\n              <div style={{ width: \"100%\" }}>{optionLabels[i]}</div>\n            </Tooltip>\n          </MenuItem>\n        ))}\n      </Select>\n    </FormControl>\n  );\n};\nexport default SelectInput;\n","import React, { useState } from \"react\";\n\nimport { Container, Draggable } from \"react-smooth-dnd\";\n\nimport arrayMove from \"array-move\";\nimport { Delete, DragHandle, FileCopy, Save } from \"@material-ui/icons\";\nimport {\n  List,\n  ListItem,\n  ListItemSecondaryAction,\n  ListItemText,\n  IconButton,\n  Typography,\n  Tooltip,\n  Grid,\n  Paper,\n  Button,\n} from \"@material-ui/core\";\nimport { deepCopy, deepEquals } from \"../../utils/misc\";\nimport { paperClass } from \"./QuestionStyles\";\nimport SelectInput from \"./SelectInput\";\nimport { En, Fr, I18n } from \"../I18n\";\n\nimport ContactTitle from \"./ContactTitle\";\n\nconst emptyContact = {\n  role: [],\n  orgName: \"\",\n  orgEmail: \"\",\n  orgURL: \"\",\n  orgAdress: \"\",\n  orgCity: \"\",\n  orgCountry: \"\",\n  indName: \"\",\n  indPosition: \"\",\n  indEmail: \"\",\n};\n\nconst ContactLeftList = ({\n  contacts,\n  updateContacts,\n  activeContact,\n  setActiveContact,\n  disabled,\n  userContacts,\n  saveToContacts,\n}) => {\n  const [currentContacts, setItems] = useState(contacts);\n\n  if (!deepEquals(currentContacts, contacts)) {\n    setItems(contacts);\n  }\n  //  removedIndex is dragStart\n  //  addedIndex is dragEnd\n  function onDrop({ removedIndex, addedIndex }) {\n    if (removedIndex === activeContact) setActiveContact(addedIndex);\n    else if (addedIndex <= activeContact && removedIndex > activeContact)\n      setActiveContact(activeContact + 1);\n\n    const reorderedContacts = arrayMove(\n      currentContacts,\n      removedIndex,\n      addedIndex\n    );\n\n    updateContacts(reorderedContacts);\n  }\n\n  function removeItem(itemIndex) {\n    updateContacts(contacts.filter((e, index) => index !== itemIndex));\n    if (contacts.length) setActiveContact(contacts.length - 2);\n  }\n  function duplicateContact(contactIndex) {\n    const duplicatedContact = deepCopy(contacts[contactIndex]);\n\n    if (duplicatedContact.indName) duplicatedContact.indName += \" (Copy)\";\n    else duplicatedContact.orgName += \" (Copy)\";\n\n    updateContacts(contacts.concat(duplicatedContact));\n  }\n\n  const contactList = Object.values(userContacts || {});\n\n  function handleAddFromSavedContacts(e) {\n    const index = e.target.value;\n    const { role, ...contact } = contactList[index];\n\n    updateContacts(contacts.concat(deepCopy(contact)));\n    setActiveContact(contacts.length);\n  }\n\n  function handleAddNewContact() {\n    updateContacts(contacts.concat(deepCopy(emptyContact)));\n    setActiveContact(contacts.length);\n  }\n\n  return (\n    <Paper style={paperClass}>\n      <Grid container direction=\"column\" justify=\"flex-start\">\n        <Grid item xs style={{ margin: \"10px\" }}>\n          <Typography>\n            {contacts.length ? (\n              <I18n>\n                <En>Contacts in this record:</En>\n                <Fr>Contacts dans cet enregistrement:</Fr>\n              </I18n>\n            ) : (\n              <I18n>\n                <En>There are no contacts in this record.</En>\n                <Fr>Il n'y a aucun contact dans cet enregistrement.</Fr>\n              </I18n>\n            )}\n          </Typography>\n        </Grid>\n        <Grid item xs>\n          <List>\n            <Container\n              dragHandleSelector=\".drag-handle\"\n              lockAxis=\"y\"\n              onDrop={onDrop}\n            >\n              {contacts.map((contactItem, i) => {\n                return (\n                  <Draggable key={i}>\n                    <ListItem\n                      key={i}\n                      button\n                      onClick={() => setActiveContact(i)}\n                    >\n                      <ListItemText\n                        primary={\n                          <Typography\n                            style={{\n                              fontWeight: activeContact === i ? \"bold\" : \"\",\n                              width: \"80%\",\n                            }}\n                          >\n                            <ContactTitle contact={contactItem} />\n                          </Typography>\n                        }\n                      />\n                      <ListItemSecondaryAction>\n                        <Tooltip\n                          title={\n                            <I18n\n                              en=\"Duplicate contact\"\n                              fr=\"Duplicate contact\"\n                            />\n                          }\n                        >\n                          <span>\n                            <IconButton\n                              onClick={() => duplicateContact(i)}\n                              edge=\"end\"\n                              aria-label=\"clone\"\n                              disabled={disabled}\n                            >\n                              <FileCopy />\n                            </IconButton>\n                          </span>\n                        </Tooltip>\n                        <Tooltip\n                          title={\n                            <I18n\n                              en=\"Remove from this record\"\n                              fr=\"Supprimer de cet enregistrement\"\n                            />\n                          }\n                        >\n                          <span>\n                            <IconButton\n                              onClick={() => removeItem(i)}\n                              edge=\"end\"\n                              aria-label=\"clone\"\n                              disabled={disabled}\n                            >\n                              <Delete />\n                            </IconButton>\n                          </span>\n                        </Tooltip>\n                        <Tooltip\n                          title={\n                            <I18n\n                              en=\"Add to saved contacts\"\n                              fr=\"Ajouter aux contacts enregistrés\"\n                            />\n                          }\n                        >\n                          <span>\n                            <IconButton\n                              onClick={() => {\n                                const contact = deepCopy(contacts[i]);\n\n                                // at this point the contact object could have\n                                // a role field, which shouldn't be saved\n                                delete contact.role;\n\n                                contact.contactID = saveToContacts(contact);\n\n                                setItems(contacts);\n                              }}\n                              disabled={\n                                !(\n                                  contacts[i].orgName?.length ||\n                                  contacts[i].indName?.length\n                                )\n                              }\n                              edge=\"end\"\n                              aria-label=\"clone\"\n                            >\n                              <Save />\n                            </IconButton>\n                          </span>\n                        </Tooltip>\n                        <Tooltip\n                          title={\n                            <I18n en=\"Drag to reorder\" fr=\"Duplicate contact\" />\n                          }\n                        >\n                          <span>\n                            <IconButton\n                              className=\"drag-handle\"\n                              edge=\"end\"\n                              aria-label=\"clone\"\n                              disabled={disabled}\n                            >\n                              <DragHandle />\n                            </IconButton>\n                          </span>\n                        </Tooltip>\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                  </Draggable>\n                );\n              })}\n            </Container>\n          </List>\n        </Grid>\n        <Grid item xs style={{ margin: \"10px\" }}>\n          <Button\n            disabled={disabled}\n            onClick={handleAddNewContact}\n            fullWidth\n            style={{ height: \"56px\", justifyContent: \"emptyContact\" }}\n          >\n            <Typography>\n              <I18n>\n                <En>Add new contact</En>\n                <Fr>Ajouter un contact</Fr>\n              </I18n>\n            </Typography>\n          </Button>\n        </Grid>\n        <Grid item xs style={{ margin: \"10px\" }}>\n          <SelectInput\n            value=\"\"\n            labelId=\"add-existing\"\n            onChange={handleAddFromSavedContacts}\n            optionLabels={contactList.map((contactItem) => (\n              <ContactTitle contact={contactItem} />\n            ))}\n            options={contactList.map((v, i) => i)}\n            disabled={!contactList.length || disabled}\n            label={<I18n en=\"ADD SAVED CONTACT\" fr=\"AJOUTER UN CONTACT\" />}\n          />\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n};\nexport default ContactLeftList;\n","import React from \"react\";\n\nimport Cite from \"citation-js\";\n\nconst intersection = (arrA, arrB) => arrA.filter((x) => arrB.includes(x));\nfunction APAPreview({ record, language }) {\n  const {\n    title,\n    datasetIdentifier = \"\",\n    created,\n    contacts = [],\n    datePublished,\n  } = record;\n\n  const apaData = [\n    {\n      title: title[language],\n\n      author: contacts\n        .filter(\n          (contact) =>\n            // citation-js crashes sometimes with single letter input for a name\n            (contact.indName?.length > 1 || contact.orgName?.length > 1) &&\n            contact.role &&\n            // only these roles make it into the APA preview\n            intersection(contact.role, [\n              \"author\",\n              \"owner\",\n              \"originator\",\n              \"principalInvestigator\",\n            ]).length\n        )\n        .map((contact) => {\n          if (contact.indName?.length > 1) return { name: contact.indName };\n          // seems that only individuals gets cited? Wasnt sure how to get organization name in there\n          return { family: contact.orgName };\n        }),\n      date: { published: datePublished || created },\n\n      identifier: [\n        {\n          type: \"doi\",\n          id: datasetIdentifier.replace(/https?:\\/\\/doi\\.org\\//, \"\"),\n        },\n      ],\n      license: [\n        {\n          raw: record.license,\n        },\n      ],\n    },\n  ];\n\n  try {\n    const data = Cite(apaData);\n\n    const html = data.format(\"bibliography\", {\n      format: \"html\",\n      template: \"apa\",\n      lang: \"en-US\",\n    });\n\n    return (\n      <div>\n        <div\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: html }}\n          style={{ padding: \"5px\" }}\n        />\n      </div>\n    );\n  } catch (e) {\n    // This is needed because sometimes partly filled names, eg \"Ma\" cause it to crash\n    return <div />;\n  }\n}\n\nexport default APAPreview;\n","import React, { useState } from \"react\";\n\nimport { useParams } from \"react-router-dom\";\n\nimport { Paper, Grid } from \"@material-ui/core\";\nimport DragHandleIcon from \"@material-ui/icons/DragHandle\";\n\nimport EditContact from \"../FormComponents/ContactEditor\";\nimport ContactLeftList from \"../FormComponents/ContactLeftList\";\n\nimport {\n  QuestionText,\n  SupplementalText,\n  paperClass,\n} from \"../FormComponents/QuestionStyles\";\n\nimport { En, Fr, I18n } from \"../I18n\";\nimport RequiredMark from \"../FormComponents/RequiredMark\";\nimport { validateField } from \"../../utils/validate\";\n\nimport ApaPreview from \"../FormComponents/ApaPreview\";\n\nimport regions from \"../../regions\";\n\nconst ContactTab = ({\n  disabled,\n  record,\n  userContacts,\n  updateRecord,\n  saveToContacts,\n}) => {\n  const { language, region } = useParams();\n  const { contacts = [] } = record;\n\n  const updateContacts = updateRecord(\"contacts\");\n\n  const [activeContact, setActiveContact] = useState(0);\n\n  // Instead of updating record.<item> we are\n  // updating record.contacts[activeContact].<item>\n  function updateContactEvent(key) {\n    return (e) => {\n      const newContacts = [...contacts];\n      newContacts[activeContact][key] = e.target.value;\n      updateContacts(newContacts);\n    };\n  }\n  function updateContact(key) {\n    return (value) => {\n      const newContacts = [...contacts];\n      newContacts[activeContact][key] = value;\n\n      updateContacts(newContacts);\n    };\n  }\n\n  const showApaBox =\n    record.title?.[language] && contacts.length && record.created;\n\n  const contact = contacts[activeContact];\n  return (\n    <Grid container spacing={3}>\n      <Paper style={paperClass}>\n        <Grid item xs>\n          <QuestionText>\n            <I18n>\n              <En>\n                Please enter at least one Metadata Custodian <b>and</b> one Data\n                Owner for this dataset that can work with{\" \"}\n                {regions[region].title[language]} Staff to finalize this\n                Metadata Record.\n              </En>\n              <Fr>\n                Veuillez saisir au moins un Dépositaire des métadonnées ET un\n                propriétaire des données de ce jeu. Ces personnes pourraient\n                être appelées à collaborer avec le personnel de la{\" \"}\n                {regions[region].title[language]} pour finaliser la saisie des\n                informations.\n              </Fr>\n            </I18n>\n            <RequiredMark passes={validateField(record, \"contacts\")} />\n            <SupplementalText>\n              <I18n>\n                <En>\n                  It is important to include all individuals from the chain of\n                  attribution to ensure all involved parties are credited\n                  appropriately for their role in creating this dataset. Saved\n                  contacts can be selected from the list below. If you have any\n                  saved contacts you can select them from the list.\n                </En>\n                <Fr>\n                  Il est important d'inclure toutes les personnes ayant\n                  travaillé sur le jeu de données afin de s'assurer que toutes\n                  les parties concernées soient créditées de façon appropriée\n                  pour leur rôle dans la création de ce jeu de données. Les\n                  contacts sauvegardés peuvent être sélectionnés dans la liste\n                  ci-dessous. Si vous avez déjà des contacts enregistrés, vous\n                  pouvez les sélectionner dans la liste.\n                </Fr>\n              </I18n>\n            </SupplementalText>\n          </QuestionText>\n        </Grid>\n      </Paper>\n      {showApaBox && (\n        <Paper style={paperClass}>\n          <QuestionText>\n            <div>\n              <I18n>\n                <En>\n                  This is how your record citation will look in the catalogue.\n                  Only starred roles will appear in the citation. To change\n                  the order, drag the{\" \"}\n                  <DragHandleIcon style={{ verticalAlign: \"middle\" }} /> symbol.\n                </En>\n                <Fr>\n                  Voici à quoi ressemblera votre citation dans le catalogue.\n                  Seuls les contacts dont la case «Auteur cité» est cochée\n                  apparaissent. Seuls les rôles étoilés apparaîtront dans la\n                  citation. Changer la commande, faites glisser le{\" \"}\n                  <DragHandleIcon style={{ verticalAlign: \"middle\" }} />.\n                </Fr>\n              </I18n>\n            </div>\n          </QuestionText>\n          <SupplementalText>\n            <ApaPreview language={language} record={record} />\n          </SupplementalText>\n        </Paper>\n      )}\n\n      <Grid container direction=\"row\" style={{ marginLeft: \"5px\" }}>\n        <Grid item xs={5}>\n          <ContactLeftList\n            contacts={contacts}\n            updateContacts={updateContacts}\n            setActiveContact={setActiveContact}\n            activeContact={activeContact}\n            disabled={disabled}\n            userContacts={userContacts}\n            saveToContacts={saveToContacts}\n          />\n        </Grid>\n        {contact && (\n          <Grid item xs>\n            <Grid container direction=\"column\">\n              <Paper style={paperClass}>\n                <Grid container direction=\"column\" spacing={3}>\n                  <Grid item xs>\n                    <EditContact\n                      showRolePicker\n                      value={contact}\n                      updateContactEvent={updateContactEvent}\n                      updateContact={updateContact}\n                      disabled={disabled}\n                    />\n                  </Grid>\n                </Grid>\n              </Paper>\n            </Grid>\n          </Grid>\n        )}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default ContactTab;\n","import React, { useContext, useState } from \"react\";\nimport {\n  Button,\n  InputAdornment,\n  TextField,\n  CircularProgress,\n  Tooltip,\n} from \"@material-ui/core\";\nimport TranslateIcon from \"@material-ui/icons/Translate\";\nimport ArrowDownwardIcon from \"@material-ui/icons/ArrowDownward\";\nimport { useParams } from \"react-router-dom\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport { UserContext } from \"../../providers/UserProvider\";\n\n// AWS translate size limit is 5KB\nconst MAX_AWS_TRANSLATE_SIZE = 5000;\n\nconst BilingualTextInput = ({\n  onChange,\n  value,\n  name,\n  multiline,\n  disabled,\n  error,\n  translationButonDisabled = false,\n}) => {\n  const { translate } = useContext(UserContext);\n  const [awaitingTranslation, setAwaitingTranslation] = useState(false);\n\n  function handleEvent(e) {\n    const newData = { ...value, [e.target.name]: e.target.value };\n    const newDataEvent = { target: { name, value: newData } };\n    onChange(newDataEvent);\n  }\n  const { language } = useParams();\n  let languages;\n\n  const textSizeByes = new Blob([value?.[language]]).size;\n  const textTooBig = textSizeByes >= MAX_AWS_TRANSLATE_SIZE;\n\n  if (language === \"en\") languages = [\"en\", \"fr\"];\n  else languages = [\"fr\", \"en\"];\n  return (\n    <div>\n      {languages.map((lang, i) => (\n        <div key={lang}>\n          <TextField\n            name={lang}\n            fullWidth\n            value={value?.[lang] || \"\"}\n            onChange={handleEvent}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  {lang.toUpperCase()}\n                </InputAdornment>\n              ),\n            }}\n            multiline={multiline}\n            disabled={disabled}\n            error={Boolean(error)}\n          />\n          {i === 0 && !translationButonDisabled && (\n            <Tooltip\n              title={\n                <I18n\n                  en=\"Translate english to french\"\n                  fr=\"Traduire du français en anglais\"\n                />\n              }\n            >\n              <span>\n                <Button\n                  style={{ margin: \"10px\" }}\n                  startIcon={\n                    awaitingTranslation ? (\n                      <CircularProgress size={20} />\n                    ) : (\n                      <TranslateIcon />\n                    )\n                  }\n                  endIcon={awaitingTranslation ? null : <ArrowDownwardIcon />}\n                  disabled={\n                    disabled ||\n                    awaitingTranslation ||\n                    !value?.[lang] ||\n                    textTooBig\n                  }\n                  onClick={() => {\n                    const alternateLanguage = languages[1];\n                    setAwaitingTranslation(true);\n\n                    translate({ text: value[lang], fromLang: lang }).then(\n                      (translatedText) => {\n                        setAwaitingTranslation(false);\n                        const translation = translatedText.data;\n                        handleEvent({\n                          target: {\n                            name: alternateLanguage,\n                            value: translation,\n                          },\n                        });\n                      }\n                    );\n                  }}\n                >\n                  <I18n>\n                    <En>Translate</En>\n                    <Fr>Traduire</Fr>\n                  </I18n>\n                </Button>\n                {textTooBig && (\n                  <I18n>\n                    <En>\n                      Translation is disabled because text is larger than{\" \"}\n                      {MAX_AWS_TRANSLATE_SIZE} characters.\n                    </En>\n                    <Fr>\n                      La traduction est désactivée car le texte est plus grand\n                      que {MAX_AWS_TRANSLATE_SIZE} caractères.\n                    </Fr>\n                  </I18n>\n                )}\n              </span>\n            </Tooltip>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default BilingualTextInput;\n","import React from \"react\";\nimport { Add, Delete, ArrowUpwardSharp, ArrowDownwardSharp } from \"@material-ui/icons\";\nimport { Button, Grid, Paper, TextField } from \"@material-ui/core\";\nimport validator from \"validator\";\nimport { En, Fr, I18n } from \"../I18n\";\n\nimport BilingualTextInput from \"./BilingualTextInput\";\nimport RequiredMark from \"./RequiredMark\";\nimport { deepCopy } from \"../../utils/misc\";\nimport { QuestionText, paperClass, SupplementalText } from \"./QuestionStyles\";\n\nconst validateURL = (url) => !url || validator.isURL(url);\n\nconst Resources = ({ updateResources, resources, disabled }) => {\n  const emptyResource = { url: \"\", name: \"\", description: { en: \"\", fr: \"\" } };\n\n  function addResource() {\n    updateResources(resources.concat(deepCopy(emptyResource)));\n  }\n\n  // removes the resource section from the list at index i\n  function removeResource(i) {\n    updateResources(resources.filter((e, index) => index !== i));\n  }\n\n  // move the resource section \n  function moveResource(i, newIndex) {\n    if (newIndex < 0 || newIndex >= resources.length)\n      return;\n    const element = resources.splice(i, 1)[0]\n    resources.splice(newIndex, 0, element)\n    updateResources(resources);\n  }\n  const nameLabel = <I18n en=\"Name\" fr=\"Titre\" />;\n  const descriptionLabel = <I18n en=\"Description\" fr=\"Description\" />;\n\n  return (\n    <div>\n      {resources.map((dist = deepCopy(emptyResource), i) => {\n        const urlIsValid = !dist.url || validateURL(dist.url);\n        function handleResourceChange(key) {\n          return (e) => {\n            const newValue = [...resources];\n            newValue[i][key] = e.target.value;\n            updateResources(newValue);\n          };\n        }\n        return (\n          <Paper key={i} style={paperClass}>\n            <Grid container direction=\"column\" spacing={3}>\n              <Grid item xs>\n                <QuestionText>\n                  <I18n>\n                    <En>Enter a name for the resource</En>\n                    <Fr>Entrez un titre pour la ressource</Fr>\n                  </I18n>\n                  <RequiredMark passes={dist.name} />\n                </QuestionText>\n                <TextField\n                  label={nameLabel}\n                  value={dist.name}\n                  onChange={handleResourceChange(\"name\")}\n                  fullWidth\n                  disabled={disabled}\n                />\n              </Grid>\n              <Grid item xs>\n                <QuestionText>\n                  <I18n>\n                    <En>Enter the URL for the resource</En>\n                    <Fr>\n                      Le lien peut être vers une ressource de données formelle\n                      sur un autre un référentiel ou un lien vers un lecteur en\n                      ligne personnel (par exemple Google Entraînement).\n                    </Fr>\n                  </I18n>\n\n                  <RequiredMark passes={validator.isURL(dist.url)} />\n                  <SupplementalText>\n                    <I18n>\n                      <En>\n                        <p>\n                          The link may be to a formal data resource on another\n                          repository or a link to a personal online drive (e.g.\n                          Google Drive).\n                        </p>\n                      </En>\n                      <Fr>\n                        <p>\n                          Le lien peut être vers une ressource de données\n                          formelle sur un autre un référentiel ou un lien vers\n                          un lecteur en ligne personnel (par exemple Google\n                          Entraînement).\n                        </p>\n                      </Fr>\n                    </I18n>\n                  </SupplementalText>\n                </QuestionText>\n\n                <TextField\n                  helperText={\n                    !urlIsValid && <I18n en=\"Invalid URL\" fr=\"URL non valide\" />\n                  }\n                  error={!urlIsValid}\n                  label=\"URL\"\n                  value={dist.url}\n                  onChange={handleResourceChange(\"url\")}\n                  fullWidth\n                  disabled={disabled}\n                />\n              </Grid>\n              <Grid item xs>\n                <QuestionText>\n                  <I18n>\n                    <En>Enter a description of the resource</En>\n                    <Fr>Entrez une description de la ressource</Fr>\n                  </I18n>\n                </QuestionText>{\" \"}\n                <BilingualTextInput\n                  name=\"description\"\n                  label={descriptionLabel}\n                  value={dist.description}\n                  onChange={handleResourceChange(\"description\")}\n                  disabled={disabled}\n                />\n              </Grid>\n              <Grid item xs>\n                <Button\n                  startIcon={<Delete />}\n                  disabled={disabled}\n                  onClick={() => removeResource(i)}\n                >\n                  <I18n>\n                    <En>Remove item</En>\n                    <Fr>Supprimer la ressource</Fr>\n                  </I18n>\n                </Button>\n                <Button\n                  startIcon={<ArrowUpwardSharp />}\n                  disabled={disabled || i - 1 < 0}\n                  onClick={() => moveResource(i, i - 1)}\n                >\n                  <I18n>\n                    <En>Move up</En>\n                    <Fr>Déplacer vers le haut</Fr>\n                  </I18n>\n                </Button>\n                <Button\n                  startIcon={<ArrowDownwardSharp />}\n                  disabled={disabled || i + 1 >= resources.length}\n                  onClick={() => moveResource(i, i + 1)}\n                >\n                  <I18n>\n                    <En>Move down</En>\n                    <Fr>Déplacer vers le bas</Fr>\n                  </I18n>\n                </Button>\n              </Grid>\n            </Grid>\n          </Paper>\n        );\n      })}\n\n      <Paper style={paperClass}>\n        <Button startIcon={<Add />} disabled={disabled} onClick={addResource}>\n          <I18n>\n            <En>Add item</En>\n            <Fr>Ajouter une ressource</Fr>\n          </I18n>\n        </Button>\n      </Paper>\n    </div>\n  );\n};\n\nexport default Resources;\n","import React from \"react\";\n\nimport { Paper } from \"@material-ui/core\";\n\nimport Resources from \"../FormComponents/Resources\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport RequiredMark from \"../FormComponents/RequiredMark\";\nimport {\n  paperClass,\n  QuestionText,\n  SupplementalText,\n} from \"../FormComponents/QuestionStyles\";\nimport { validateField } from \"../../utils/validate\";\n\nconst ResourcesTab = ({ disabled, record, updateRecord }) => {\n  const updateResources = updateRecord(\"distribution\");\n  return (\n    <div>\n      <Paper style={paperClass}>\n        <QuestionText>\n          <En>Enter any links to information associated with this dataset.</En>\n          <Fr>\n            Entrez les liens vers les informations associées à ce jeu de\n            données.\n          </Fr>\n          <RequiredMark passes={validateField(record, \"distribution\")} />\n          <SupplementalText>\n            <I18n>\n              <En>\n                Some examples of resources are:\n                <ul>\n                  <li>supporting documentation (eg text or pdf files)</li>\n                  <li>CSV files</li>\n                  <li>ERDDAP datasets</li>\n                  <li>images</li>\n                </ul>\n                At least one item is required. A Resource URL can link to a (compressed) data package or folder.\n              </En>\n              <Fr>\n                Voici quelques exemples de ressources :\n                <ul>\n                  <li>\n                    Documentation à l'appui (par exemple, fichiers texte ou pdf)\n                  </li>\n                  <li>Fichiers CSV</li>\n                  <li>Jeux de données ERDDAP</li>\n                  <li>Images</li>\n                </ul>\n                Au moins une ressource est requise. Une URL de ressource peut être liée à un paquet de données (compressé) ou à un dossier.\n              </Fr>\n            </I18n>\n          </SupplementalText>\n        </QuestionText>\n      </Paper>\n      <Resources\n        paperClass={paperClass}\n        resources={record.distribution || []}\n        updateResources={updateResources}\n        disabled={disabled}\n      />\n    </div>\n  );\n};\n\nexport default ResourcesTab;\n","import {\n  KeyboardDatePicker,\n  MuiPickersUtilsProvider,\n} from \"@material-ui/pickers\";\n\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport React from \"react\";\n\nimport { I18n } from \"../I18n\";\n\nfunction formatDate(date) {\n  try {\n    const d = date.getDate();\n    const m = date.getMonth();\n    const y = date.getFullYear();\n    // This is to get around the issue of timezones and dates\n    return new Date(y, m, d, 12, 0, 0, 0);\n  } catch (e) {\n    return null;\n  }\n}\nconst DateInput = ({ onChange, value, name, disabled, dateStart, dateEnd }) => {\n  return (\n    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n      <KeyboardDatePicker\n        disabled={disabled}\n        margin=\"normal\"\n        id=\"date-picker-dialog\"\n        label={<I18n en=\"Select date\" fr=\"Sélectionner une date\" />}\n        format=\"yyyy-MM-dd\"\n        value={value}\n        minDate={dateStart}\n        maxDate={dateEnd}\n        onChange={(dateSelected) => {\n          return onChange({\n            target: { name, value: formatDate(dateSelected) },\n          });\n        }}\n        KeyboardButtonProps={{\n          \"aria-label\": \"change date\",\n        }}\n      />\n    </MuiPickersUtilsProvider>\n  );\n};\n\nexport default DateInput;\n","const keywords = [\n  { en: \"abundance and biomass\", fr: \"abondance et biomasse\" },\n  { en: \"sea access\", fr: \"accès à la mer\" },\n  { en: \"decision making\", fr: \"aide à la décision\" },\n  { en: \"protected areas\", fr: \"aires protégées\" },\n  { en: \"knowledge improvement\", fr: \"amélioration des connaissances\" },\n  { en: \"land-use planning\", fr: \"aménagement du territoire\" },\n  { en: \"water purification\", fr: \"assainissement des eaux\" },\n  { en: \"striped bass\", fr: \"bar rayé\" },\n  { en: \"watershed\", fr: \"bassin versant\" },\n  { en: \"habitat characterization\", fr: \"caractérisation des habitats\" },\n  { en: \"coastal characterization\", fr: \"caractérisation des rives\" },\n  { en: \"climate change\", fr: \"changement climatique\" },\n  { en: \"chlorophyll a\", fr: \"chlorophylle a\" },\n  { en: \"resource conservation\", fr: \"conservation des ressources\" },\n  { en: \"water consumption\", fr: \"consommation d'eau\" },\n  { en: \"sea currents\", fr: \"courant marin\" },\n  { en: \"crustacean\", fr: \"crustacé\" },\n  { en: \"fresh water flow\", fr: \"débits eau douce\" },\n  { en: \"water density\", fr: \"densité eau\" },\n  { en: \"sustainable development\", fr: \"développement durable\" },\n  { en: \"ocean-atmosphere exchange\", fr: \"échange océan-atmosphère\" },\n  { en: \"sampling\", fr: \"échantillonnage\" },\n  { en: \"crayfish\", fr: \"écrevisses\" },\n  { en: \"mariculture\", fr: \"entreprises de maricultures\" },\n  { en: \"coastal erosion\", fr: \"érosion des côtes\" },\n  { en: \"endangered species\", fr: \"espèces en péril\" },\n  { en: \"invasive species\", fr: \"espèces envahissante\" },\n  { en: \"coastal flora\", fr: \"flore côtière\" },\n  { en: \"fluorescence\", fr: \"fluorescence\" },\n  { en: \"spawning\", fr: \"fraie\" },\n  { en: \"community management\", fr: \"gestion communautaire\" },\n  { en: \"resource management\", fr: \"gestion des ressources\" },\n  { en: \"integrated management\", fr: \"gestion intégrée\" },\n  { en: \"sea ice\", fr: \"glace de mer\" },\n  { en: \"sensitive habitat\", fr: \"habitat sensible\" },\n  { en: \"important habitat\", fr: \"habitats important\" },\n  { en: \"hydrocarbon\", fr: \"hydrocarbure\" },\n  { en: \"incidents\", fr: \"incidents\" },\n  { en: \"general information\", fr: \"informations générales\" },\n  { en: \"wildlife inventory\", fr: \"inventaire faunique\" },\n  { en: \"fish inventory\", fr: \"inventaire poisson\" },\n  { en: \"macroalgae\", fr: \"macroalgue\" },\n  { en: \"benthic macrofauna\", fr: \"macrofaune benthique\" },\n  { en: \"marine mammal\", fr: \"mammifères marins\" },\n  { en: \"marsh\", fr: \"marais\" },\n  { en: \"meteorology\", fr: \"météorologie\" },\n  { en: \"wetlands\", fr: \"milieux humides\" },\n  { en: \"natural environments of interest\", fr: \"milieux naturels d'intérêt\" },\n  { en: \"enhancement\", fr: \"mise en valeur\" },\n  { en: \"oceanographic missions\", fr: \"missions océanographique\" },\n  { en: \"mollusc\", fr: \"mollusque\" },\n  { en: \"sea level\", fr: \"niveau eau\" },\n  { en: \"seabirds\", fr: \"oiseaux marins\" },\n  { en: \"migrator birds\", fr: \"oiseaux migrateurs\" },\n  { en: \"commercial fisheries\", fr: \"pêches commerciales\" },\n  { en: \"experimental fisheries\", fr: \"pêches expérimentales\" },\n  { en: \"physical-chemical\", fr: \"physico-chimie\" },\n  { en: \"phytoplankton\", fr: \"phytoplancton\" },\n  { en: \"sea grass\", fr: \"plantes aquatique\" },\n  { en: \"fish\", fr: \"poisson\" },\n  { en: \"coastal pollution\", fr: \"pollution côtière\" },\n  { en: \"atmospheric pressure\", fr: \"pression atmosphérique\" },\n  { en: \"coast protection\", fr: \"protection des côtes\" },\n  { en: \"habitat protection\", fr: \"protection des habitats\" },\n  { en: \"water quality\", fr: \"qualité eau\" },\n  { en: \"radiation\", fr: \"radiation\" },\n  { en: \"maritime resources\", fr: \"ressources maritimes\" },\n  { en: \"ecological rehabilitation\", fr: \"réhabilitation écologique\" },\n  { en: \"shore restoration\", fr: \"restauration des rives\" },\n  { en: \"experimental restoration\", fr: \"restauration expérimentale\" },\n  { en: \"habitat restoration\", fr: \"restauration habitat\" },\n  { en: \"coastal risks\", fr: \"risques côtiers\" },\n  { en: \"citizen data\", fr: \"saisie citoyenne\" },\n  { en: \"salinity\", fr: \"salinité\" },\n  { en: \"sediment\", fr: \"sédiment\" },\n  { en: \"fishing sites\", fr: \"sites de pêches\" },\n  { en: \"annual follow-up\", fr: \"suivi annuel\" },\n  { en: \"species tracking\", fr: \"suivi des espèces\" },\n  { en: \"habitat tracking\", fr: \"suivi habitat\" },\n  { en: \"taxonomy\", fr: \"taxonomie\" },\n  { en: \"remote sensing\", fr: \"télédétection\" },\n  { en: \"water temperature\", fr: \"température de l'eau\" },\n  { en: \"sea turtles\", fr: \"tortue de mer\" },\n  { en: \"land-use\", fr: \"utilisation du territoire\" },\n  { en: \"sustainabilty\", fr: \"utilisation durable\" },\n  { en: \"waves\", fr: \"vagues\" },\n  { en: \"wind\", fr: \"vents\" },\n  { en: \"coastal zone\", fr: \"zone côtière\" },\n];\nexport default keywords;\n","import React, { useState } from \"react\";\n\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\n\nimport {\n  TextField,\n  Button,\n  Grid,\n  Chip,\n  InputAdornment,\n} from \"@material-ui/core\";\nimport { useParams } from \"react-router-dom\";\nimport { ArrowDownward } from \"@material-ui/icons\";\nimport keywordList from \"../../utils/keywords\";\nimport { En, Fr, I18n } from \"../I18n\";\n\nfunction translate(word, toLang = \"fr\") {\n  if (!word) return \"\";\n  return keywordList.find((e) => e[toLang === \"fr\" ? \"en\" : \"fr\"] === word)[\n    toLang\n  ];\n}\n\nconst KeywordsInput = ({\n  onChange,\n  value = { en: [], fr: [] },\n  name,\n  disabled,\n}) => {\n  const { language } = useParams();\n  const [selectedKeyword, setKeyword] = useState(\"\");\n  const [inputValue, setInputValue] = useState(\"\");\n  const [selectedKeywordAltLang, setSelectedKeywordAltLang] = useState(\"\");\n\n  const languages = [\"en\", \"fr\"];\n\n  if (language === \"fr\") languages.reverse();\n  const altLanguage = languages[1];\n\n  function cleanList(list) {\n    return list\n      .map((item) => (item || \"\").trim())\n      .filter((item, i, arr) => item && arr.indexOf(item) === i);\n  }\n\n  function handleDelete(chipText, deletedChipLang) {\n    return () => {\n      const newValue = {\n        en: value.en,\n        fr: value.fr,\n        [deletedChipLang]: value[deletedChipLang].filter(\n          (keyword) => keyword !== chipText\n        ),\n      };\n\n      onChange({\n        target: {\n          name,\n          value: newValue,\n        },\n      });\n    };\n  }\n  function handleHelperChange() {\n    const keyword = selectedKeyword || inputValue;\n    if (keyword || selectedKeywordAltLang) {\n      const newValue = { en: value.en, fr: value.fr };\n\n      const userKeywordList = [...value[language], keyword];\n      const userKeywordListAlt = [\n        ...value[altLanguage],\n        selectedKeywordAltLang,\n      ];\n\n      if (keyword) newValue[language] = cleanList(userKeywordList);\n      if (selectedKeywordAltLang)\n        newValue[altLanguage] = cleanList(userKeywordListAlt);\n\n      onChange({\n        target: {\n          name,\n          value: newValue,\n        },\n      });\n    }\n    setKeyword(\"\");\n    setSelectedKeywordAltLang(\"\");\n    setInputValue(\"\");\n  }\n\n  return (\n    <Grid container spacing={3} direction=\"column\">\n      <Grid item xs>\n        <Autocomplete\n          inputValue={inputValue}\n          onInputChange={(event, newInputValue) => {\n            setInputValue(newInputValue);\n          }}\n          disabled={disabled}\n          onChange={(e, keyword) =>\n            setSelectedKeywordAltLang(translate(keyword, altLanguage))\n          }\n          value={selectedKeyword || \"\"}\n          freeSolo\n          options={keywordList\n            .sort((a, b) => a[language].localeCompare(b[language]))\n            .map((e) => e[language])}\n          fullWidth\n          renderInput={(params) => (\n            <TextField\n              // eslint-disable-next-line react/jsx-props-no-spreading\n              {...params}\n              label={language.toUpperCase()}\n            />\n          )}\n        />\n      </Grid>\n      <Grid item xs>\n        <TextField\n          value={selectedKeywordAltLang || \"\"}\n          onChange={(e) => setSelectedKeywordAltLang(e.target.value)}\n          fullWidth\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                {altLanguage.toUpperCase()}\n              </InputAdornment>\n            ),\n          }}\n        />\n      </Grid>\n\n      <Grid item xs={3}>\n        <Button\n          disabled={\n            disabled ||\n            (!selectedKeyword && !selectedKeywordAltLang && !inputValue)\n          }\n          startIcon={<ArrowDownward />}\n          onClick={handleHelperChange}\n        >\n          <I18n>\n            <En>Add</En>\n            <Fr>Ajouter</Fr>\n          </I18n>\n        </Button>\n      </Grid>\n\n      <Grid item xs>\n        {languages\n          .filter((lang) => value[lang]?.length)\n          .map((lang) => (\n            <div style={{ margin: \"15px\" }} key={lang}>\n              <InputAdornment style={{ margin: \"10px\" }}>\n                {lang.toUpperCase()}\n              </InputAdornment>\n              <Grid container direction=\"row\">\n                <Grid item xs>\n                  {(value[lang] || []).map((keyword, i) => (\n                    <Chip\n                      key={i}\n                      disabled={disabled}\n                      label={keyword}\n                      onDelete={handleDelete(keyword, lang)}\n                      color=\"primary\"\n                      style={{ margin: \"5px\" }}\n                    />\n                  ))}\n                </Grid>\n              </Grid>\n            </div>\n          ))}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default KeywordsInput;\n","const licenses = {\n  \"CC-BY-4.0\": {\n    title: { en: \"Creative Commons Attribution 4.0 Attribution\" },\n    url: \"https://creativecommons.org/licenses/by/4.0\",\n    code: \"CC-BY-4.0\",\n  },\n  \"CC-BY-SA-4.0\": {\n    title: { en: \"Creative Commons Attribution 4.0 Attribution-ShareAlike\" },\n    url: \"https://creativecommons.org/licenses/by-sa/4.0/\",\n    code: \"CC-BY-SA-4.0\",\n  },\n  \"CC-BY-ND-4.0\": {\n    title: { en: \"Creative Commons Attribution 4.0 Attribution-NoDerivs \" },\n    url: \"https://creativecommons.org/licenses/by-nd/4.0/\",\n    code: \"CC-BY-ND-4.0\",\n  },\n  \"CC-BY-NC-4.0\": {\n    title: {\n      en: \"Creative Commons Attribution 4.0 Attribution-NonCommercial  \",\n    },\n    url: \"https://creativecommons.org/licenses/by-nc/4.0/\",\n    code: \"CC-BY-NC-4.0\",\n  },\n  \"CC-BY-NC-SA-4.0\": {\n    title: {\n      en:\n        \"Creative Commons Attribution 4.0 Attribution-NonCommercial-ShareAlike \",\n    },\n    url: \"https://creativecommons.org/licenses/by-nc-sa/4.0/\",\n    code: \"CC-BY-NC-SA-4.0\",\n  },\n  \"CC-BY-NC-ND-4.0\": {\n    title: {\n      en: \"Creative Commons Attribution 4.0 Attribution-NonCommercial-NoDerivs\",\n    },\n    url: \"https://creativecommons.org/licenses/by-nc-nd/4.0/\",\n    code: \"CC-BY-NC-ND-4.0\",\n  },\n  CC0: {\n    title: { en: \"Creative Commons 0\" },\n    url: \"https://creativecommons.org/share-your-work/public-domain/cc0\",\n    code: \"CC0\",\n  },\n  \"government-open-license-canada\": {\n    title: {\n      en: \"Open Government Licence - Canada\",\n      fr: \"Licence du gouvernement ouvert – Canada \",\n    },\n    url: \"https://open.canada.ca/en/open-government-licence-canada\",\n    code: \"government-open-license-canada\",\n  },\n  \"government-open-license-nova-scotia\": {\n    title: { en: \"Open Government Licence - Nova Scotia\" },\n    url: \"https://novascotia.ca/opendata/licence.asp\",\n    code: \"government-open-license-nova-scotia\",\n  },\n  \"OGL-NB\": {\n    title: { en: \"Open Government Licence – New Brunswick\" },\n    url: \"http://www.snb.ca/e/2000/data-E.html\",\n    code: \"OGL-NB\",\n  },\n  \"OGL-BC\": {\n    title: { en: \"Open Government Licence - British Columbia\" },\n    url:\n      \"https://www2.gov.bc.ca/gov/content/data/open-data/open-government-licence-bc\",\n    code: \"OGL-BC\",\n  },\n\n  \"government-open-license-newfoundland\": {\n    title: { en: \"Open Government Licence - Newfoundland and Labrador\" },\n    url: \"https://opendata.gov.nl.ca/public/opendata/page/?page-id=licence\",\n    code: \"government-open-license-newfoundland\",\n  },\n  \"Apache-2.0\": {\n    title: { en: \"Apache License, Version 2.0\" },\n    url: \"https://www.apache.org/licenses/LICENSE-2.0\",\n    code: \"Apache-2.0\",\n  },\n};\n\nexport default licenses;\n","import React from \"react\";\nimport { Paper, TextField, Grid, IconButton, Tooltip } from \"@material-ui/core\";\nimport { useParams } from \"react-router-dom\";\nimport { OpenInNew, Update } from \"@material-ui/icons\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport { progressCodes } from \"../../isoCodeLists\";\nimport { eovs, eovCategories } from \"../../eovs.json\";\n\nimport BilingualTextInput from \"../FormComponents/BilingualTextInput\";\nimport CheckBoxList from \"../FormComponents/CheckBoxList\";\nimport DateInput from \"../FormComponents/DateInput\";\nimport KeywordsInput from \"../FormComponents/KeywordsInput\";\nimport RequiredMark from \"../FormComponents/RequiredMark\";\nimport SelectInput from \"../FormComponents/SelectInput\";\nimport licenses from \"../../utils/licenses\";\nimport { validateField, doiRegexp } from \"../../utils/validate\";\n\nimport {\n  QuestionText,\n  SupplementalText,\n  paperClass,\n} from \"../FormComponents/QuestionStyles\";\n\nimport regions from \"../../regions\";\n\nconst IdentificationTab = ({\n  disabled,\n  record,\n  handleUpdateRecord,\n  updateRecord,\n}) => {\n  const { language, region } = useParams();\n  const regionInfo = regions[region];\n  const doiIsValid = Boolean(\n    !record.datasetIdentifier || doiRegexp.test(record.datasetIdentifier)\n  );\n  const languageUpperCase = language.toUpperCase();\n\n  const CatalogueLink = ({ lang }) => (\n    <a\n      href={regionInfo.catalogueURL[lang]}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      {regionInfo.catalogueURL[lang]}\n    </a>\n  );\n\n  // sort into array of objects sorted by name?\n  const licensesSorted = Object.values(licenses).sort((a, b) =>\n    (a.title[language] || a.title.en).localeCompare(\n      b.title[language] || a.title.en,\n      language\n    )\n  );\n\n  return (\n    <div>\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>What is the dataset title? Required in English and French.</En>\n            <Fr>\n              Quel est le titre du jeu de données? Obligatoire dans les deux\n              langues.\n            </Fr>\n          </I18n>\n          <RequiredMark passes={validateField(record, \"title\")} />\n          <SupplementalText>\n            <I18n>\n              <En>\n                <p>Recommended title includes: What, Where, When.</p>\n                <p>\n                  Title should be precise enough so that the user will not have\n                  to open the dataset to understand its contents. Title should\n                  not have acronyms, special characters, or use specialized\n                  nomenclature. This will appear as the title that is shown for\n                  this dataset in the {regionInfo.catalogueTitle.en}.\n                </p>\n              </En>\n              <Fr>\n                <p>Le titre recommandé comprend : Quoi, Où, Quand.</p>\n                <p>\n                  Le titre doit être suffisamment précis pour que l'utilisateur\n                  n'ait pas à ouvrir le ensemble de données pour comprendre son\n                  contenu. Le titre ne doit pas avoir des acronymes, des\n                  caractères spéciaux ou utiliser une nomenclature spécialisée.\n                  Ceci apparaîtra comme titre de votre jeu de données dans le{\" \"}\n                  {regionInfo.catalogueTitle.fr}.\n                </p>\n              </Fr>\n            </I18n>\n          </SupplementalText>\n        </QuestionText>\n\n        <BilingualTextInput\n          value={record.title}\n          onChange={handleUpdateRecord(\"title\")}\n          disabled={disabled}\n        />\n      </Paper>\n\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>What is the primary language of the dataset?</En>\n            <Fr>Quelle est la langue principale du jeu de données?</Fr>\n          </I18n>\n          <RequiredMark passes={validateField(record, \"language\")} />\n        </QuestionText>\n        <SelectInput\n          value={record.language}\n          onChange={handleUpdateRecord(\"language\")}\n          options={[\"en\", \"fr\"]}\n          optionLabels={[\"English\", \"Français\"]}\n          disabled={disabled}\n        />\n      </Paper>\n\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>\n              Enter an abstract or summary for the dataset. Required in both\n              languages.\n            </En>\n            <Fr>Décrivez votre jeu de données.</Fr>\n          </I18n>\n          <RequiredMark passes={validateField(record, \"abstract\")} />\n          <SupplementalText>\n            <I18n>\n              <En>\n                This information will appear as the summary text that is shown\n                for this dataset in the {regionInfo.catalogueTitle.en}. Browsing\n                datasets at <CatalogueLink lang=\"en\" /> can help provide a sense\n                of the type of descriptions that are typically used for this\n                section of the record. As a general rule, this section should be\n                worded with as little jargon as possible to give potential users\n                an understanding of your dataset. Use a maximum of 500 words.\n                For detailed methods please submit supplemental materials with\n                your data.\n                <br />\n                <br />\n                Suggested abstract points -\n                <div>\n                  <ul>\n                    <li>\n                      <b>What</b>- variables that were measured\n                    </li>\n                    <li>\n                      <b>When</b>- temporal coverage of the data, frequency of\n                      the measurements/observations\n                    </li>\n                    <li>\n                      <b>Where</b>- spatial coverage of the data, sampling\n                      sites, sensor tracks, laboratory spaces\n                    </li>\n                    <li>\n                      <b>Why</b>- a high level statement on the outcome this\n                      data is meant to inform\n                    </li>\n                  </ul>\n                </div>\n              </En>\n\n              <Fr>\n                Ces informations apparaîtront sous forme de texte récapitulatif\n                qui s'affiche pour cet ensemble de données dans le\n                {regionInfo.catalogueTitle.fr}. Naviguer les ensembles de\n                données au <CatalogueLink lang=\"fr\" /> peuvent aider à donner un\n                sens du type de descriptions qui sont généralement utilisées\n                pour cette section du dossier. En règle générale, cette section\n                doit être rédigé avec le moins de jargon possible pour donner\n                aux utilisateurs potentiels une compréhension de votre jeu\n                de données. Utilisez un maximum de 500 mots. Pour des méthodes\n                détaillées, veuillez soumettre des documents supplémentaires\n                avec vos données.\n                <br />\n                <br />\n                Points de résumé suggérés -\n                <div>\n                  <ul>\n                    <li>\n                      <b>Quoi</b> : variables qui ont été mesurées\n                    </li>\n                    <li>\n                      <b>When</b> - couverture temporelle des données, fréquence\n                      les mesures/observations\n                    </li>\n                    <li>\n                      <b>Où</b> : couverture spatiale des données,\n                      échantillonnage sites, pistes de capteurs, espaces de\n                      laboratoire\n                    </li>\n                    <li>\n                      <b>Pourquoi</b> - une déclaration de haut niveau sur le\n                      résultat les données sont destinées à informer\n                    </li>\n                  </ul>\n                </div>\n              </Fr>\n            </I18n>\n          </SupplementalText>\n        </QuestionText>\n\n        <BilingualTextInput\n          value={record.abstract}\n          onChange={handleUpdateRecord(\"abstract\")}\n          disabled={disabled}\n          multiline\n        />\n      </Paper>\n\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>\n              Please select all the essential ocean variables that are contained\n              in this dataset. Hover over a variable to see its definition.\n            </En>\n            <Fr>\n              Veuillez sélectionner toutes les variables océaniques essentielles\n              contenues dans ce jeu de données. Survolez une variable pour voir\n              sa définition.\n            </Fr>\n          </I18n>\n          <RequiredMark passes={validateField(record, \"eov\")} />\n          <SupplementalText>\n            <I18n>\n              <En>If none of these apply you can select Other.</En>\n              <Fr>\n                Si aucun de ces éléments ne s'applique, vous pouvez sélectionner\n                « Autre ».\n              </Fr>\n            </I18n>\n          </SupplementalText>\n        </QuestionText>\n        {Object.entries(eovCategories).map(([categoryKey, categoryText]) => {\n          const eovsFiltered = eovs\n            .filter((e) => e.category === categoryKey)\n            .sort((a, b) =>\n              a[`label ${languageUpperCase}`].localeCompare(\n                b[`label ${languageUpperCase}`],\n                language\n              )\n            );\n\n          return (\n            <div key={categoryText[language]}>\n              <h4>{categoryText[language]}</h4>\n              <CheckBoxList\n                value={record.eov || []}\n                labelSize={6}\n                onChange={updateRecord(\"eov\")}\n                options={eovsFiltered.map((e) => e.value)}\n                optionLabels={eovsFiltered.map((e) => (\n                  <>\n                    <Tooltip title={e[`definition ${languageUpperCase}`]}>\n                      <span>{e[`label ${languageUpperCase}`]}</span>\n                    </Tooltip>\n                    {e.url && (\n                      <IconButton\n                        onClick={() => {\n                          const win = window.open(e.url, \"_blank\");\n                          win.focus();\n                        }}\n                      >\n                        <Tooltip\n                          title={\n                            <I18n\n                              en=\"Open GOOS definition in new window\"\n                              fr=\"Ouvrir la définition GOOS dans une nouvelle fenêtre\"\n                            />\n                          }\n                        >\n                          <OpenInNew />\n                        </Tooltip>\n                      </IconButton>\n                    )}\n                    {e.emerging && (\n                      <IconButton onClick={() => { }}>\n                        <Tooltip\n                          title={\n                            <I18n\n                              en=\"GOOS emerging EOV\"\n                              fr=\"EOV émergent GOOS\"\n                            />\n                          }\n                        >\n                          <Update />\n                        </Tooltip>\n                      </IconButton>\n                    )}\n                  </>\n                ))}\n                disabled={disabled}\n              />\n            </div>\n          );\n        })}\n      </Paper>\n      <Paper style={paperClass}>\n        <Grid container spacing={3} direction=\"column\">\n          <Grid item xs>\n            <QuestionText>\n              <I18n>\n                <En>\n                  Choose the most specific keywords that apply to your data, or\n                  create your own.\n                </En>\n                <Fr>\n                  Choisissez des mots-clés spécifiques qui s’appliquent à vos\n                  données ou créez-en des nouveaux.\n                </Fr>\n              </I18n>\n              <RequiredMark passes={validateField(record, \"keywords\")} />\n              <SupplementalText>\n                <I18n>\n                  <En>\n                    <p>\n                      Keywords are an important way to categorize your data that\n                      allow people and other systems to search for datasets that\n                      share some important characteristics.\n                    </p>\n                    <p>\n                      Keywords should include the place name of the closest\n                      community or major geographic location. Ex. Hartley Bay,\n                      Gitga’at Territory, in addition to the closest body of\n                      water, e.g. Douglas Channel.\n                    </p>\n                    <p>Enter one at a time, clicking 'Add' after each.</p>\n                  </En>\n                  <Fr>\n                    <p>\n                      Les mots-clés permettent de catégoriser vos données et\n                      facilitent leur découverte par d’autres utilisateurs.\n                    </p>\n                    <p>\n                      Les mots-clés doivent inclure le nom du lieu le plus\n                      proche communauté ou situation géographique importante.\n                      Ex. Hartley Bay, Le territoire des Gitga'at, en plus du\n                      corps le plus proche de eau, par exemple Douglas Channel.\n                    </p>\n                    <p>\n                      Entrez un mot-clé à la fois. Cliquez sur « Ajouter »\n                      chaque mot saisi.\n                    </p>\n                  </Fr>\n                </I18n>\n              </SupplementalText>\n            </QuestionText>\n          </Grid>\n          <Grid item xs>\n            <KeywordsInput\n              value={record.keywords}\n              onChange={handleUpdateRecord(\"keywords\")}\n              disabled={disabled}\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>What is the status of this dataset?</En>\n            <Fr>Quel est l'état de ce jeu de données?</Fr>\n          </I18n>\n          <RequiredMark passes={validateField(record, \"progress\")} />\n\n          <SupplementalText>\n            {Object.values(progressCodes).map(({ title, text }) => (\n              <div style={{ margin: \"10px\" }} key={title[language]}>\n                {`${title[language]}: ${text[language]}`}\n              </div>\n            ))}\n          </SupplementalText>\n        </QuestionText>\n        <SelectInput\n          value={record.progress || \"\"}\n          onChange={handleUpdateRecord(\"progress\")}\n          options={Object.keys(progressCodes)}\n          optionLabels={Object.values(progressCodes).map(\n            ({ title }) => title[language]\n          )}\n          disabled={disabled}\n          fullWidth={false}\n          style={{ width: \"200px\" }}\n        />\n      </Paper>\n\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>What is the start date when data was first collected?</En>\n            <Fr>Inscrivez la date de début de votre collecte de données.</Fr>\n          </I18n>\n        </QuestionText>\n        <DateInput\n          value={record.dateStart || null}\n          onChange={handleUpdateRecord(\"dateStart\")}\n          disabled={disabled}\n          dateEnd={record.dateEnd || undefined}\n        />\n        <br />\n        <QuestionText>\n          <I18n>\n            <En>\n              What is the end date when data was last collected? Leave blank if\n              data collection is ongoing.\n            </En>\n            <Fr>\n              Inscrivez la date de fin de votre collecte de données. Laissez le\n              champs vide si la collecte des données toujours est en cours.\n            </Fr>\n          </I18n>\n        </QuestionText>\n        <DateInput\n          value={record.dateEnd || null}\n          onChange={handleUpdateRecord(\"dateEnd\")}\n          disabled={disabled}\n          dateStart={record.dateStart || undefined}\n        />\n      </Paper>\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>\n              What is the date when the data was published? Leave blank if\n              dataset hasn't been published.\n            </En>\n            <Fr>\n              Quelle est la date de début à laquelle les données ont été\n              publiées ? Laissez le champs vide si les données n'ont pas été\n              publiées.\n            </Fr>\n          </I18n>\n        </QuestionText>\n        <DateInput\n          name=\"datePublished\"\n          value={record.datePublished || null}\n          onChange={handleUpdateRecord(\"datePublished\")}\n          disabled={disabled}\n        />\n      </Paper>\n\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>\n              What is the date when data was revised? Leave blank if dataset\n              hasn't been revised.\n            </En>\n            <Fr>\n              Quelle est la date à laquelle les données ont été révisées ?\n              Laissez le champs vide si le jeu de données n'a pas a été révisé.\n            </Fr>\n          </I18n>\n          <SupplementalText>\n            <I18n>\n              <En>\n                <p>\n                  Please note that this field does not need to be populated or\n                  updated when revisions are made to the metadata, but rather\n                  when a new version of the data file or package becomes\n                  available, i.e. for time-series data.\n                </p>\n              </En>\n              <Fr>\n                <p>\n                  Veuillez noter que ce champ n'a pas besoin d'être rempli ou\n                  mis à jour lorsque des révisions sont apportées aux\n                  métadonnées, mais plutôt lorsqu'une nouvelle version du\n                  fichier ou du paquet de données devient disponible,\n                  c'est-à-dire pour les données de séries temporelles.\n                </p>\n              </Fr>\n            </I18n>\n          </SupplementalText>\n        </QuestionText>\n        <DateInput\n          name=\"dateRevised\"\n          value={record.dateRevised || null}\n          onChange={handleUpdateRecord(\"dateRevised\")}\n          disabled={disabled}\n        />\n      </Paper>\n\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>What is the DOI for this dataset? Eg,</En>\n            <Fr>Quel est le DOI de ce jeu de données ? Par exemple,</Fr>\n          </I18n>{\" \"}\n          10.0000/0000\n        </QuestionText>\n\n        <TextField\n          style={{ marginTop: \"10px\" }}\n          name=\"datasetIdentifier\"\n          helperText={\n            doiIsValid ? \"\" : <I18n en=\"Invalid DOI\" fr=\"DOI non valide\" />\n          }\n          error={!doiIsValid}\n          value={record.datasetIdentifier}\n          onChange={handleUpdateRecord(\"datasetIdentifier\")}\n          fullWidth\n        />\n      </Paper>\n\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>How is the dataset licensed?</En>\n            <Fr>Quelle est la licence de ce jeu de données?</Fr>\n          </I18n>\n          <RequiredMark passes={validateField(record, \"license\")} />\n          <SupplementalText>\n            <I18n>\n              <En>\n                <ul>\n                  <li>\n                    <b>\n                      <a\n                        href=\"https://creativecommons.org/licenses/by/4.0/\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        Creative Commons Attribution 4.0 International licence\n                        (CC-BY 4.0)\n                      </a>\n                    </b>{\" \"}\n                    - CIOOS recommended. Allows for open sharing and adaptation\n                    of the data provided that the original creator is\n                    attributed.\n                  </li>\n                  <li>\n                    <b>\n                      <a\n                        href=\"https://creativecommons.org/share-your-work/public-domain/cc0/\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        Creative Commons 0\n                      </a>\n                    </b>{\" \"}\n                    - imposes no restrictions of any kind.\n                  </li>\n                  <li>\n                    <b>\n                      <a\n                        href=\"https://open.canada.ca/en/open-government-licence-canada\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        Open Government Licence - Canada\n                      </a>\n                    </b>{\" \"}\n                    - For datasets made available by Government of Canada\n                    departments and agencies, it is very similar to CC-BY as it\n                    allows for open sharing and adaptation of the data, provided\n                    that the original creator of the data is properly\n                    attributed.\n                  </li>\n                </ul>\n              </En>\n              <Fr>\n                <ul>\n                  <li>\n                    <b>\n                      Licence internationale Creative Commons Attribution 4.0\n                      (CC-BY 4.0){\" \"}\n                    </b>\n                    - Licence recommandée par le SIOOC. Les données sont\n                    ouvertes, mais la licence exige que le jeu de données soit\n                    cité lorsqu’il est utilisé par un autre utilisateur.\n                  </li>\n                  <li>\n                    <b>Creative Commons 0</b> - N’impose aucune restriction\n                    particulière : le jeu de données peut être utilisé sans être\n                    cité.\n                  </li>\n                  <li>\n                    <b>Licence du gouvernement ouvert - Canada</b> - Pour les\n                    jeux de données rendus disponibles par les organisations et\n                    ministères fédéraux. Cette licence est similaire à CC-BY 4.0\n                    : les données sont ouvertes mais le jeu de données doit être\n                    cité lorsqu'il est utilisé par un autre utilisateur.\n                  </li>\n                </ul>\n              </Fr>\n            </I18n>\n          </SupplementalText>\n        </QuestionText>\n        <SelectInput\n          value={record.license}\n          onChange={handleUpdateRecord(\"license\")}\n          optionLabels={licensesSorted.map((l) => (\n            <span>\n              {l.title[language] || l.title.en}\n\n              <Tooltip\n                title={\n                  <I18n\n                    en=\"Open license definition in new window\"\n                    fr=\"Ouvrir la définition de licence dans une nouvelle fenêtre\"\n                  />\n                }\n              >\n                <IconButton\n                  onClick={() => {\n                    const win = window.open(l.url, \"_blank\");\n                    win.focus();\n                  }}\n                >\n                  <OpenInNew />\n                </IconButton>\n              </Tooltip>\n            </span>\n          ))}\n          options={licensesSorted.map((l) => l.code)}\n          disabled={disabled}\n        />\n      </Paper>\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>What are the limitations affecting the dataset?</En>\n            <Fr>Quelles sont les limitations affectant le jeu de données?</Fr>\n          </I18n>\n          <SupplementalText>\n            <I18n>\n              <En>\n                For example:\n                <i>\n                  <ul>\n                    <li>Not to be used for navigational purposes.</li>\n                    <li>Instrument was not calibrated on day.</li>\n                    <li>Haven’t applied appropriate QC on the data yet.</li>\n                  </ul>\n                </i>\n              </En>\n              <Fr>\n                Par exemple :\n                <i>\n                  <ul>\n                    <li>Ne pas utiliser à des fins de navigation.</li>\n                    <li>L' instrument n'a pas été étalonné.</li>\n                    <li>\n                      Un contrôle de qualité n’a pas été effectué sur les\n                      données.\n                    </li>\n                  </ul>\n                </i>\n              </Fr>\n            </I18n>\n          </SupplementalText>\n        </QuestionText>\n        <BilingualTextInput\n          value={record.limitations}\n          onChange={handleUpdateRecord(\"limitations\")}\n          multiline\n          disabled={disabled}\n        />\n      </Paper>\n    </div>\n  );\n};\n\nexport default IdentificationTab;\n","import React, { useState } from \"react\";\nimport { Add, Delete } from \"@material-ui/icons\";\nimport {\n  TextField,\n  Grid,\n  Typography,\n  Button,\n  Paper,\n  List,\n  ListItem,\n  ListItemText,\n} from \"@material-ui/core\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport BilingualTextInput from \"./BilingualTextInput\";\nimport { deepCopy } from \"../../utils/misc\";\n\nimport RequiredMark from \"./RequiredMark\";\n\nconst emptyInstrument = {\n  id: \"\",\n  manufacturer: \"\",\n  version: \"\",\n  type: { en: \"\", fr: \"\" },\n  description: { en: \"\", fr: \"\" },\n};\n\nconst Instruments = ({\n  updateInstruments,\n  instruments = [],\n  disabled,\n  paperClass,\n}) => {\n  const [activeInstrument, setActiveInstrument] = useState(0);\n\n  function addInstrument() {\n    updateInstruments(instruments.concat(deepCopy(emptyInstrument)));\n    setActiveInstrument(instruments.length);\n  }\n  function updateInstrumentField(key) {\n    return (e) => {\n      const instrumentsCopy = [...instruments];\n      instrumentsCopy[activeInstrument][key] = e.target.value;\n      updateInstruments(instrumentsCopy);\n    };\n  }\n  function removeInstrument() {\n    updateInstruments(\n      instruments.filter((e, index) => index !== activeInstrument)\n    );\n    if (instruments.length) setActiveInstrument(instruments.length - 2);\n  }\n\n  const manufacturerLabel = <I18n en=\"Manufacturer\" fr=\"Fabricant\" />;\n  const versionLabel = <I18n en=\"Version\" fr=\"Version\" />;\n  const typeLabel = <I18n en=\"Type\" fr=\"Type\" />;\n  const descriptionLabel = <I18n en=\"Description\" fr=\"Description\" />;\n\n  const instrument = instruments.length > 0 && instruments[activeInstrument];\n\n  return (\n    <Grid container direction=\"row\" spacing={3}>\n      <Grid item xs={3}>\n        <Grid container direction=\"column\" spacing={2}>\n          <Grid item xs>\n            Instruments:\n            <List>\n              {instruments.map((instrumentItem, i) => {\n                return (\n                  <ListItem\n                    key={i}\n                    button\n                    onClick={() => setActiveInstrument(i)}\n                  >\n                    <ListItemText\n                      primary={\n                        <Typography\n                          style={{\n                            fontWeight: activeInstrument === i ? \"bold\" : \"\",\n                          }}\n                        >\n                          {i + 1}. {instrumentItem.id}\n                        </Typography>\n                      }\n                    />\n                  </ListItem>\n                );\n              })}\n            </List>\n          </Grid>\n\n          <Grid item xs>\n            <Button\n              disabled={disabled}\n              startIcon={<Add />}\n              onClick={addInstrument}\n              style={{ height: \"56px\", marginLeft: \"10px\" }}\n            >\n              <I18n>\n                <En>Add instrument</En>\n                <Fr>Ajouter un instrument</Fr>\n              </I18n>\n            </Button>\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item xs>\n        <Grid container direction=\"column\">\n          {instrument && (\n            <Paper style={paperClass}>\n              <Grid container direction=\"column\" spacing={2}>\n                <Grid item xs>\n                  <I18n>\n                    <En>Instrument ID</En>\n                    <Fr>L'ID de l'instrument</Fr>\n                  </I18n>\n                  <RequiredMark passes={instrument.id} />\n                  <TextField\n                    label=\"ID\"\n                    value={instrument.id}\n                    onChange={updateInstrumentField(\"id\")}\n                    fullWidth\n                    disabled={disabled}\n                  />\n                </Grid>\n                <Grid item xs>\n                  <TextField\n                    label={manufacturerLabel}\n                    name=\"manufacturer\"\n                    value={instrument.manufacturer}\n                    onChange={updateInstrumentField(\"manufacturer\")}\n                    fullWidth\n                    disabled={disabled}\n                  />{\" \"}\n                </Grid>\n                <Grid item xs>\n                  <TextField\n                    label={versionLabel}\n                    value={instrument.version}\n                    onChange={updateInstrumentField(\"version\")}\n                    fullWidth\n                    disabled={disabled}\n                  />\n                </Grid>\n                <Grid item xs>\n                  <Typography>\n                    <I18n>\n                      <En>Instrument Type</En>\n                      <Fr>Type d'instrument</Fr>\n                    </I18n>\n                  </Typography>\n                  <BilingualTextInput\n                    label={typeLabel}\n                    value={instrument.type}\n                    onChange={updateInstrumentField(\"type\")}\n                    disabled={disabled}\n                  />\n                </Grid>{\" \"}\n                <Grid item xs>\n                  <Typography>Description</Typography>\n                  <BilingualTextInput\n                    label={descriptionLabel}\n                    value={instrument.description}\n                    onChange={updateInstrumentField(\"description\")}\n                    disabled={disabled}\n                  />\n                </Grid>\n                <Grid item xs>\n                  <Button\n                    startIcon={<Delete />}\n                    disabled={disabled}\n                    onClick={removeInstrument}\n                  >\n                    <I18n>\n                      <En>Remove item</En>\n                      <Fr>Supprimer l'instrument</Fr>\n                    </I18n>\n                  </Button>\n                </Grid>\n              </Grid>\n            </Paper>\n          )}\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n};\nexport default Instruments;\n","import React from \"react\";\n\nimport { TextField, Grid } from \"@material-ui/core\";\n\nimport BilingualTextInput from \"./BilingualTextInput\";\nimport { QuestionText, SupplementalText, paperClass } from \"./QuestionStyles\";\nimport RequiredMark from \"./RequiredMark\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport { validateField } from \"../../utils/validate\";\n\nconst Platform = ({ record, handleUpdateRecord, disabled }) => (\n  <>\n    {/* TODO remove tacky negative margin */}\n    <Grid item xs style={{ ...paperClass, marginTop: \"-40px\" }}>\n      <QuestionText>\n        <I18n>\n          <En>Describe the platform</En>\n          <Fr>Décrire la plateforme</Fr>\n        </I18n>\n        <SupplementalText>\n          <I18n>\n            <En>Eg, the name or type of platform</En>\n            <Fr>Par exemple, le nom ou le type de plateforme.</Fr>\n          </I18n>\n          <RequiredMark passes={validateField(record, \"platformDescription\")} />\n        </SupplementalText>\n      </QuestionText>\n      <BilingualTextInput\n        value={record.platformDescription}\n        onChange={handleUpdateRecord(\"platformDescription\")}\n        multiline\n        disabled={disabled}\n      />\n    </Grid>\n\n    <Grid item xs style={paperClass}>\n      <QuestionText>\n        <I18n>\n          <En>What is the platform ID or code?</En>\n          <Fr>Quel est l'ID de la plateforme ?</Fr>\n        </I18n>\n        <SupplementalText>\n          <I18n>\n            <En>\n              This is a unique identification of the platform. If the platform\n              is registered with ICES, use that identifier\n            </En>\n            <Fr>\n              Il s'agit d'une identification unique de la plateforme. Si la\n              plateforme est enregistrée auprès du{\" \"}\n              <a\n                href=\"https://www.ices.dk/\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                CIEM\n              </a>\n              , utilisez cet identificateur\n            </Fr>\n          </I18n>\n          <RequiredMark passes={validateField(record, \"platformID\")} />\n        </SupplementalText>\n      </QuestionText>\n\n      <TextField\n        label={<I18n en=\"Platform ID\" fr=\"ID de plateforme\" />}\n        value={record.platformID}\n        onChange={handleUpdateRecord(\"platformID\")}\n        fullWidth\n        disabled={disabled}\n      />\n    </Grid>\n  </>\n);\n\nexport default Platform;\n","import React from \"react\";\n\nimport { Paper, Grid, FormControlLabel, Checkbox } from \"@material-ui/core\";\nimport Instruments from \"../FormComponents/Instruments\";\n\nimport { QuestionText, paperClass } from \"../FormComponents/QuestionStyles\";\nimport RequiredMark from \"../FormComponents/RequiredMark\";\nimport Platform from \"../FormComponents/Platform\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport { validateField } from \"../../utils/validate\";\n\nconst PlatformTab = ({\n  disabled,\n  record,\n  handleUpdateRecord,\n  updateRecord,\n}) => {\n  const noPlatform = record.noPlatform && record.noPlatform !== \"false\";\n\n  return (\n    <div>\n      <Paper style={paperClass}>\n        <Grid container direction=\"column\" spacing={0}>\n          <Grid item xs style={paperClass}>\n            <QuestionText>\n              <I18n>\n                <En>\n                  A platform is anything used in data collection that has\n                  instrument(s) attached to it. Eg:\n                  <ul>\n                    <li>Glider</li>\n                    <li>Ship</li>\n                    <li>Buoy</li>\n                    <li>Satellite</li>\n                    <li>Rossette</li>\n                    <li>ROV</li>\n                    <li>Mooring</li>\n                  </ul>\n                  It is strongly encouraged to fill out platform information. If\n                  there is no platform, you can enter instruments at the bottom\n                  of the page.\n                </En>\n                <Fr>\n                  Une plateforme est tout ce qui est utilisé dans la collecte de\n                  données auquel un ou plusieurs instruments sont attachés. Par\n                  exemple :\n                  <ul>\n                    <li>\n                      <i>Glider</i>\n                    </li>\n                    <li>Navire</li>\n                    <li>Bouée</li>\n                    <li>Satellite</li>\n                    <li>Rosette</li>\n                    <li>ROV</li>\n                    <li>Amarrage</li>\n                  </ul>\n                  Il est fortement encouragé d'ajouter des informations sur une\n                  plateforme. S'il n'y a pas de plateformes, vous pouvez entrer\n                  des informations sur les instruments au bas de la page.\n                </Fr>\n              </I18n>\n            </QuestionText>\n\n            <FormControlLabel\n              disabled={disabled}\n              control={\n                <Checkbox\n                  name=\"noPlatform\"\n                  checked={noPlatform}\n                  onChange={(e) => {\n                    const { checked } = e.target;\n\n                    updateRecord(\"noPlatform\")(checked);\n                  }}\n                />\n              }\n              label={\n                <I18n>\n                  <En>This dataset doesn't have a platform</En>\n                  <Fr>Ce jeu de données n'a pas de plateforme</Fr>\n                </I18n>\n              }\n            />\n          </Grid>\n\n          <Grid item xs style={paperClass}>\n            {!noPlatform ? (\n              <>\n                <Platform\n                  record={record}\n                  handleUpdateRecord={handleUpdateRecord}\n                  disabled={disabled}\n                />\n\n                <QuestionText>\n                  <I18n>\n                    <En>\n                      At least one instrument is required if there is a\n                      platform.\n                    </En>\n                    <Fr>\n                      Au moins un instrument est requis s'il y a une plateforme.\n                    </Fr>\n                  </I18n>\n\n                  <RequiredMark passes={validateField(record, \"instruments\")} />\n                </QuestionText>\n              </>\n            ) : (\n              <QuestionText>\n                <I18n>\n                  <En>You can still enter an instrument without a platform</En>\n                  <Fr>\n                    Vous pouvez toujours entrer dans un instrument sans\n                    plateforme\n                  </Fr>\n                </I18n>\n              </QuestionText>\n            )}\n\n            <Instruments\n              instruments={record.instruments}\n              updateInstruments={updateRecord(\"instruments\")}\n              disabled={disabled}\n              paperClass={paperClass}\n              noPlatform={noPlatform}\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n    </div>\n  );\n};\nexport default PlatformTab;\n","/* eslint-disable no-case-declarations */\n/* eslint-disable no-underscore-dangle */\nimport React, { useState } from \"react\";\n\nimport { TextField, Grid, Typography } from \"@material-ui/core\";\nimport L from \"leaflet\";\nimport {\n  Map,\n  TileLayer,\n  FeatureGroup,\n  withLeaflet,\n  Polygon as LeafletPolygon,\n  Rectangle as LeafletRectangle,\n} from \"react-leaflet\";\nimport { EditControl } from \"react-leaflet-draw\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"leaflet-draw/dist/leaflet.draw.css\";\nimport { I18n, En, Fr } from \"../I18n\";\n\nimport { QuestionText, SupplementalText } from \"./QuestionStyles\";\nimport { validateField } from \"../../utils/validate\";\nimport RequiredMark from \"./RequiredMark\";\n\nconst MapSelect = ({ updateMap, mapData = {}, disabled, record }) => {\n  // On map clear?\n  function handleMapClear() {\n    const emptySpatial = {\n      north: \"\",\n      south: \"\",\n      east: \"\",\n      west: \"\",\n      polygon: \"\",\n    };\n\n    updateMap(emptySpatial);\n  }\n\n  const [editableFG, setEditableFG] = useState(null);\n  const [, setLayerError] = useState(null);\n\n  const coordTest = /-?\\d+\\.?\\d+/;\n  const polyTest = /-?\\d+\\.?\\d+,\\s*-?\\d+\\.?\\d+\\s*?/g;\n\n  function clearExtraLayers(drawnItems) {\n    // From https://stackoverflow.com/questions/61073568/delete-layer-before-creating-a-new-one-with-react-leaflet-draw-in-leaflet\n    // Only allow one box on the map at a time\n    // if the number of layers is bigger than 1 then delete the first\n    if (Object.keys(drawnItems).length > 1) {\n      Object.keys(drawnItems).forEach((layerid) => {\n        const existingLayers = Object.keys(editableFG.leafletElement._layers)\n          .length;\n\n        if (existingLayers === 1) return;\n\n        const layer = drawnItems[layerid];\n\n        editableFG.leafletElement.removeLayer(layer);\n      });\n    }\n  }\n  // update a mapData property using an event\n  function handleChange(key) {\n    return (e) => {\n      const drawnItems = editableFG.leafletElement._layers;\n      clearExtraLayers(drawnItems);\n\n      const newData = { ...mapData, [key]: e.target.value };\n\n      updateMap(newData);\n    };\n  }\n  // update the polygon property using an event\n  function handleChangePoly(e) {\n    const drawnItems = editableFG.leafletElement._layers;\n    clearExtraLayers(drawnItems);\n\n    const newData = { ...mapData, polygon: e.target.value };\n    updateMap(newData);\n  }\n\n  function limitDecimals(x) {\n    return Number.parseFloat(x).toPrecision(4);\n  }\n\n  function parsePolyString(polygonList) {\n    let coordList = [...polygonList.matchAll(polyTest)].map((match) => {\n      return match[0];\n    });\n\n    try {\n      coordList = coordList.map((point) => {\n        return point.split(\",\").map(Number);\n      });\n    } catch (error) {\n      setLayerError({ error });\n    }\n\n    return coordList;\n  }\n\n  const hasBoundingBox = (\n    test_n = mapData.north,\n    test_s = mapData.south,\n    test_e = mapData.east,\n    test_w = mapData.west\n  ) => {\n    const test =\n      coordTest.test(test_n) &&\n      coordTest.test(test_s) &&\n      coordTest.test(test_e) &&\n      coordTest.test(test_w);\n\n    return test;\n  };\n\n  const hasPolygon = (test_string = mapData.polygon) => {\n    return polyTest.test(test_string);\n  };\n\n  const onCreated = (e) => {\n    const { layer, layerType } = e;\n\n    // remove any existing shapes\n    const drawnItems = editableFG.leafletElement._layers;\n    clearExtraLayers(drawnItems);\n\n    switch (layerType) {\n      case \"polygon\":\n        const points = layer.getLatLngs()[0];\n        const polygonStrings = points.map(\n          ({ lat, lng }) => `${limitDecimals(lat)},${limitDecimals(lng)}`\n        );\n        const polygon = polygonStrings.concat(polygonStrings[0]).join(\" \");\n\n        updateMap({ polygon });\n        break;\n\n      default: // Assume rectangle\n      case \"rectangle\":\n        const bounds = layer.getBounds();\n\n        let { lat: north, lng: east } = bounds.getNorthEast().wrap();\n        let { lat: south, lng: west } = bounds.getSouthWest().wrap();\n\n        north = limitDecimals(north);\n        south = limitDecimals(south);\n        east = limitDecimals(east);\n        west = limitDecimals(west);\n\n        const newValue = { north, south, east, west };\n        updateMap(newValue);\n    }\n  };\n\n  const onFeatureGroupReady = (reactFGref) => {\n    // store the featureGroup ref for future access to content\n    setEditableFG(reactFGref);\n  };\n  L.EditToolbar.Delete.include({\n    enable() {\n      // eslint-disable-next-line react/no-this-in-sfc\n      this.options.featureGroup.clearLayers();\n      handleMapClear();\n    },\n  });\n\n  const bboxIsDrawn = Boolean(\n    mapData.north || mapData.south || mapData.east || mapData.west\n  );\n\n  const fieldsAreEmpty = !bboxIsDrawn && !mapData.polygon;\n\n  return (\n    <div>\n      <Map\n        style={{ width: \"100%\", height: \"55vh\" }}\n        center={[50, -100]}\n        zoom={3}\n\n        // whenReady={loadExistingExtent}\n      >\n        <TileLayer\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        <FeatureGroup\n          ref={(featureGroupRef) => {\n            onFeatureGroupReady(featureGroupRef);\n          }}\n        >\n          {disabled === false && (\n            <EditControl\n              position=\"topleft\"\n              // onEdited={onEditPath}\n              onCreated={onCreated}\n              onMapClear={handleMapClear}\n              draw={{\n                marker: false,\n                circle: false,\n                polyline: false,\n                circlemarker: false,\n                polygon: true,\n              }}\n              edit={{\n                edit: false,\n              }}\n            />\n          )}\n\n          {hasPolygon() && (\n            <LeafletPolygon positions={parsePolyString(mapData.polygon)} />\n          )}\n\n          {hasBoundingBox() && (\n            <LeafletRectangle\n              bounds={[\n                [mapData.north, mapData.east],\n                [mapData.south, mapData.west],\n              ]}\n            />\n          )}\n        </FeatureGroup>\n      </Map>\n      <br />\n      <QuestionText>\n        <I18n>\n          <En>Bounding Box Coordinates</En>\n          <Fr>Coordonnées de délimitation - Est, Ouest, Nord, Sud</Fr>\n        </I18n>\n        {(bboxIsDrawn || fieldsAreEmpty) && (\n          <RequiredMark passes={validateField(record, \"map\")} />\n        )}\n\n        <SupplementalText>\n          <I18n>\n            <En>\n              If you are providing a bounding box, please provide the\n              coordinates in decimal degrees (eg 58.66) and not in decimal\n              minutes seconds.\n            </En>\n            <Fr>\n              Si vous fournissez des coordonnées de délimitation, veuillez les\n              fournir en <b>degrés décimaux</b>.\n            </Fr>\n          </I18n>\n        </SupplementalText>\n      </QuestionText>\n      <Grid container direction=\"row\" spacing={3}>\n        <Grid item xs={2}>\n          <TextField\n            label={<I18n en=\"North\" fr=\"Nord\" />}\n            value={mapData.north || \"\"}\n            inputProps={{ inputMode: \"numeric\", pattern: \"[0-9]*\" }}\n            onChange={handleChange(\"north\")}\n            type=\"number\"\n            disabled={disabled || Boolean(mapData.polygon)}\n          />\n        </Grid>\n        <Grid item xs={2}>\n          <TextField\n            label={<I18n en=\"South\" fr=\"Sud\" />}\n            value={mapData.south || \"\"}\n            onChange={handleChange(\"south\")}\n            type=\"number\"\n            disabled={disabled || Boolean(mapData.polygon)}\n          />\n        </Grid>\n        <Grid item xs={2}>\n          <TextField\n            label={<I18n en=\"East\" fr=\"Est\" />}\n            value={mapData.east || \"\"}\n            onChange={handleChange(\"east\")}\n            type=\"number\"\n            disabled={disabled || Boolean(mapData.polygon)}\n          />\n        </Grid>\n        <Grid item xs={2}>\n          <TextField\n            value={mapData.west || \"\"}\n            label={<I18n en=\"West\" fr=\"Ouest\" />}\n            onChange={handleChange(\"west\")}\n            type=\"number\"\n            disabled={disabled || Boolean(mapData.polygon)}\n          />\n        </Grid>\n      </Grid>\n\n      <Typography variant=\"h6\" style={{ margin: \"20px\", marginLeft: \"20%\" }}>\n        <I18n>\n          <En>OR</En>\n          <Fr>Ou</Fr>\n        </I18n>\n      </Typography>\n\n      <QuestionText>\n        <I18n>\n          <En>Polygon coordinates</En>\n          <Fr>Coordonnées du/des polygone(s)</Fr>\n        </I18n>\n        {(!bboxIsDrawn || fieldsAreEmpty) && (\n          <RequiredMark passes={validateField(record, \"map\")} />\n        )}\n        <SupplementalText>\n          <I18n>\n            <En>\n              If you are providing polygon coordinates, they must start and end\n              with the same point. Eg,\n            </En>\n            <Fr>\n              Doivent commencer et se terminer par le même point. Par exemple,\n            </Fr>\n          </I18n>{\" \"}\n          48,-128 56,-133 56,-147 48,-128\n        </SupplementalText>\n      </QuestionText>\n      <TextField\n        value={mapData.polygon || \"\"}\n        onChange={handleChangePoly}\n        type=\"text\"\n        fullWidth\n        disabled={disabled || bboxIsDrawn}\n      />\n    </div>\n  );\n};\n\nexport default withLeaflet(MapSelect);\n","import { Paper, TextField, Grid, Tooltip, IconButton } from \"@material-ui/core\";\nimport React from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nimport { OpenInNew } from \"@material-ui/icons\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport RequiredMark from \"../FormComponents/RequiredMark\";\n\nimport MapSelect from \"../FormComponents/MapSelect\";\n\nimport SelectInput from \"../FormComponents/SelectInput\";\nimport { depthDirections } from \"../../isoCodeLists\";\n\nimport {\n  QuestionText,\n  SupplementalText,\n  paperClass,\n} from \"../FormComponents/QuestionStyles\";\nimport { validateField } from \"../../utils/validate\";\n\nconst OpenEPSGDefn = ({ url }) => {\n  return (\n    <IconButton\n      onClick={() => {\n        const win = window.open(url, \"_blank\");\n        win.focus();\n      }}\n    >\n      <Tooltip\n        title={\n          <I18n\n            en=\"Open EPSG definition in new window\"\n            fr=\"Ouvrir la définition EPSG dans une nouvelle fenêtre\"\n          />\n        }\n      >\n        <OpenInNew />\n      </Tooltip>\n    </IconButton>\n  );\n};\nconst SpatialTab = ({ disabled, record, handleUpdateRecord, updateRecord }) => {\n  const { language } = useParams();\n\n  return (\n    <Grid>\n      <Paper style={paperClass}>\n        <QuestionText style={{ paddingBottom: \"15px\" }}>\n          <I18n>\n            <En>What is the spatial extent of the dataset?</En>\n            <Fr>Quelle est l'étendue géographique du jeu de données?</Fr>\n          </I18n>\n\n          <SupplementalText>\n            <div>\n              <I18n>\n                <En>\n                  You can draw a bounding box or polygon for the dataset using\n                  the Polygon or Box buttons at the left side of them form.\n                  Alternatively you can enter them using the fields below.\n                  Either a bounding box or a Polygon is required.\n                </En>\n                <Fr>\n                  Vous pouvez tracer un cadre ou un polygone pour situer\n                  géographiquement votre jeu de données. Vous pouvez aussi\n                  localiser l’aire géographique couverte par votre jeu de\n                  données en inscrivant les coordonnées géographiques (degrés\n                  décimaux) dans les champs apparaissant sous la carte. Cette\n                  section doit obligatoirement être complétée.\n                </Fr>\n              </I18n>\n            </div>\n            <br />\n            <div>\n              <I18n>\n                <En>\n                  Define the geographical area using the tool that meets the\n                  geographic distribution of your data. Broadly distributed data\n                  in the open ocean might be well served by a bounding box.\n                  Tightly clustered coastal data may benefit from a polygon that\n                  does not include terrain or unsampled area.\n                </En>\n                <Fr>\n                  Définissez la zone géographique à l'aide de l'outil qui\n                  correspond à la distribution géographique de vos données. Les\n                  données largement distribuées en haute mer peuvent être bien\n                  desservies par un cadre englobant. Les données côtières\n                  étroitement regroupées peuvent bénéficier d'un polygone qui\n                  n'inclut pas le terrain ou la zone non échantillonnée.\n                </Fr>\n              </I18n>\n            </div>\n          </SupplementalText>\n        </QuestionText>\n        <MapSelect\n          mapData={record.map}\n          updateMap={updateRecord(\"map\")}\n          handleUpdateMap={updateRecord(\"map\")}\n          disabled={disabled}\n          record={record}\n        />\n      </Paper>\n      <Paper style={paperClass}>\n        <QuestionText>\n          <I18n>\n            <En>What is the vertical extent of the dataset in meters?</En>\n            <Fr>Quelle est l'étendue verticale du jeu de données en mètres?</Fr>\n          </I18n>\n          <RequiredMark\n            passes={\n              validateField(record, \"verticalExtentDirection\") &&\n              validateField(record, \"verticalExtentMin\") &&\n              validateField(record, \"verticalExtentMax\")\n            }\n          />\n\n          <SupplementalText>\n            <div>\n              <I18n>\n                <En>\n                  This captures the minimum and maximum depths (or height from\n                  sea floor) where the instrument recorded data.\n                </En>\n\n                <Fr>\n                  Cela permet de capturer les profondeurs minimales et maximales\n                  (ou la hauteur de fond marin) où l'instrument a enregistré des\n                  données.\n                </Fr>\n              </I18n>\n            </div>\n\n            <div style={{ paddingTop: \"5px\" }}>\n              <I18n>\n                <En>\n                  Depth positive: Depth is recorded with positive values (i.e. a\n                  maximum value of 150m implies 150m below the water surface).\n                </En>\n                <Fr>\n                  Profondeur positive: La profondeur est enregistrée avec des\n                  valeurs positives (c'est-à-dire un une valeur maximale de 150\n                  m implique 150 m sous la surface de l'eau).\n                </Fr>\n              </I18n>\n              <OpenEPSGDefn url=\"https://epsg.io/5831\" />\n            </div>\n            <div>\n              <I18n>\n                <En>\n                  Height Positive: Height is the elevation from water surface\n                  (i.e. a maximum value of 150m implies 150m above the water\n                  surface).\n                </En>\n                <Fr>\n                  Hauteur positive : La hauteur est l'altitude par rapport à la\n                  surface de l'eau (c'est-à-dire qu'une valeur maximale de 150 m\n                  implique 150 m au-dessus de la surface de l'eau).\n                </Fr>\n              </I18n>\n              <OpenEPSGDefn url=\"https://epsg.io/5829\" />\n            </div>\n          </SupplementalText>\n        </QuestionText>\n        <Grid\n          container\n          direction=\"row\"\n          justify=\"flex-start\"\n          alignItems=\"flex-start\"\n          spacing={4}\n        >\n          <Grid item xs={5}>\n            <SelectInput\n              value={record.verticalExtentDirection || \"\"}\n              onChange={handleUpdateRecord(\"verticalExtentDirection\")}\n              options={Object.keys(depthDirections)}\n              optionLabels={Object.values(depthDirections).map(\n                (e) => e[language]\n              )}\n              disabled={disabled}\n            />\n          </Grid>\n          <Grid item xs={2}>\n            <TextField\n              value={record.verticalExtentMin}\n              onChange={handleUpdateRecord(\"verticalExtentMin\")}\n              label=\"Min\"\n              fullWidth\n              type=\"number\"\n              disabled={disabled}\n            />\n          </Grid>\n          <Grid item xs={2}>\n            <TextField\n              value={record.verticalExtentMax}\n              onChange={handleUpdateRecord(\"verticalExtentMax\")}\n              label=\"Max\"\n              fullWidth\n              type=\"number\"\n              disabled={disabled}\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n    </Grid>\n  );\n};\n\nexport default SpatialTab;\n","const tabs = {\n  // Submit section\n  start: { en: \"Start\", fr: \"Accueil\" },\n  dataID: { en: \"Data Identification\", fr: \"Identification des données\" },\n  spatial: { en: \"Spatial\", fr: \"Spatial\" },\n  contacts: { en: \"Contacts\", fr: \"Contacts\" },\n  resources: { en: \"Resources\", fr: \"Ressources\" },\n  platform: { en: \"Platform\", fr: \"Plateforme\" },\n  platformInstruments: {\n    en: \"Platform - instruments\",\n    fr: \"Plateforme - instruments\",\n  },\n};\nexport default tabs;\n","import { useParams } from \"react-router-dom\";\n\nimport regions from \"../../regions\";\n\nfunction GetRegionInfo() {\n  const { region } = useParams();\n  return regions[region];\n}\n\nexport default GetRegionInfo;\n","import React, { useState } from \"react\";\n\nimport {\n  Paper,\n  Grid,\n  List,\n  ListItem,\n  ListItemText,\n  Typography,\n  Button,\n  CircularProgress,\n} from \"@material-ui/core\";\n\nimport { useParams } from \"react-router-dom\";\n\nimport { paperClass } from \"../FormComponents/QuestionStyles\";\n\nimport { En, Fr, I18n } from \"../I18n\";\nimport { getErrorsByTab, recordIsValid } from \"../../utils/validate\";\nimport tabs from \"../../utils/tabs\";\n\nimport GetRegionInfo from \"../FormComponents/Regions\";\n\nconst SubmitTab = ({ record, submitRecord }) => {\n  const [isSubmitting, setSubmitting] = useState(false);\n\n  const { language } = useParams();\n\n  const validationErrors = getErrorsByTab(record);\n  const submitted = record.status === \"submitted\";\n  const regionInfo = GetRegionInfo();\n\n  return (\n    <Paper style={paperClass}>\n      <Grid container direction=\"column\" spacing={3}>\n        <Grid item xs>\n          <Typography>\n            <I18n>\n              <En>\n                Thank-you for completing this form. The information will be\n                reviewed and a {regionInfo.title.en} staff member will contact\n                you to request more information or provide an update on when\n                your dataset will be available through the{\" \"}\n                {regionInfo.catalogueTitle.en}. Your information will not be\n                published before you are contacted. If you have any questions or\n                would like to follow up on the status of your record, please\n                contact\n              </En>\n              <Fr>\n                Merci d'avoir rempli ce formulaire. L'information sera validée\n                par un membre du personnel du {regionInfo.title.fr}. Cette\n                personne pourrait vous contacter pour obtenir plus\n                d'informations ou pour vous indiquer quand votre jeu de données\n                sera disponible dans notre {regionInfo.catalogueTitle.fr}. Vos\n                informations ne seront pas publiées avant d'obtenir votre\n                approbation. Si vous avez des questions ou si vous désirez\n                effectuer un suivi concernant l'état de votre soumission,\n                veuillez contacter\n              </Fr>\n            </I18n>{\" \"}\n            <a href={`mailto:${regionInfo.email}`}>{regionInfo.email}</a>.\n          </Typography>\n        </Grid>\n        {submitted ? (\n          <Grid item xs>\n            <Typography>\n              <I18n>\n                <En>\n                  Thank you for your submission. A reviewer has been notified.\n                  You will receive an email when the record is published. You\n                  are still able to edit this record by saving it, until it is\n                  published.\n                </En>\n                <Fr>\n                  Merci pour votre soumission. Un examinateur a été avisé. Vous\n                  recevrez un e-mail lors de la publication de l'enregistrement.\n                  Vous pouvez toujours modifier cet enregistrement en\n                  l'enregistrant, jusqu'à ce qu'il soit publié.\n                </Fr>\n              </I18n>\n            </Typography>\n          </Grid>\n        ) : (\n          <>\n            {recordIsValid(record) ? (\n              <>\n                <Grid item xs>\n                  <Typography>\n                    <I18n>\n                      <En>\n                        You have completed all of the required fields, your\n                        record can be submitted now.\n                      </En>\n                      <Fr>\n                        Vous avez rempli tous les champs obligatoires, vous\n                        pouvez maintenant soumettre votre formulaire.\n                      </Fr>\n                    </I18n>\n                  </Typography>\n                </Grid>\n                <Grid item xs>\n                  {isSubmitting ? (\n                    <CircularProgress />\n                  ) : (\n                    <Button\n                      onClick={() => {\n                        setSubmitting(true);\n                        submitRecord().then(() => {\n                          setSubmitting(false);\n                        });\n                      }}\n                      disabled={submitted}\n                    >\n                      <I18n>\n                        <En>Submit</En>\n                        <Fr>Soumettre</Fr>\n                      </I18n>\n                    </Button>\n                  )}\n                </Grid>\n              </>\n            ) : (\n              <>\n                <Grid item xs>\n                  <Typography>\n                    <I18n>\n                      <En>\n                        You haven't completed all of the required fields. You\n                        will need to address the list below before submitting.\n                      </En>\n                      <Fr>\n                        Vous n'avez pas rempli tous les champs obligatoires.\n                        Veuillez compléter les champs identifiés ci-dessous\n                        avant de soumettre votre demande.\n                      </Fr>\n                    </I18n>\n                  </Typography>\n                </Grid>\n\n                <Grid item xs>\n                  {Object.keys(validationErrors).map((tab) => (\n                    <div key={tab}>\n                      <Typography variant=\"h6\">\n                        {tabs[tab][language]}\n                      </Typography>\n                      <List>\n                        {validationErrors[tab].map(\n                          ({ [language]: error }, i) => (\n                            <ListItem key={i}>\n                              <ListItemText primary={error} />\n                            </ListItem>\n                          )\n                        )}\n                      </List>\n                    </div>\n                  ))}\n                </Grid>\n              </>\n            )}\n          </>\n        )}\n      </Grid>\n    </Paper>\n  );\n};\nexport default SubmitTab;\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React from \"react\";\nimport {\n  Box,\n  CircularProgress,\n  Grid,\n  Tab,\n  Tabs,\n  Fab,\n  Tooltip,\n  Typography,\n  LinearProgress,\n} from \"@material-ui/core\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { Save } from \"@material-ui/icons\";\nimport { withRouter } from \"react-router-dom\";\nimport FormClassTemplate from \"./FormClassTemplate\";\nimport { I18n, En, Fr } from \"../I18n\";\nimport StatusChip from \"../FormComponents/StatusChip\";\nimport LastEdited from \"../FormComponents/LastEdited\";\nimport NotFound from \"./NotFound\";\n\nimport SimpleModal from \"../FormComponents/SimpleModal\";\nimport StartTab from \"../Tabs/StartTab\";\nimport ContactTab from \"../Tabs/ContactTab\";\nimport ResourcesTab from \"../Tabs/ResourcesTab\";\nimport IdentificationTab from \"../Tabs/IdentificationTab\";\nimport PlatformTab from \"../Tabs/PlatformTab\";\nimport SpatialTab from \"../Tabs/SpatialTab\";\nimport SubmitTab from \"../Tabs/SubmitTab\";\n\nimport { auth } from \"../../auth\";\nimport firebase from \"../../firebase\";\nimport { firebaseToJSObject, trimStringsInObject } from \"../../utils/misc\";\nimport { submitRecord } from \"../../utils/firebaseRecordFunctions\";\nimport { UserContext } from \"../../providers/UserProvider\";\nimport { percentValid } from \"../../utils/validate\";\nimport tabs from \"../../utils/tabs\";\n\nimport getBlankRecord from \"../../utils/blankRecord\";\n\nconst LinearProgressWithLabel = ({ value }) => (\n  <Tooltip\n    title={\n      <I18n\n        en=\"Percentage of required fields filled in\"\n        fr=\"Pourcentage de champs obligatoires remplis\"\n      />\n    }\n  >\n    <Box display=\"flex\" width=\"90%\" style={{ margin: \"auto\" }}>\n      <Box width=\"100%\" mr={1}>\n        <LinearProgress\n          variant=\"determinate\"\n          value={value}\n          style={{ marginLeft: \"-30px\" }}\n        />\n      </Box>\n      <Box minWidth={35}>\n        <Typography variant=\"body2\" color=\"textSecondary\">{`${Math.round(\n          value\n        )}%`}</Typography>\n      </Box>\n    </Box>\n  </Tooltip>\n);\n\nfunction TabPanel({ children, value, index, ...other }) {\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box>{children}</Box>}\n    </div>\n  );\n}\n\nconst styles = (theme) => ({\n  tabRoot: {\n    minWidth: \"115px\",\n  },\n  fab: {\n    position: \"fixed\",\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  },\n});\nclass MetadataForm extends FormClassTemplate {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      record: getBlankRecord(),\n\n      // contacts saved by user (not the ones saved in the record)\n      // kept in firebase object format instead of array\n      userContacts: {},\n\n      // UI state:\n      loading: false,\n      tabIndex: \"start\",\n\n      // whether the 'save' icon button is greyed out or not\n      saveDisabled: true,\n\n      highlightMissingRequireFields: false,\n\n      editorInfo: { email: \"\", displayName: \"\" },\n      loggedInUserCanEditRecord: false,\n      saveIncompleteRecordModalOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    const { match } = this.props;\n    this.setState({ loading: true });\n\n    this.unsubscribe = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        const { region, recordID } = match.params;\n        const isNewRecord = match.url.endsWith(\"new\");\n        // could be viewer or reviewer\n        const loggedInUserID = user.uid;\n        const recordUserID = isNewRecord ? loggedInUserID : match.params.userID;\n        const loggedInUserOwnsRecord = loggedInUserID === recordUserID;\n        const { isReviewer } = this.context;\n        let editorInfo;\n        // get info of the person openeing the record\n        const editorDataRef = firebase\n          .database()\n          .ref(region)\n          .child(\"users\")\n          .child(loggedInUserID);\n        const userinfoRef = editorDataRef.child(\"userinfo\");\n        userinfoRef.on(\"value\", (userinfo) => {\n          editorInfo = userinfo.toJSON();\n\n          this.setState({ editorInfo });\n        });\n        this.listenerRefs.push(userinfoRef);\n\n        // get info of the original author of record\n        const userDataRef = firebase\n          .database()\n          .ref(region)\n          .child(\"users\")\n          .child(recordUserID);\n\n        // get contacts\n        const editorContactsRef = editorDataRef.child(\"contacts\");\n\n        editorContactsRef.on(\"value\", (contactsFB) => {\n          const userContacts = contactsFB.toJSON();\n          Object.entries(userContacts || {}).forEach(([k, v]) => {\n            v.contactID = k;\n          });\n          this.setState({ userContacts });\n        });\n        this.listenerRefs.push(editorContactsRef);\n\n        // if recordID is set then the user is editing an existing record\n        if (isNewRecord) {\n          this.setState({ loading: false, loggedInUserCanEditRecord: true });\n        } else {\n          const ref = userDataRef.child(\"records\").child(recordID);\n          ref.on(\"value\", (recordFireBase) => {\n            // Record not found, eg a bad link\n            const recordFireBaseObj = recordFireBase.toJSON();\n            if (!recordFireBaseObj) {\n              this.setState({ loading: false, record: null });\n\n              return;\n            }\n            const record = firebaseToJSObject(recordFireBaseObj);\n\n            const loggedInUserCanEditRecord =\n              isReviewer || loggedInUserOwnsRecord;\n\n            this.setState({\n              record: { ...getBlankRecord(), ...record, recordID },\n              loggedInUserCanEditRecord,\n            });\n            this.setState({ loading: false });\n          });\n          this.listenerRefs.push(ref);\n        }\n      }\n    });\n  }\n  toggleModal = (modalName, state, key = \"\", userID) => {\n    this.setState({ modalKey: key, [modalName]: state, modalUserID: userID });\n  };\n  // genereric handler for updating state, used by most form components\n  // generic event handler\n  handleUpdateRecord = (key) => (event) => {\n    const { value } = event.target;\n    const changes = { [key]: value };\n\n    this.setState(({ record }) => ({\n      record: { ...record, ...changes },\n      saveDisabled: false,\n    }));\n  };\n\n  // a second genereric handler components that dont use onChange\n  // generic state updater creator\n  updateRecord = (key) => (value) => {\n    const changes = { [key]: value };\n\n    this.setState(({ record }) => ({\n      record: { ...record, ...changes },\n      saveDisabled: false,\n    }));\n  };\n\n  saveUpdateContact(contact) {\n    const { contactID } = contact;\n    const { match } = this.props;\n\n    const { region } = match.params;\n\n    const contactsRef = firebase\n      .database()\n      .ref(region)\n      .child(\"users\")\n      .child(auth.currentUser.uid)\n      .child(\"contacts\");\n\n    // existing contact\n    if (contactID) {\n      contactsRef.child(contactID).update(contact);\n      return contactID;\n    }\n    // new contact\n\n    return contactsRef.push(contact).getKey();\n  }\n\n  async handleSubmitRecord() {\n    const { match } = this.props;\n    const { region, userID } = match.params;\n    const isNewRecord = match.url.endsWith(\"new\");\n    const { record } = this.state;\n    // Bit of logic here to decide if this is a user submitting their own form\n    // or a reviewer submitting it\n    const loggedInUserID = auth.currentUser.uid;\n    const recordUserID = isNewRecord ? loggedInUserID : userID;\n\n    const recordID = await this.handleSaveClick();\n    return submitRecord(region, recordUserID, recordID, \"submitted\", record);\n  }\n  // userOKedRecordDemotion - user has clicked that they understand that their record will be\n  // changed from published to draft since the record is incomplete\n  async handleSaveClick(userOKedRecordDemotion = false) {\n    const { match, history } = this.props;\n    const { language, region } = match.params;\n\n    const userID = match.params.userID || auth.currentUser.uid;\n\n    const recordsRef = firebase\n      .database()\n      .ref(region)\n      .child(\"users\")\n      .child(userID)\n      .child(\"records\");\n\n    // remove userContacts since they get saved elsewhere\n    const { editorInfo } = this.state;\n\n    // trim whitespace from all srtings in record\n    const record = trimStringsInObject(this.state.record);\n\n    // record doesn't have required fieds filled\n    const recordIsComplete = percentValid(record) === 1;\n\n    if (record.status === \"published\" && !recordIsComplete) {\n      // if userOKedRecordDemotion is set, user has acknowledge that record will be demoted to draft\n      if (userOKedRecordDemotion) {\n        record.status = \"\";\n      } else {\n        // display warning modal\n        this.toggleModal(\"saveIncompleteRecordModalOpen\", true);\n\n        return;\n      }\n    }\n    // created is really \"last updated\"\n    record.created = new Date().toISOString();\n\n    // having userID down here makes it easier to transfer records\n    record.userID = userID;\n\n    record.lastEditedBy = editorInfo;\n    let recordID;\n    if (record.recordID) {\n      recordID = record.recordID;\n      await recordsRef\n        .child(record.recordID)\n        // using blankRecord here in case there are new fields that the old record didnt have\n        .update({ ...getBlankRecord(), ...record });\n    } else {\n      // new record\n      const newNode = await recordsRef.push(record);\n\n      // cheesy workaround to the issue of push() not saving dates\n      await newNode.update(record);\n      recordID = newNode.key;\n      this.setState({\n        record: { ...record, recordID },\n      });\n      history.push(`/${language}/${region}/${userID}/${recordID}`);\n    }\n\n    // regnerate XML on save\n    if ([\"submitted\", \"published\"].includes(record.status)) {\n      const { regenerateXMLforRecord } = this.context;\n\n      const path = `${region}/${userID}/${recordID}`;\n      const { status, filename } = record;\n\n      regenerateXMLforRecord({ path, status, filename });\n    }\n\n    this.setState({ saveDisabled: true });\n    // if (match.url.endsWith(\"new\")) {\n    // set the URL so its shareable\n    // }\n    return recordID;\n  }\n\n  render() {\n    const { match } = this.props;\n    const { language } = match.params;\n    const { isReviewer } = this.context;\n\n    const {\n      userContacts,\n      tabIndex,\n      record,\n      saveDisabled,\n      loading,\n      highlightMissingRequireFields,\n      loggedInUserCanEditRecord,\n      saveIncompleteRecordModalOpen,\n    } = this.state;\n\n    if (!record) {\n      return <NotFound />;\n    }\n    const { classes } = this.props;\n\n    const disabled = !loggedInUserCanEditRecord;\n\n    const tabProps = {\n      highlightMissingRequireFields,\n      disabled,\n      record,\n      handleUpdateRecord: this.handleUpdateRecord,\n      updateRecord: this.updateRecord,\n    };\n    const percentValidInt = Math.round(percentValid(record) * 100);\n\n    return loading ? (\n      <CircularProgress />\n    ) : (\n      <Grid\n        container\n        direction=\"column\"\n        justify=\"space-between\"\n        alignItems=\"stretch\"\n        spacing={3}\n      >\n        <SimpleModal\n          open={saveIncompleteRecordModalOpen}\n          modalQuestion={\n            <I18n\n              en=\"Record is missing required fields. Saving will demote it to draft. Do you want to do this?\"\n              fr=\"Il manque des champs obligatoires dans l'enregistrement. L'enregistrement le rétrogradera en brouillon. Est-ce que tu veux le faire ?\"\n            />\n          }\n          onClose={() => {\n            this.toggleModal(\"saveIncompleteRecordModalOpen\", false);\n          }}\n          onAccept={() => {\n            this.handleSaveClick(true);\n            this.toggleModal(\"saveIncompleteRecordModalOpen\", false);\n          }}\n        />\n\n        <Fab\n          color=\"primary\"\n          aria-label=\"add\"\n          className={classes.fab}\n          disabled={\n            saveDisabled || !(record.title.en || record.title.fr) || disabled\n          }\n          onClick={() => this.handleSaveClick()}\n        >\n          <Tooltip\n            placement=\"right-start\"\n            title={\n              saveDisabled\n                ? \"Dataset needs a title before it can be saved\"\n                : \"Save record.\"\n            }\n          >\n            <span>\n              <Save />\n            </span>\n          </Tooltip>\n        </Fab>\n        <Grid container spacing={2} direction=\"row\" alignItems=\"center\">\n          <Grid item xs>\n            <Tabs\n              scrollButtons=\"auto\"\n              variant=\"fullWidth\"\n              value={tabIndex}\n              onChange={(e, newValue) => this.setState({ tabIndex: newValue })}\n              aria-label=\"simple tabs example\"\n            >\n              <Tab\n                fullWidth\n                classes={{ root: classes.tabRoot }}\n                label={tabs.start[language]}\n                value=\"start\"\n              />\n              <Tab\n                fullWidth\n                classes={{ root: classes.tabRoot }}\n                label={tabs.dataID[language]}\n                value=\"identification\"\n              />\n              <Tab\n                fullWidth\n                classes={{ root: classes.tabRoot }}\n                label={tabs.spatial[language]}\n                value=\"spatial\"\n              />\n              <Tab\n                fullWidth\n                classes={{ root: classes.tabRoot }}\n                label=\"Contact\"\n                value=\"contact\"\n              />\n              <Tab\n                fullWidth\n                classes={{ root: classes.tabRoot }}\n                label={tabs.resources[language]}\n                value=\"distribution\"\n              />\n              <Tab\n                fullWidth\n                classes={{ root: classes.tabRoot }}\n                label={tabs.platform[language]}\n                value=\"platform\"\n              />\n              {loggedInUserCanEditRecord && (\n                <Tab\n                  fullWidth\n                  classes={{ root: classes.tabRoot }}\n                  label={<I18n en=\"Submit\" fr=\"Soumettre\" />}\n                  value=\"submit\"\n                  disabled={\n                    record.status === \"submitted\" ||\n                    record.status === \"published\"\n                  }\n                />\n              )}\n            </Tabs>\n            <div style={{ marginTop: \"10px\", textAlign: \"center\" }}>\n              <Typography variant=\"h5\">\n                {(language && record.title?.[language]) || (\n                  <I18n en=\"New Record\" fr=\"Nouvel enregistrement\" />\n                )}{\" \"}\n                <StatusChip status={record.status} />\n              </Typography>\n              <Typography component=\"div\">\n                <i>\n                  <LastEdited dateStr={record.created} />\n                  {record.lastEditedBy?.displayName && (\n                    <>\n                      <I18n>\n                        <En>by </En>\n                        <Fr>Par </Fr>\n                      </I18n>\n                      {record.lastEditedBy.displayName}{\" \"}\n                      {isReviewer && record.lastEditedBy.email}\n                    </>\n                  )}\n                </i>\n                <LinearProgressWithLabel value={percentValidInt} />\n              </Typography>\n            </div>\n          </Grid>\n        </Grid>\n        <TabPanel value={tabIndex} index=\"start\">\n          <StartTab {...tabProps} />\n        </TabPanel>\n        <TabPanel value={tabIndex} index=\"identification\">\n          <IdentificationTab {...tabProps} />\n        </TabPanel>\n        <TabPanel value={tabIndex} index=\"spatial\">\n          <SpatialTab {...tabProps} />\n        </TabPanel>\n        <TabPanel value={tabIndex} index=\"platform\">\n          <PlatformTab {...tabProps} />\n        </TabPanel>\n        <TabPanel value={tabIndex} index=\"distribution\">\n          <ResourcesTab {...tabProps} />\n        </TabPanel>\n\n        <TabPanel value={tabIndex} index=\"submit\">\n          <SubmitTab\n            {...tabProps}\n            submitRecord={() => this.handleSubmitRecord()}\n          />\n        </TabPanel>\n\n        <TabPanel value={tabIndex} index=\"contact\">\n          {/* userContacts are the ones the user has saved, not necessarily part of the record */}\n          <ContactTab\n            userContacts={userContacts}\n            saveToContacts={(c) => this.saveUpdateContact(c)}\n            {...tabProps}\n          />\n        </TabPanel>\n      </Grid>\n    );\n  }\n}\nMetadataForm.contextType = UserContext;\nexport default withStyles(styles)(withRouter(MetadataForm));\n","import React, { Component } from \"react\";\nimport * as Sentry from \"@sentry/react\";\nimport { I18n, En, Fr } from \"../I18n\";\n\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.error(error, errorInfo);\n    Sentry.captureException(error);\n  }\n\n  render() {\n    const { hasError } = this.state;\n    const { children } = this.props;\n    if (hasError) {\n      return (\n        <div>\n          <h1>\n            <I18n>\n              <En>Something went wrong!</En>\n              <Fr>Un problème s'est produit!</Fr>\n            </I18n>\n          </h1>\n          <h5>\n            <I18n>\n              <En>\n                The developers have been notified and are working to resolve the\n                issue.\n              </En>\n              <Fr>\n                Les développeurs ont été avertis et s'efforçent de résoudre le\n                problème.\n              </Fr>\n            </I18n>\n          </h5>\n        </div>\n      );\n    }\n    return children;\n  }\n}\n\nexport default ErrorBoundary;\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { Grid, Button } from \"@material-ui/core\";\nimport { Save } from \"@material-ui/icons\";\nimport firebase from \"../../firebase\";\nimport { auth } from \"../../auth\";\n\nimport { En, Fr, I18n } from \"../I18n\";\n\nimport ContactEditor from \"./ContactEditor\";\nimport FormClassTemplate from \"../Pages/FormClassTemplate\";\n\nclass EditContact extends FormClassTemplate {\n  constructor(props) {\n    super(props);\n    this.state = {\n      orgName: \"\",\n      orgEmail: \"\",\n      orgURL: \"\",\n      orgAdress: \"\",\n      orgCity: \"\",\n      orgCountry: \"\",\n      // ind = individual\n      indName: \"\",\n      indPosition: \"\",\n      indEmail: \"\",\n    };\n    const { match } = props;\n\n    const { region } = match.params;\n\n    this.contactsRef = firebase\n      .database()\n      .ref(region)\n      .child(\"users\")\n      .child(auth.currentUser.uid)\n      .child(\"contacts\");\n  }\n\n  async componentDidMount() {\n    const { match } = this.props;\n\n    const { contactID } = match.params;\n\n    if (auth.currentUser && contactID) {\n      this.setState({ contactID });\n      const contactRef = this.contactsRef.child(contactID);\n      contactRef.on(\"value\", (contact) => this.setState(contact.toJSON()));\n      this.listenerRefs.push(contactRef);\n    }\n  }\n\n  handleChange(key) {\n    return (event) => {\n      this.setState({ [key]: event.target.value });\n    };\n  }\n\n  handleCancelClick() {\n    const { match, history } = this.props;\n    const { language, region } = match.params;\n\n    history.push(`/${language}/${region}/contacts`);\n  }\n\n  // Create or update contact\n  async handleSubmitClick() {\n    const { history, match } = this.props;\n\n    const { region, language, contactID } = match.params;\n\n    // update\n    if (contactID) this.contactsRef.child(contactID).update(this.state);\n    // create\n    else this.contactsRef.push(this.state);\n\n    history.push(`/${language}/${region}/contacts`);\n  }\n\n  render() {\n    const { orgName, indName } = this.state;\n    const isFilledEnoughToSave = orgName || indName;\n    return (\n      <Grid container direction=\"column\" spacing={2}>\n        <Grid item xs>\n          <ContactEditor\n            value={this.state}\n            updateContactEvent={(key) => this.handleChange(key)}\n            // updateContact\n          />\n        </Grid>\n\n        <Grid item xs>\n          <Button\n            startIcon={<Save />}\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => this.handleSubmitClick()}\n            disabled={!isFilledEnoughToSave}\n          >\n            <I18n>\n              <En>Save</En>\n              <Fr>Enregistrer</Fr>\n            </I18n>\n          </Button>\n\n          <Button\n            style={{ marginLeft: \"10px\" }}\n            variant=\"contained\"\n            color=\"secondary\"\n            onClick={() => this.handleCancelClick()}\n          >\n            <I18n>\n              <En>Cancel</En>\n              <Fr>Annuler</Fr>\n            </I18n>\n          </Button>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default withRouter(EditContact);\n","import React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Modal, TextField } from \"@material-ui/core\";\nimport { validateEmail } from \"../../utils/validate\";\n\nimport { En, Fr, I18n } from \"../I18n\";\n\nfunction rand() {\n  return Math.round(Math.random() * 20) - 10;\n}\n\nfunction getModalStyle() {\n  const top = 50 + rand();\n  const left = 50 + rand();\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: \"absolute\",\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\nexport default function TransferModal({\n  open,\n  onClose,\n  onAccept,\n  email,\n  setEmail,\n}) {\n  // result of the transger\n  const [transferResult, setTransferResult] = useState(true);\n  const [isTransferring, setIsTransferring] = useState(false);\n  const classes = useStyles();\n\n  // getModalStyle is not a pure function, we roll the style only on the first render\n  const [modalStyle] = React.useState(getModalStyle);\n\n  const emailIsValid = validateEmail(email);\n\n  return (\n    <div>\n      <Modal\n        open={open}\n        onClose={onClose}\n        aria-labelledby=\"simple-modal-title\"\n        aria-describedby=\"simple-modal-description\"\n      >\n        <div style={modalStyle} className={classes.paper}>\n          <h2 id=\"simple-modal-title\">\n            <I18n>\n              <En>Transfer Record</En>\n              <Fr>Enregistrement de transfert</Fr>\n            </I18n>\n          </h2>\n          {isTransferring ? (\n            <h3>\n              <I18n>\n                <En>Transferring...</En>\n                <Fr>Transfert en cours...</Fr>\n              </I18n>\n            </h3>\n          ) : (\n            <div>\n              {!transferResult && (\n                <h3>\n                  <I18n>\n                    <En>User {email} not found</En>\n                    <Fr>L'utilisateur {email} n'a pas été trouvé</Fr>\n                  </I18n>\n                </h3>\n              )}\n\n              <div>\n                <I18n>\n                  <En>\n                    Enter the email address of the user to transfer this record\n                    to. The user must have logged into this region at least\n                    once:\n                  </En>\n                  <Fr>\n                    Entrez l'adresse e-mail de l'utilisateur vers lequel\n                    transférer cet enregistrement. L'utilisateur doit s'être\n                    connecté à cette région au moins une fois:\n                  </Fr>\n                </I18n>\n              </div>\n\n              {/* naterosenstock@gmail.com */}\n              <div>\n                <TextField\n                  helperText={\n                    !emailIsValid && (\n                      <I18n en=\"Invalid email\" fr=\"E-mail non valide\" />\n                    )\n                  }\n                  error={!emailIsValid}\n                  value={email}\n                  onChange={(e) => {\n                    setTransferResult(true);\n                    setEmail(e.target.value);\n                  }}\n                  fullWidth\n                />\n              </div>\n\n              <button\n                type=\"button\"\n                disabled={!email || !emailIsValid || isTransferring}\n                onClick={async () => {\n                  setIsTransferring(true);\n                  const transferResult = await onAccept();\n\n                  setTransferResult(transferResult);\n                  setIsTransferring(false);\n                  if (transferResult) onClose();\n                }}\n              >\n                <I18n>\n                  <En>Transfer</En>\n                  <Fr>Transfert</Fr>\n                </I18n>\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setTransferResult(true);\n                  onClose();\n                }}\n              >\n                <I18n>\n                  <En>Cancel</En>\n                  <Fr>Annuler</Fr>\n                </I18n>\n              </button>\n            </div>\n          )}\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","import React from \"react\";\nimport {\n  Typography,\n  List,\n  Grid,\n  CircularProgress,\n  Checkbox,\n  TextField,\n  Paper,\n} from \"@material-ui/core\";\n\nimport Accordion from \"@material-ui/core/Accordion\";\nimport AccordionSummary from \"@material-ui/core/AccordionSummary\";\nimport AccordionDetails from \"@material-ui/core/AccordionDetails\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport { QuestionText } from \"../FormComponents/QuestionStyles\";\n\nimport firebase from \"../../firebase\";\nimport { auth } from \"../../auth\";\nimport { Fr, En, I18n } from \"../I18n\";\n\nimport CheckBoxList from \"../FormComponents/CheckBoxList\";\n\nimport SimpleModal from \"../FormComponents/SimpleModal\";\nimport TransferModal from \"../FormComponents/TransferModal\";\nimport MetadataRecordListItem from \"../FormComponents/MetadataRecordListItem\";\n\nimport {\n  loadRegionRecords,\n  transferRecord,\n  deleteRecord,\n  submitRecord,\n  cloneRecord,\n} from \"../../utils/firebaseRecordFunctions\";\nimport { unique } from \"../../utils/misc\";\nimport FormClassTemplate from \"./FormClassTemplate\";\n\nconst RecordItem = ({\n  record,\n  language,\n  editRecord,\n  toggleModal,\n  cloneRecord,\n}) => {\n  const commonProps = {\n    record,\n    key: record.key,\n    language,\n    onViewEditClick: () => editRecord(record.key, record.userinfo.userID),\n    onCloneClick: () => cloneRecord(record.key, record.userinfo.userID),\n    onDeleteClick: () =>\n      toggleModal(\"deleteModalOpen\", true, record.key, record.userinfo.userID),\n    onTransferClick: () =>\n      toggleModal(\n        \"transferModalOpen\",\n        true,\n        record.key,\n        record.userinfo.userID\n      ),\n    showAuthor: true,\n    showTransferButton: true,\n    showDeleteAction: true,\n    showCloneAction: true,\n  };\n\n  const DraftRecordItem = () => {\n    return (\n      <MetadataRecordListItem\n        onSubmitClick={() => {\n          return toggleModal(\n            \"submitModalOpen\",\n            true,\n            record.key,\n            record.userinfo.userID\n          );\n        }}\n        showSubmitAction\n        showEditAction\n        // eslint-disable-next-line react/jsx-props-no-spreading\n        {...commonProps}\n        showPercentComplete\n      />\n    );\n  };\n  const SubmittedRecordItem = () => (\n    <MetadataRecordListItem\n      onSubmitClick={() =>\n        toggleModal(\n          \"publishModalOpen\",\n          true,\n          record.key,\n          record.userinfo.userID\n        )\n      }\n      onUnSubmitClick={() =>\n        toggleModal(\n          \"unSubmitModalOpen\",\n          true,\n          record.key,\n          record.userinfo.userID\n        )\n      }\n      showPublishAction\n      showUnSubmitAction\n      showEditAction\n      showPercentComplete\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      {...commonProps}\n    />\n  );\n  const PublishedRecordItem = () => {\n    return (\n      <MetadataRecordListItem\n        onUnPublishClick={() =>\n          toggleModal(\n            \"unPublishModalOpen\",\n            true,\n            record.key,\n            record.userinfo.userID\n          )\n        }\n        showUnPublishAction\n        showViewAction\n        showPercentComplete\n        // eslint-disable-next-line react/jsx-props-no-spreading\n        {...commonProps}\n      />\n    );\n  };\n\n  if (record.status === \"submitted\") return <SubmittedRecordItem />;\n  if (record.status === \"published\") return <PublishedRecordItem />;\n  return <DraftRecordItem />;\n};\n\nclass Reviewer extends FormClassTemplate {\n  constructor(props) {\n    super(props);\n    this.state = {\n      users: [],\n      deleteModalOpen: false,\n      publishModalOpen: false,\n      unPublishModalOpen: false,\n      unSubmitModalOpen: false,\n      submitModalOpen: false,\n      transferModalOpen: false,\n      modalKey: \"\",\n      modalUserID: \"\",\n      loading: false,\n      showRecordTypes: [\"submitted\", \"published\"],\n      showUsers: [],\n      records: [],\n      recordsFilter: \"\",\n      recordCountsByStatus: {},\n    };\n  }\n\n  async componentDidMount() {\n    this.setState({ loading: true });\n    const { match } = this.props;\n    const { region } = match.params;\n\n    this.unsubscribe = auth.onAuthStateChanged((authUser) => {\n      if (authUser) {\n        const usersRef = firebase.database().ref(region).child(\"users\");\n        usersRef.on(\"value\", (regionUsersRaw) => {\n          const records = loadRegionRecords(regionUsersRaw, [\n            \"\",\n            \"submitted\",\n            \"published\",\n          ]);\n\n          this.setState({ records, loading: false });\n\n          const users = unique(records.map((record) => record.userinfo.email));\n\n          this.setState({\n            records,\n            loading: false,\n            users,\n            showUsers: users,\n          });\n        });\n        this.listenerRefs.push(usersRef);\n      }\n    });\n  }\n\n  editRecord(key, userID) {\n    const { history } = this.props;\n    const { language, region } = this.props.match.params;\n    history.push(`/${language}/${region}/${userID}/${key}`);\n  }\n\n  async handleTransferRecord(recordID, userID) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    return transferRecord(this.state.transferEmail, recordID, userID, region);\n  }\n\n  // user ID is that of the record owner, not the editor\n  handleCloneRecord(recordID, sourceUserID) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (auth.currentUser) {\n      cloneRecord(recordID, sourceUserID, auth.currentUser.uid, region);\n    }\n  }\n\n  async handleSubmitRecord(key, userID, status) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (key && userID) {\n      this.setState({ loading: true });\n      await submitRecord(region, userID, key, status);\n      this.setState({ loading: false });\n    }\n  }\n\n  async deleteRecord(key, userID) {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    if (key && userID) {\n      this.setState({ loading: true });\n      await deleteRecord(region, userID, key);\n      this.setState({ loading: false });\n    }\n  }\n\n  toggleModal(modalName, state, key = \"\", userID) {\n    this.setState({ modalKey: key, [modalName]: state, modalUserID: userID });\n  }\n\n  render() {\n    const {\n      records,\n      recordsFilter,\n      showRecordTypes,\n      showUsers,\n      deleteModalOpen,\n      transferModalOpen,\n      transferEmail,\n      transferUserNotFound,\n      modalKey,\n      modalUserID,\n      unPublishModalOpen,\n      publishModalOpen,\n      unSubmitModalOpen,\n      submitModalOpen,\n      loading,\n      users,\n    } = this.state;\n\n    const { match } = this.props;\n    const { language } = match.params;\n\n    const recordTypeOptions = [\"\", \"submitted\", \"published\"];\n\n    // sort records - drafts then submitted then published\n    let recordsToShow = records\n      .filter((record) => showUsers.includes(record.userinfo.email))\n      .sort((a, b) => a.created < b.created);\n\n    // the text search\n    if (recordsFilter) {\n      recordsToShow = recordsToShow.filter((record) => {\n        const recordText = JSON.stringify([\n          record.title || {},\n          record.abstract || {},\n        ]).toUpperCase();\n        return recordText.includes(recordsFilter.toUpperCase());\n      });\n    }\n\n    const recordCountsByStatus = {\n      draft: (recordsToShow.filter((record) => record.status === \"\") || [])\n        .length,\n      submitted: (\n        recordsToShow.filter((record) => record.status === \"submitted\") || []\n      ).length,\n      published: (\n        recordsToShow.filter((record) => record.status === \"published\") || []\n      ).length,\n    };\n\n    recordsToShow = recordsToShow.filter((record) =>\n      showRecordTypes.includes(record.status)\n    );\n\n    recordsToShow = recordsToShow.sort((a, b) => {\n      return (\n        showRecordTypes.indexOf(a.status) > showRecordTypes.indexOf(b.status)\n      );\n    });\n\n    const recordStatusTranslate = {\n      draft: { en: \"Draft\", fr: \"Brouillon\" },\n      submitted: { en: \"Submitted\", fr: \"Soumis\" },\n      published: { en: \"Published\", fr: \"Publié\" },\n    };\n    const selectedText = language === \"fr\" ? \"sélectionnés\" : \"selected\";\n    return (\n      <Grid\n        container\n        direction=\"column\"\n        justify=\"space-between\"\n        alignItems=\"stretch\"\n        spacing={3}\n      >\n        <TransferModal\n          open={transferModalOpen}\n          onClose={() => {\n            this.toggleModal(\"transferModalOpen\", false);\n            this.setState({ transferEmail: \"\" });\n          }}\n          onAccept={() => this.handleTransferRecord(modalKey, modalUserID)}\n          transferUserNotFound={transferUserNotFound}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n          email={transferEmail}\n          setEmail={(v) => this.setState({ transferEmail: v })}\n        />\n        <SimpleModal\n          open={deleteModalOpen}\n          onClose={() => this.toggleModal(\"deleteModalOpen\", false)}\n          onAccept={() => this.deleteRecord(modalKey, modalUserID)}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n        />\n        <SimpleModal\n          open={submitModalOpen}\n          onClose={() => this.toggleModal(\"submitModalOpen\", false)}\n          onAccept={() =>\n            this.handleSubmitRecord(modalKey, modalUserID, \"submitted\")\n          }\n          aria-labelledby=\"simple-modal-title\"\n        />\n        <SimpleModal\n          open={publishModalOpen}\n          onClose={() => this.toggleModal(\"publishModalOpen\", false)}\n          onAccept={() =>\n            this.handleSubmitRecord(modalKey, modalUserID, \"published\")\n          }\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n        />\n        <SimpleModal\n          open={unPublishModalOpen}\n          onClose={() => this.toggleModal(\"unPublishModalOpen\", false)}\n          onAccept={() =>\n            this.handleSubmitRecord(modalKey, modalUserID, \"submitted\")\n          }\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n        />\n        <SimpleModal\n          open={unSubmitModalOpen}\n          onClose={() => this.toggleModal(\"unSubmitModalOpen\", false)}\n          onAccept={() => this.handleSubmitRecord(modalKey, modalUserID, \"\")}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n        />\n        <Grid item xs>\n          <Typography variant=\"h5\">\n            <I18n>\n              <En>Review submissions</En>\n              <Fr>Examen des soumissions</Fr>\n            </I18n>\n          </Typography>\n        </Grid>\n        {loading ? (\n          <CircularProgress />\n        ) : (\n          <>\n            <Paper\n              style={{\n                padding: \"10px\",\n                margin: \"10px\",\n                width: \"100%\",\n              }}\n            >\n              <QuestionText>\n                <En>Filters</En>\n                <Fr>Filtres</Fr>\n              </QuestionText>\n              <Grid container direction=\"column\" spacing={2}>\n                <Grid item xs>\n                  <CheckBoxList\n                    value={showRecordTypes}\n                    onChange={(e) => {\n                      this.setState({ showRecordTypes: e });\n                    }}\n                    options={recordTypeOptions}\n                    optionLabels={[\"draft\", \"submitted\", \"published\"].map(\n                      (status) =>\n                        `${recordStatusTranslate[status][language]} (${recordCountsByStatus[status]})`\n                    )}\n                  />\n                </Grid>\n                <Grid item xs>\n                  <Accordion>\n                    <AccordionSummary\n                      expandIcon={<ExpandMoreIcon />}\n                      aria-controls=\"panel2a-content\"\n                      id=\"panel2a-header\"\n                    >\n                      <Typography>\n                        {showUsers.length === users.length ? (\n                          <I18n\n                            en=\"Users (All users selected)\"\n                            fr=\"Utilisateurs (Tous les utilisateurs)\"\n                          />\n                        ) : (\n                          <I18n\n                            en={`Users (${showUsers.length}  ${selectedText})`}\n                            fr={`Utilisateurs (${showUsers.length}  ${selectedText})`}\n                          />\n                        )}\n                      </Typography>\n                    </AccordionSummary>\n                    <AccordionDetails>\n                      <Grid container direction=\"column\">\n                        <Grid item xs>\n                          <En>Select All / None</En>\n                          <Fr>Tout sélectionner/Aucun</Fr>\n\n                          <Checkbox\n                            label=\"Show All / None\"\n                            onChange={(e) => {\n                              this.setState({\n                                showUsers: e.target.checked ? users : [],\n                              });\n                            }}\n                          />\n                        </Grid>\n                        <Grid item xs>\n                          <CheckBoxList\n                            value={showUsers}\n                            onChange={(e) => {\n                              this.setState({ showUsers: e });\n                            }}\n                            options={users}\n                            labelSize={null}\n                          />\n                        </Grid>\n                      </Grid>\n                    </AccordionDetails>\n                  </Accordion>\n                </Grid>\n                <Grid item xs>\n                  <TextField\n                    fullWidth\n                    onChange={(e) => {\n                      this.setState({ recordsFilter: e.target.value });\n                    }}\n                    label={\n                      <I18n\n                        en=\"Search title and abstract\"\n                        fr=\"Rechercher le titre et le résumé\"\n                      />\n                    }\n                  />\n                </Grid>\n              </Grid>\n            </Paper>\n            {recordsToShow.length ? (\n              <>\n                <Grid container direction=\"column\">\n                  <Grid item xs>\n                    <Typography>\n                      <I18n>\n                        <En>\n                          These are the submissions we have received from all\n                          users that have not yet been reviewed. To accept a\n                          record, click the 'Publish' button.\n                        </En>\n                        <Fr>\n                          Ce sont les soumissions que nous avons reçues de tous\n                          les utilisateurs qui n'ont pas encore été examinées.\n                          Pour accepter un enregistrement, cliquez sur le bouton\n                          « Publier ».\n                        </Fr>\n                      </I18n>\n                    </Typography>\n                  </Grid>\n                  <Grid item xs>\n                    <List>\n                      {recordsToShow.map((record) => (\n                        <RecordItem\n                          key={record.key}\n                          record={record}\n                          toggleModal={this.toggleModal.bind(this)}\n                          editRecord={this.editRecord.bind(this)}\n                          cloneRecord={this.handleCloneRecord.bind(this)}\n                        />\n                      ))}\n                    </List>\n                  </Grid>\n                </Grid>\n              </>\n            ) : (\n              <Grid container direction=\"column\">\n                <Grid item xs>\n                  <Typography>\n                    <I18n>\n                      <En>There are no records waiting to be reviewed.</En>\n                      <Fr>Aucun dossier n'attend d'être examiné.</Fr>\n                    </I18n>\n                  </Typography>\n                </Grid>\n              </Grid>\n            )}\n          </>\n        )}\n      </Grid>\n    );\n  }\n}\n\nexport default Reviewer;\n","import React from \"react\";\nimport {\n  Typography,\n  Button,\n  CircularProgress,\n  TextField,\n  Grid,\n} from \"@material-ui/core\";\nimport { Save } from \"@material-ui/icons\";\n\nimport firebase from \"../../firebase\";\nimport { auth } from \"../../auth\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport FormClassTemplate from \"./FormClassTemplate\";\n\nimport { unique } from \"../../utils/misc\";\n\nconst cleanArr = (arr) => unique(arr.map((e) => e.trim()).filter((e) => e));\n\nclass Admin extends FormClassTemplate {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // array of strings which are email addresses or reviewers, admins\n      admins: [],\n      reviewers: [],\n      loading: false,\n    };\n  }\n\n  async componentDidMount() {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    this.setState({ loading: true });\n\n    this.unsubscribe = auth.onAuthStateChanged((user) => {\n      if (user) {\n        const permissionsRef = firebase\n          .database()\n          .ref(region)\n          .child(\"permissions\");\n        permissionsRef.on(\"value\", (permissionsFirebase) => {\n          const permissions = permissionsFirebase.toJSON();\n\n          const admins = permissions.admins.split(\",\");\n          const reviewers = permissions.reviewers.split(\",\");\n\n          this.setState({\n            admins,\n            reviewers,\n            loading: false,\n          });\n        });\n        this.listenerRefs.push(permissionsRef);\n      }\n    });\n  }\n\n  updatePermissions() {\n    const { match } = this.props;\n    const { region } = match.params;\n\n    const { reviewers, admins } = this.state;\n\n    if (auth.currentUser) {\n      const dbRef = firebase.database().ref(region).child(\"permissions\");\n\n      dbRef.child(\"admins\").set(cleanArr(admins).join());\n      dbRef.child(\"reviewers\").set(cleanArr(reviewers).join());\n    }\n  }\n\n  render() {\n    const { loading, reviewers, admins } = this.state;\n    return (\n      <Grid container direction=\"column\" spacing={3}>\n        <Grid item xs>\n          <Typography variant=\"h5\">\n            <I18n>\n              <En>Admin</En>\n              <Fr>Administrateurs</Fr>\n            </I18n>\n          </Typography>\n          <Typography>\n            <I18n>\n              <En>\n                Add each admin or reviewer's email address on it's own line\n              </En>\n              <Fr>\n                Ajouter l'adresse e-mail de chaque administrateur ou réviseur\n                sur sa propre ligne\n              </Fr>\n            </I18n>\n          </Typography>\n        </Grid>\n\n        {loading ? (\n          <CircularProgress />\n        ) : (\n          <>\n            <Grid item xs>\n              <Typography>\n                <I18n>\n                  <En>Admins</En>\n                  <Fr>Administrateurs</Fr>\n                </I18n>\n              </Typography>\n            </Grid>\n            <Grid item xs>\n              <TextField\n                multiline\n                fullWidth\n                value={admins.join(\"\\n\")}\n                onChange={(e) =>\n                  this.setState({ admins: e.target.value.split(\"\\n\") })\n                }\n              />\n            </Grid>\n            <Grid item xs>\n              <Typography>\n                <I18n>\n                  <En>Reviewers</En>\n                  <Fr>Réviseurs</Fr>\n                </I18n>\n              </Typography>\n            </Grid>\n            <Grid item xs>\n              <TextField\n                multiline\n                fullWidth\n                value={reviewers.join(\"\\n\")}\n                onChange={(e) =>\n                  this.setState({\n                    reviewers: e.target.value.split(\"\\n\"),\n                  })\n                }\n              />\n            </Grid>\n            <Grid item xs>\n              <Button\n                startIcon={<Save />}\n                variant=\"contained\"\n                color=\"secondary\"\n                onClick={() => this.updatePermissions()}\n              >\n                <I18n>\n                  <En>Save</En>\n                  <Fr>Enregistrer</Fr>\n                </I18n>\n              </Button>\n            </Grid>\n          </>\n        )}\n      </Grid>\n    );\n  }\n}\n\nexport default Admin;\n","import React from \"react\";\nimport * as Sentry from \"@sentry/react\";\n\nconst SentryTest = () => {\n  Sentry.captureException(new Error(\"Testing sentry\"));\n  return <h1>Error notification sent</h1>;\n};\n\nexport default SentryTest;\n","import React, { useContext } from \"react\";\nimport { Route, Switch, useParams } from \"react-router-dom\";\nimport { Helmet } from \"react-helmet\";\nimport { CircularProgress, Grid } from \"@material-ui/core\";\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\nimport Submissions from \"./Pages/Submissions\";\nimport Published from \"./Pages/Published\";\nimport Contacts from \"./Pages/ContactsSaved\";\nimport Login from \"./Pages/Login\";\nimport NavDrawer from \"./NavDrawer\";\nimport MetadataForm from \"./Pages/MetadataForm\";\nimport ErrorBoundary from \"./Pages/ErrorBoundary\";\nimport EditContact from \"./FormComponents/EditSavedContact\";\nimport Reviewer from \"./Pages/Reviewer\";\nimport Admin from \"./Pages/Admin\";\nimport NotFound from \"./Pages/NotFound\";\nimport SentryTest from \"./Pages/SentryTest\";\nimport UserProvider, { UserContext } from \"../providers/UserProvider\";\nimport regions from \"../regions\";\n\nconst RegionLogo = ({ children }) => {\n  const { language, region } = useParams();\n  const imgPath = `/cioos-${region}-${language}.png`;\n  return (\n    <Grid container direction=\"column\" spacing={2}>\n      <Grid item xs>\n        <img src={process.env.PUBLIC_URL + imgPath} alt={region} />\n      </Grid>\n      <Grid item xs style={{ paddingLeft: \"50px\" }}>\n        {children}\n      </Grid>\n    </Grid>\n  );\n};\nconst Pages = ({ match }) => {\n  const { loggedIn, authIsLoading } = useContext(UserContext);\n\n  return (\n    <>\n      {authIsLoading ? (\n        <CircularProgress />\n      ) : (\n        <RegionLogo>\n          {loggedIn ? (\n            <ErrorBoundary>\n              <Switch>\n                <Route path={`${match.path}/`} exact component={Submissions} />\n                <Route path={`${match.path}/new`} component={MetadataForm} />\n                <Route\n                  path={`${match.path}/contacts/:contactID`}\n                  component={EditContact}\n                />\n                <Route\n                  path={`${match.path}/contacts/new`}\n                  component={EditContact}\n                />\n                <Route path={`${match.path}/contacts`} component={Contacts} />\n                <Route\n                  path={`${match.path}/:userID/:recordID`}\n                  component={MetadataForm}\n                />\n                <Route\n                  path={`${match.path}/submissions`}\n                  component={Submissions}\n                />\n                <Route path={`${match.path}/published`} component={Published} />\n                <Route path={`${match.path}/reviewer`} component={Reviewer} />\n                <Route path={`${match.path}/admin`} component={Admin} />\n                <Route\n                  path={`${match.path}/sentry-test`}\n                  component={SentryTest}\n                />\n                <Route path=\"*\" component={NotFound} />\n              </Switch>\n            </ErrorBoundary>\n          ) : (\n            <Login />\n          )}\n        </RegionLogo>\n      )}\n    </>\n  );\n};\nconst BaseLayout = ({ match }) => {\n  const { region, language } = useParams();\n\n  const theme = createMuiTheme({\n    palette: {\n      primary: {\n        main: regions[region].colors.primary,\n      },\n      secondary: {\n        main: regions[region].colors.secondary,\n      },\n    },\n    props: {\n      MuiTextField: {\n        variant: \"outlined\",\n      },\n      MuiSelect: {\n        variant: \"outlined\",\n      },\n      MuiButton: {\n        variant: \"outlined\",\n      },\n    },\n  });\n  const title = {\n    en: `${regions[region].title[language]} Metadata Intake Form`,\n    fr: `Formulaire de réception des métadonnées ${regions[region].title[language]}`,\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>{title[language]}</title>\n        <link\n          rel=\"icon\"\n          type=\"image/png\"\n          href={`${process.env.PUBLIC_URL}/favicons/${region}.ico`}\n          sizes=\"16x16\"\n        />\n      </Helmet>\n\n      <UserProvider>\n        <ThemeProvider theme={theme}>\n          <NavDrawer>\n            <Pages match={match} />\n          </NavDrawer>\n        </ThemeProvider>\n      </UserProvider>\n    </>\n  );\n};\n\nexport default BaseLayout;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\n\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\n\nimport Typography from \"@material-ui/core/Typography\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport regions from \"../../regions\";\n\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: 345,\n  },\n  media: {\n    height: 400,\n    \"&:hover\": {\n      filter:\n        \"brightness( 100% ) contrast( 100% ) saturate( 200% ) blur( 0px ) hue-rotate( 197deg )\",\n    },\n  },\n});\n\nexport default function MediaCard({ region, regionSummary }) {\n  const history = useHistory();\n  const { language } = useParams();\n  const classes = useStyles();\n\n  const regionInfo = regions[region];\n  const imgPath = `/cioos-${region}-${language}.png`;\n\n  return (\n    <Card\n      className={classes.root}\n      onClick={() => history.push(`/${language}/${region}`)}\n      style={{ minHeight: \"500px\", minWidth: \"400px\" }}\n    >\n      <CardActionArea>\n        <CardMedia\n          className={classes.media}\n          image={`${process.env.PUBLIC_URL}/map-${region}.jpg`}\n          title={regionInfo.title[language]}\n        />\n        <CardContent>\n          <div>\n            <img\n              src={process.env.PUBLIC_URL + imgPath}\n              alt={region}\n              style={{ margin: \"10px\", maxWidth: \"300px\", maxHeight: \"80px\" }}\n            />\n          </div>\n\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n            {regionSummary}\n          </Typography>\n        </CardContent>\n      </CardActionArea>\n    </Card>\n  );\n}\n","import React from \"react\";\nimport { Grid, Typography } from \"@material-ui/core\";\nimport { useParams } from \"react-router-dom\";\nimport { Helmet } from \"react-helmet\";\nimport { En, Fr, I18n } from \"../I18n\";\nimport RegionCard from \"../FormComponents/RegionCard\";\nimport regions from \"../../regions\";\n\nexport default function RegionSelect() {\n  const { language } = useParams();\n  const title = {\n    en: \"Metadata Intake Form\",\n    fr: \"Formulaire de réception des métadonnées\",\n  };\n  return (\n    <>\n      <Helmet>\n        <title>{title[language]}</title>\n      </Helmet>\n\n      <Grid container direction=\"column\" spacing={2}>\n        <Grid item xs>\n          <Typography variant=\"h6\">\n            <I18n>\n              <En>\n                Welcome to the CIOOS Metadata Entry Tool. To get started, please\n                select the region where your data was collected.\n              </En>\n              <Fr>\n                Bienvenue dans l'outil de saisie de métadonnées du SIOOC. Pour\n                commencer, veuillez sélectionner la région dans laquelle vos\n                données ont été collectées.\n              </Fr>\n            </I18n>\n          </Typography>\n        </Grid>\n        <Grid item xs>\n          <Grid\n            container\n            direction=\"row\"\n            justify=\"flex-start\"\n            alignItems=\"stretch\"\n          >\n            {Object.entries(regions).map(([regionCode, regionInfo]) => {\n              if (regionInfo.showInRegionSelector)\n                return (\n                  <Grid item xs key={regionCode}>\n                    <RegionCard\n                      region={regionCode}\n                      regionSummary={regionInfo.introPageText[language]}\n                    />\n                  </Grid>\n                );\n              return null;\n            })}\n          </Grid>\n        </Grid>\n      </Grid>\n    </>\n  );\n}\n","import React from \"react\";\nimport {\n  Route,\n  HashRouter as Router,\n  Redirect,\n  Switch,\n} from \"react-router-dom\";\nimport regions from \"../regions\";\nimport NavDrawer from \"./NavDrawer\";\n\nimport BaseLayout from \"./BaseLayout\";\nimport RegionSelect from \"./Pages/RegionSelect\";\n\nconst languagePath = \":language(en|fr)\";\n// eg :region(pacific|atlantic..)\nconst regionPath = `:region(${Object.keys(regions).join(\"|\")})`;\n\nconst App = () => (\n  <Router basename=\"/\">\n    <Switch>\n      <Route exact path=\"/\">\n        <Redirect to=\"/en/region-select\" />\n      </Route>\n      <Route\n        path={`/${languagePath}/region-select`}\n        exact\n        component={() => (\n          <NavDrawer>\n            <RegionSelect />\n          </NavDrawer>\n        )}\n      />\n      <Route path={`/${languagePath}/${regionPath}`} component={BaseLayout} />\n      <Route path=\"*\">\n        <Redirect to=\"/en/region-select\" />\n      </Route>\n    </Switch>\n  </Router>\n);\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport * as Sentry from \"@sentry/react\";\nimport { Integrations } from \"@sentry/tracing\";\n\nimport \"./index.css\";\nimport App from \"./components/App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nif (process.env.NODE_ENV === \"production\")\n  Sentry.init({\n    dsn:\n      \"https://8fd4b6885cc447c0b11aa0cb3009b0e3@o56764.ingest.sentry.io/5493983\",\n    integrations: [new Integrations.BrowserTracing()],\n\n    // We recommend adjusting this value in production, or using tracesSampler\n    // for finer control\n    tracesSampleRate: 1.0,\n  });\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}